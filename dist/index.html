<!DOCTYPE html>
<html style="height: 100%; margin: 0; position:relative">

<head>
  <meta charset="utf-8" />
  <title>CANVAS-UI test board</title>
  <style>
    .action {
      border: none;
      border-radius: 5px;
      padding: 6px;
      margin: 2px;
      font-weight: bold;
      font-size: 12px;
      font: sans-serif;
    }
  </style>
</head>

<body style="margin: 0; overflow: hidden; background-color: gray;position: absolute; top:0;left:0;right:0;bottom:0">
  <button class="action" onclick="newCanvas()">New</button>
  <button class="action" onclick="canvas.run()">Run</button>
  <button class="action" onclick="canvas.dump()">DUMP</button>
  <button class="action" onclick="exampleCanvas()">Example</button>
  <div id="cnodes"
    style="margin: 10px; border: 10px solid lightgray; background-color: white; position: absolute; top:20px; left:0; right:0; bottom:0">
  </div>

  <script src="main.js"></script>
  <script>

    let canvas = cnui.canvas('cnodes');

    function exampleCanvas() {
      // let prg = cnui.Env.import(JSON.parse(`{"id":"NID_384","version":1,"lastNodeIndex":347,"lastSocketIndex":1205,"enter":"NID_11","exit":"NID_12","nodes":[{"id":"NID_11","name":"Enter","functional":false,"meta":{"pos":{"x":-687.4407958984375,"y":-540.4018249511719}},"inputs":[{"id":"SID_39","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":0,"peer":null}],"outputs":[{"id":"SID_40","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":0,"peers":[]}],"prev":null,"nexts":[{"id":"SID_41","name":"Begin","node":null,"peer":null}]},{"id":"NID_12","name":"Exit","functional":false,"meta":{"pos":{"x":-9.83782958984375,"y":-541.5230407714844}},"inputs":[{"id":"SID_42","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":0,"peer":null}],"outputs":[{"id":"SID_43","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":0,"peers":[]}],"prev":{"id":"SID_44","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_13","name":"Setvar","functional":false,"meta":{"pos":{"x":367.56402587890625,"y":95.12271118164062}},"inputs":[{"id":"SID_45","name":"Name","node":null,"type":{},"value":"Fattoriale","peer":null},{"id":"SID_46","name":"Val","node":null,"type":{"type":"number","isArray":false},"value":1,"peer":null}],"outputs":[{"id":"SID_47","name":"Val","node":null,"type":{},"value":1,"peers":[]}],"prev":{"id":"SID_49","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_48","name":"Out","node":null,"peer":null}]},{"id":"NID_14","name":"FDiv","functional":true,"meta":{"pos":{"x":112.78068542480469,"y":307.5643310546875}},"inputs":[{"id":"SID_50","name":"Val1","node":null,"type":{"type":"number","isArray":false},"value":"1","peer":null},{"id":"SID_51","name":"Val2","node":null,"type":{"type":"number","isArray":false},"value":"1","peer":null}],"outputs":[{"id":"SID_52","name":"Val","node":null,"type":{"type":"number","isArray":false},"value":1,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_15","name":"For","functional":false,"meta":{"pos":{"x":685.4244384765625,"y":94.05479431152344}},"inputs":[{"id":"SID_53","name":"From","node":null,"type":{"type":"number","isArray":false},"value":"1","peer":null},{"id":"SID_54","name":"To","node":null,"type":{"type":"number","isArray":false},"value":10,"peer":null}],"outputs":[{"id":"SID_55","name":"Index","node":null,"type":{"type":"number","isArray":false},"value":9,"peers":[]}],"prev":{"id":"SID_58","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_56","name":"Out","node":null,"peer":null},{"id":"SID_57","name":"Do","node":null,"peer":null}]},{"id":"NID_17","name":"FGetvar","functional":true,"meta":{"pos":{"x":679.3650970458984,"y":378.5809326171875}},"inputs":[{"id":"SID_62","name":"Name","node":null,"type":{},"value":"Fattoriale","peer":null}],"outputs":[{"id":"SID_63","name":"Val","node":null,"type":{},"value":40320,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_18","name":"Setvar","functional":false,"meta":{"pos":{"x":1253.9583740234375,"y":122.64752197265625}},"inputs":[{"id":"SID_64","name":"Name","node":null,"type":{},"value":"Fattoriale","peer":null},{"id":"SID_65","name":"Val","node":null,"type":{"type":"number","isArray":false},"value":362880,"peer":null}],"outputs":[{"id":"SID_66","name":"Val","node":null,"type":{},"value":362880,"peers":[]}],"prev":{"id":"SID_68","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_67","name":"Out","node":null,"peer":null}]},{"id":"NID_21","name":"FAdd","functional":true,"meta":{"pos":{"x":359.81756591796875,"y":-78.29185104370117}},"inputs":[{"id":"SID_74","name":"Val1","node":null,"type":{"type":"number","isArray":false},"value":9,"peer":null},{"id":"SID_75","name":"Val2","node":null,"type":{"type":"number","isArray":false},"value":"1","peer":null}],"outputs":[{"id":"SID_76","name":"Val","node":null,"type":{"type":"number","isArray":false},"value":10,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_23","name":"FMul","functional":true,"meta":{"pos":{"x":981.8954772949219,"y":283.8112487792969}},"inputs":[{"id":"SID_80","name":"Val1","node":null,"type":{"type":"number","isArray":false},"value":9,"peer":null},{"id":"SID_81","name":"Val2","node":null,"type":{},"value":40320,"peer":null}],"outputs":[{"id":"SID_82","name":"Val","node":null,"type":{"type":"number","isArray":false},"value":362880,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_65","name":"For","functional":false,"meta":{"pos":{"x":-82.6536865234375,"y":-314.65399169921875}},"inputs":[{"id":"SID_223","name":"From","node":null,"type":{"type":"number","isArray":0},"value":"0","peer":null},{"id":"SID_224","name":"To","node":null,"type":{"type":"number","isArray":0},"value":"10","peer":null}],"outputs":[{"id":"SID_225","name":"Index","node":null,"type":{"type":"number","isArray":false},"value":9,"peers":[]}],"prev":{"id":"SID_228","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_226","name":"Out","node":null,"peer":null},{"id":"SID_227","name":"Do","node":null,"peer":null}]},{"id":"NID_83","name":"FGetvar","functional":true,"meta":{"pos":{"x":682.1423950195312,"y":-126.18174743652344}},"inputs":[{"id":"SID_287","name":"Name","node":null,"type":{"type":"string","isArray":false},"value":"Fattoriale","peer":null}],"outputs":[{"id":"SID_288","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":362880,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_101","name":"Console","functional":false,"meta":{"pos":{"x":902.879638671875,"y":-318.0303955078125}},"inputs":[{"id":"SID_350","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":362880,"peer":null}],"outputs":[],"prev":{"id":"SID_352","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_351","name":"Out","node":null,"peer":null}]},{"id":"NID_120","name":"Console","functional":false,"meta":{"pos":{"x":1031.792724609375,"y":-16.893197059631348}},"inputs":[{"id":"SID_416","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":362880,"peer":null}],"outputs":[],"prev":{"id":"SID_418","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_417","name":"Out","node":null,"peer":null}]},{"id":"NID_312","name":"For","functional":false,"meta":{"pos":{"x":-357.94281005859375,"y":-541.6021118164062}},"inputs":[{"id":"SID_1081","name":"From","node":null,"type":{"type":"number","isArray":0},"value":"1","peer":null},{"id":"SID_1082","name":"To","node":null,"type":{"type":"number","isArray":0},"value":"10","peer":null}],"outputs":[{"id":"SID_1083","name":"Index","node":null,"type":{"type":"number","isArray":false},"value":9,"peers":[]}],"prev":{"id":"SID_1086","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1084","name":"Out","node":null,"peer":null},{"id":"SID_1085","name":"Do","node":null,"peer":null}]}],"connections":[{"type":"pn","sourceNode":"NID_11","sourceSocket":"SID_41","targetNode":"NID_312","targetSocket":"SID_1086"},{"type":"pn","sourceNode":"NID_312","sourceSocket":"SID_1084","targetNode":"NID_12","targetSocket":"SID_44"},{"type":"pn","sourceNode":"NID_65","sourceSocket":"SID_227","targetNode":"NID_13","targetSocket":"SID_49"},{"type":"io","sourceNode":"NID_14","sourceSocket":"SID_52","targetNode":"NID_13","targetSocket":"SID_46"},{"type":"pn","sourceNode":"NID_13","sourceSocket":"SID_48","targetNode":"NID_15","targetSocket":"SID_58"},{"type":"io","sourceNode":"NID_21","sourceSocket":"SID_76","targetNode":"NID_15","targetSocket":"SID_54"},{"type":"io","sourceNode":"NID_15","sourceSocket":"SID_55","targetNode":"NID_23","targetSocket":"SID_80"},{"type":"pn","sourceNode":"NID_15","sourceSocket":"SID_56","targetNode":"NID_120","targetSocket":"SID_418"},{"type":"pn","sourceNode":"NID_15","sourceSocket":"SID_57","targetNode":"NID_18","targetSocket":"SID_68"},{"type":"io","sourceNode":"NID_17","sourceSocket":"SID_63","targetNode":"NID_23","targetSocket":"SID_81"},{"type":"io","sourceNode":"NID_23","sourceSocket":"SID_82","targetNode":"NID_18","targetSocket":"SID_65"},{"type":"io","sourceNode":"NID_65","sourceSocket":"SID_225","targetNode":"NID_21","targetSocket":"SID_74"},{"type":"pn","sourceNode":"NID_312","sourceSocket":"SID_1085","targetNode":"NID_65","targetSocket":"SID_228"},{"type":"pn","sourceNode":"NID_65","sourceSocket":"SID_226","targetNode":"NID_101","targetSocket":"SID_352"},{"type":"io","sourceNode":"NID_83","sourceSocket":"SID_288","targetNode":"NID_101","targetSocket":"SID_350"},{"type":"io","sourceNode":"NID_83","sourceSocket":"SID_288","targetNode":"NID_120","targetSocket":"SID_416"}]}`));
      let prg = cnui.Env.import(JSON.parse(`{"id":"NID_187","version":1,"lastNodeIndex":765,"lastSocketIndex":2594,"enter":"NID_188","exit":"NID_189","nodes":[{"id":"NID_188","name":"Enter","functional":false,"meta":{"pos":{"x":29.382705688476562,"y":230.2926483154297}},"inputs":[{"id":"SID_638","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":0,"peer":null}],"outputs":[{"id":"SID_639","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":0,"peers":[]}],"prev":null,"nexts":[{"id":"SID_640","name":"Begin","node":null,"peer":null}]},{"id":"NID_189","name":"Exit","functional":false,"meta":{"pos":{"x":1227.5386962890625,"y":62.67131805419922}},"inputs":[{"id":"SID_641","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":"0","peer":null}],"outputs":[{"id":"SID_642","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":"0","peers":[]}],"prev":{"id":"SID_643","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_190","name":"Program","functional":false,"meta":{"pos":{"x":683.763427734375,"y":313.448486328125}},"program":{"id":"NID_190","version":1,"lastNodeIndex":765,"lastSocketIndex":2594,"enter":"NID_191","exit":"NID_192","nodes":[{"id":"NID_191","name":"Enter","functional":false,"meta":{"pos":{"x":19.116241455078125,"y":106.87127685546875}},"inputs":[{"id":"SID_648","name":"Val","node":null,"type":{"type":"number","isArray":false},"value":99,"peer":null}],"outputs":[{"id":"SID_649","name":"Val","node":null,"type":{"type":"number","isArray":false},"value":99,"peers":[]}],"prev":null,"nexts":[{"id":"SID_650","name":"Begin","node":null,"peer":null}]},{"id":"NID_192","name":"Exit","functional":false,"meta":{"pos":{"x":1127.1397705078125,"y":-21.695526123046875}},"inputs":[{"id":"SID_651","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":4851,"peer":null}],"outputs":[{"id":"SID_652","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":4851,"peers":[]}],"prev":{"id":"SID_653","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_265","name":"For","functional":false,"meta":{"pos":{"x":696.2970581054688,"y":106.8349609375}},"inputs":[{"id":"SID_896","name":"From","node":null,"type":{"type":"number","isArray":0},"value":"0","peer":null},{"id":"SID_897","name":"To","node":null,"type":{"type":"number","isArray":false},"value":99,"peer":null}],"outputs":[{"id":"SID_898","name":"Index","node":null,"type":{"type":"number","isArray":false},"value":98,"peers":[]}],"prev":{"id":"SID_901","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_899","name":"Out","node":null,"peer":null},{"id":"SID_900","name":"Do","node":null,"peer":null}]},{"id":"NID_314","name":"Setvar","functional":false,"meta":{"pos":{"x":351.0544738769531,"y":-101.04100036621094}},"inputs":[{"id":"SID_1066","name":"Name","node":null,"type":{"type":"number","isArray":false},"value":"val","peer":null},{"id":"SID_1067","name":"Val","node":null,"type":{"type":"number","isArray":false},"value":"0","peer":null}],"outputs":[{"id":"SID_1068","name":"Val","node":null,"type":{},"value":"0","peers":[]}],"prev":{"id":"SID_1070","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1069","name":"Out","node":null,"peer":null}]},{"id":"NID_360","name":"Setvar","functional":false,"meta":{"pos":{"x":1304.561767578125,"y":284.7996826171875}},"inputs":[{"id":"SID_1222","name":"Name","node":null,"type":{"type":"number","isArray":false},"value":"val","peer":null},{"id":"SID_1223","name":"Val","node":null,"type":{"type":"number","isArray":false},"value":4851,"peer":null}],"outputs":[{"id":"SID_1224","name":"Val","node":null,"type":{},"value":4851,"peers":[]}],"prev":{"id":"SID_1226","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1225","name":"Out","node":null,"peer":null}]},{"id":"NID_379","name":"FGetvar","functional":true,"meta":{"pos":{"x":665.0567016601562,"y":406.16961669921875}},"inputs":[{"id":"SID_1284","name":"Name","node":null,"type":{"type":"string","isArray":false},"value":"val","peer":null}],"outputs":[{"id":"SID_1285","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":4851,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_410","name":"FAdd","functional":true,"meta":{"pos":{"x":1017.7772827148438,"y":375.00701904296875}},"inputs":[{"id":"SID_1395","name":"0","node":null,"type":{"type":"any","isArray":false},"value":4753,"peer":null},{"id":"SID_1396","name":"1","node":null,"type":{"type":"number","isArray":false},"value":98,"peer":null}],"outputs":[{"id":"SID_1397","name":"Val","node":null,"type":{"type":"number","isArray":false},"value":4851,"peers":[]}],"prev":null,"nexts":[]}],"connections":[{"type":"io","sourceNode":"NID_191","sourceSocket":"SID_649","targetNode":"NID_265","targetSocket":"SID_897"},{"type":"pn","sourceNode":"NID_191","sourceSocket":"SID_650","targetNode":"NID_314","targetSocket":"SID_1070"},{"type":"pn","sourceNode":"NID_265","sourceSocket":"SID_899","targetNode":"NID_192","targetSocket":"SID_653"},{"type":"io","sourceNode":"NID_379","sourceSocket":"SID_1285","targetNode":"NID_192","targetSocket":"SID_651"},{"type":"pn","sourceNode":"NID_314","sourceSocket":"SID_1069","targetNode":"NID_265","targetSocket":"SID_901"},{"type":"io","sourceNode":"NID_265","sourceSocket":"SID_898","targetNode":"NID_410","targetSocket":"SID_1396"},{"type":"pn","sourceNode":"NID_265","sourceSocket":"SID_900","targetNode":"NID_360","targetSocket":"SID_1226"},{"type":"io","sourceNode":"NID_410","sourceSocket":"SID_1397","targetNode":"NID_360","targetSocket":"SID_1223"},{"type":"io","sourceNode":"NID_379","sourceSocket":"SID_1285","targetNode":"NID_410","targetSocket":"SID_1395"}]},"inputs":[{"id":"SID_644","name":"Val","node":null,"type":{"type":"number","isArray":false},"value":99,"peer":null}],"outputs":[{"id":"SID_645","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":4851,"peers":[]}],"prev":{"id":"SID_647","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_646","name":"Out","node":null,"peer":null}]},{"id":"NID_213","name":"Program","functional":false,"meta":{"pos":{"x":871.7838134765625,"y":59.33479690551758}},"program":{"id":"NID_213","version":1,"lastNodeIndex":765,"lastSocketIndex":2594,"enter":"NID_214","exit":"NID_215","nodes":[{"id":"NID_214","name":"Enter","functional":false,"meta":{"pos":{"x":100,"y":100}},"inputs":[{"id":"SID_726","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":4851,"peer":null}],"outputs":[{"id":"SID_727","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":4851,"peers":[]}],"prev":null,"nexts":[{"id":"SID_728","name":"Begin","node":null,"peer":null}]},{"id":"NID_215","name":"Exit","functional":false,"meta":{"pos":{"x":902.9408569335938,"y":110.19505310058594}},"inputs":[{"id":"SID_729","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":"0","peer":null}],"outputs":[{"id":"SID_730","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":"0","peers":[]}],"prev":{"id":"SID_731","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_654","name":"Console","functional":false,"meta":{"pos":{"x":510.85174560546875,"y":110.48361206054688}},"inputs":[{"id":"SID_2217","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":4851,"peer":null}],"outputs":[],"prev":{"id":"SID_2219","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_2218","name":"Out","node":null,"peer":null}]}],"connections":[{"type":"io","sourceNode":"NID_214","sourceSocket":"SID_727","targetNode":"NID_654","targetSocket":"SID_2217"},{"type":"pn","sourceNode":"NID_214","sourceSocket":"SID_728","targetNode":"NID_654","targetSocket":"SID_2219"},{"type":"pn","sourceNode":"NID_654","sourceSocket":"SID_2218","targetNode":"NID_215","targetSocket":"SID_731"}]},"inputs":[{"id":"SID_722","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":4851,"peer":null}],"outputs":[{"id":"SID_723","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":"0","peers":[]}],"prev":{"id":"SID_725","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_724","name":"Out","node":null,"peer":null}]},{"id":"NID_447","name":"Console","functional":false,"meta":{"pos":{"x":1035.262451171875,"y":313.21917724609375}},"inputs":[{"id":"SID_1515","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":4851,"peer":null}],"outputs":[],"prev":{"id":"SID_1517","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1516","name":"Out","node":null,"peer":null}]},{"id":"NID_495","name":"For","functional":false,"meta":{"pos":{"x":381.60198974609375,"y":231.48828125}},"inputs":[{"id":"SID_1676","name":"From","node":null,"type":{"type":"number","isArray":0},"value":"0","peer":null},{"id":"SID_1677","name":"To","node":null,"type":{"type":"number","isArray":0},"value":"100","peer":null}],"outputs":[{"id":"SID_1678","name":"Index","node":null,"type":{"type":"number","isArray":false},"value":99,"peers":[]}],"prev":{"id":"SID_1681","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1679","name":"Out","node":null,"peer":null},{"id":"SID_1680","name":"Do","node":null,"peer":null}]}],"connections":[{"type":"pn","sourceNode":"NID_188","sourceSocket":"SID_640","targetNode":"NID_495","targetSocket":"SID_1681"},{"type":"pn","sourceNode":"NID_213","sourceSocket":"SID_724","targetNode":"NID_189","targetSocket":"SID_643"},{"type":"pn","sourceNode":"NID_495","sourceSocket":"SID_1680","targetNode":"NID_190","targetSocket":"SID_647"},{"type":"io","sourceNode":"NID_495","sourceSocket":"SID_1678","targetNode":"NID_190","targetSocket":"SID_644"},{"type":"io","sourceNode":"NID_190","sourceSocket":"SID_645","targetNode":"NID_213","targetSocket":"SID_722"},{"type":"pn","sourceNode":"NID_190","sourceSocket":"SID_646","targetNode":"NID_447","targetSocket":"SID_1517"},{"type":"pn","sourceNode":"NID_495","sourceSocket":"SID_1679","targetNode":"NID_213","targetSocket":"SID_725"},{"type":"io","sourceNode":"NID_190","sourceSocket":"SID_645","targetNode":"NID_447","targetSocket":"SID_1515"}]}`));
      canvas.program = prg;
    }

    function newCanvas() {
      canvas.program = new cnui.Program();
    }

    newCanvas();

  </script>
</body>

</html>
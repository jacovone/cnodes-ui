<!DOCTYPE html>
<html style="height: 100%; margin: 0; position:relative">

<head>
  <meta charset="utf-8" />
  <title>cnodes-ui test board</title>
  <style>
    svg {
      background-color: #ffffff;
      opacity: 1;
      background-image: linear-gradient(#fafafa 8px, transparent 8px), linear-gradient(90deg, #fafafa 8px, transparent 8px), linear-gradient(#fafafa 4px, transparent 4px), linear-gradient(90deg, #fafafa 4px, #ffffff 4px);
      background-size: 200px 200px, 200px 200px, 40px 40px, 40px 40px;
      background-position: -8px -8px, -8px -8px, -4px -4px, -4px -4px;
    }

    .action {
      border: none;
      border-radius: 5px;
      padding: 4px;
      margin-left: 10px;
      margin-top: 3px;
      font-weight: bold;
      font-size: 12px;
      font: sans-serif;
      background-color: rgb(247, 247, 247)
    }
  </style>
</head>

<body
  style="margin: 0; overflow: hidden; background-color: lightgray;position: absolute; top:0;left:0;right:0;bottom:0">
  <button class="action" onclick="newCanvas()">New</button>
  <button class="action" onclick="canvas.run()">Run</button>
  <button class="action" onclick="canvas.dump()">Dump</button>
  <button class="action" onclick="loadProgram()">Load</button>
  <button class="action" onclick="saveProgram()">Save</button>
  <button class="action" onclick="exampleCanvas()">Example1</button>
  <button class="action" onclick="exampleCanvas2()">Example2</button>
  <button class="action" onclick="exampleCanvas3()">Example3</button>
  <button class="action" onclick="exampleCanvas4()">Example4</button>
  <div id="cnodes"
    style="margin: 10px; border: 10px solid gray; position: absolute; top:20px; left:0; right:0; bottom:0">
  </div>

  <script type="text/javascript" src="main.js"></script>
  <script>

    let canvas = cnui.canvas('cnodes');
    canvas.maxVBSize = 5000;
    canvas.minVBSize = 100;

    function exampleCanvas() {
      let prg = cnui.Env.import(JSON.parse(`{"id":"NID_283","version":1,"lastNodeIndex":776,"lastSocketIndex":2508,"enter":"NID_284","exit":"NID_285","nodes":[{"id":"NID_284","name":"Enter","functional":false,"meta":{"pos":{"x":82.44297790527344,"y":98.7099609375}},"inputs":[{"id":"SID_920","name":"Val","node":null,"type":"any","value":0,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_921","name":"Val","node":null,"type":"any","value":0,"canEditName":false,"peers":[]}],"prev":null,"nexts":[{"id":"SID_922","name":"Begin","node":null,"peer":null}]},{"id":"NID_285","name":"Exit","functional":false,"meta":{"pos":{"x":782.1992034912109,"y":108.1705322265625}},"inputs":[{"id":"SID_923","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peer":null}],"outputs":[{"id":"SID_924","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peers":[]}],"prev":{"id":"SID_925","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_292","name":"For","functional":false,"meta":{"pos":{"x":395.27777099609375,"y":99.28033447265625}},"inputs":[{"id":"SID_944","name":"From","node":null,"type":"number","value":"1","canEditName":false,"peer":null},{"id":"SID_945","name":"To","node":null,"type":"number","value":"10","canEditName":false,"peer":null}],"outputs":[{"id":"SID_946","name":"Index","node":null,"type":"number","value":9,"canEditName":false,"peers":[]}],"prev":{"id":"SID_949","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_947","name":"Out","node":null,"peer":null},{"id":"SID_948","name":"Do","node":null,"peer":null}]},{"id":"NID_327","name":"For","functional":false,"meta":{"pos":{"x":687.4207763671875,"y":265.0920104980469}},"inputs":[{"id":"SID_1057","name":"From","node":null,"type":"number","value":"0","canEditName":false,"peer":null},{"id":"SID_1058","name":"To","node":null,"type":"number","value":"10","canEditName":false,"peer":null}],"outputs":[{"id":"SID_1059","name":"Index","node":null,"type":"number","value":9,"canEditName":false,"peers":[]}],"prev":{"id":"SID_1062","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1060","name":"Out","node":null,"peer":null},{"id":"SID_1061","name":"Do","node":null,"peer":null}]},{"id":"NID_373","name":"FAdd","functional":true,"meta":{"pos":{"x":1041.1834716796875,"y":355.6142272949219}},"inputs":[{"id":"SID_1212","name":"0","node":null,"type":"number","value":9,"canEditName":false,"peer":null},{"id":"SID_1213","name":"1","node":null,"type":"number","value":"0","canEditName":false,"peer":null}],"outputs":[{"id":"SID_1214","name":"Val","node":null,"type":"number","value":9,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_436","name":"Setvar","functional":false,"meta":{"pos":{"x":1054.2991943359375,"y":549.0394287109375}},"inputs":[{"id":"SID_1414","name":"Name","node":null,"type":"string","value":"Factorial","canEditName":false,"peer":null},{"id":"SID_1415","name":"Val","node":null,"type":"number","value":1,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_1416","name":"Val","node":null,"type":"any","value":1,"canEditName":false,"peers":[]}],"prev":{"id":"SID_1418","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1417","name":"Out","node":null,"peer":null}]},{"id":"NID_512","name":"FNConst","functional":true,"meta":{"pos":{"x":757.0947875976562,"y":639.1887817382812}},"inputs":[{"id":"SID_1662","name":"Val","node":null,"type":"any","value":"1","canEditName":false,"peer":null}],"outputs":[{"id":"SID_1663","name":"Val","node":null,"type":"number","value":1,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_537","name":"For","functional":false,"meta":{"pos":{"x":1376.6788330078125,"y":551.0457153320312}},"inputs":[{"id":"SID_1735","name":"From","node":null,"type":"number","value":"1","canEditName":false,"peer":null},{"id":"SID_1736","name":"To","node":null,"type":"number","value":9,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_1737","name":"Index","node":null,"type":"number","value":8,"canEditName":false,"peers":[]}],"prev":{"id":"SID_1740","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1738","name":"Out","node":null,"peer":null},{"id":"SID_1739","name":"Do","node":null,"peer":null}]},{"id":"NID_570","name":"Console","functional":false,"meta":{"pos":{"x":1633.87255859375,"y":264.3951721191406}},"inputs":[{"id":"SID_1843","name":"Val","node":null,"type":"any","value":40320,"canEditName":false,"peer":null}],"outputs":[],"prev":{"id":"SID_1845","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1844","name":"Out","node":null,"peer":null}]},{"id":"NID_606","name":"FGetvar","functional":true,"meta":{"pos":{"x":1319.8341064453125,"y":355.991943359375}},"inputs":[{"id":"SID_1959","name":"Name","node":null,"type":"string","value":"Factorial","canEditName":false,"peer":null}],"outputs":[{"id":"SID_1960","name":"Val","node":null,"type":"any","value":40320,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_640","name":"Console","functional":false,"meta":{"pos":{"x":1637.630126953125,"y":409.7035827636719}},"inputs":[{"id":"SID_2069","name":"Val","node":null,"type":"any","value":40320,"canEditName":false,"peer":null}],"outputs":[],"prev":{"id":"SID_2071","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_2070","name":"Out","node":null,"peer":null}]},{"id":"NID_681","name":"Setvar","functional":false,"meta":{"pos":{"x":1954.83984375,"y":581.7943725585938}},"inputs":[{"id":"SID_2205","name":"Name","node":null,"type":"string","value":"Factorial","canEditName":false,"peer":null},{"id":"SID_2206","name":"Val","node":null,"type":"number","value":40320,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_2207","name":"Val","node":null,"type":"any","value":40320,"canEditName":false,"peers":[]}],"prev":{"id":"SID_2209","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_2208","name":"Out","node":null,"peer":null}]},{"id":"NID_726","name":"FMul","functional":true,"meta":{"pos":{"x":1680.7606201171875,"y":771.2333374023438}},"inputs":[{"id":"SID_2351","name":"0","node":null,"type":"number","value":8,"canEditName":false,"peer":null},{"id":"SID_2352","name":"1","node":null,"type":"any","value":5040,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_2353","name":"Val","node":null,"type":"number","value":40320,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_746","name":"FGetvar","functional":true,"meta":{"pos":{"x":1355.103759765625,"y":829.9156494140625}},"inputs":[{"id":"SID_2411","name":"Name","node":null,"type":"string","value":"Factorial","canEditName":false,"peer":null}],"outputs":[{"id":"SID_2412","name":"Val","node":null,"type":"any","value":5040,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]}],"connections":[{"type":"pn","sourceNode":"NID_284","sourceSocket":"SID_922","targetNode":"NID_292","targetSocket":"SID_949"},{"type":"pn","sourceNode":"NID_292","sourceSocket":"SID_947","targetNode":"NID_285","targetSocket":"SID_925"},{"type":"pn","sourceNode":"NID_292","sourceSocket":"SID_948","targetNode":"NID_327","targetSocket":"SID_1062"},{"type":"io","sourceNode":"NID_327","sourceSocket":"SID_1059","targetNode":"NID_373","targetSocket":"SID_1212"},{"type":"pn","sourceNode":"NID_327","sourceSocket":"SID_1060","targetNode":"NID_570","targetSocket":"SID_1845"},{"type":"pn","sourceNode":"NID_327","sourceSocket":"SID_1061","targetNode":"NID_436","targetSocket":"SID_1418"},{"type":"io","sourceNode":"NID_373","sourceSocket":"SID_1214","targetNode":"NID_537","targetSocket":"SID_1736"},{"type":"io","sourceNode":"NID_512","sourceSocket":"SID_1663","targetNode":"NID_436","targetSocket":"SID_1415"},{"type":"pn","sourceNode":"NID_436","sourceSocket":"SID_1417","targetNode":"NID_537","targetSocket":"SID_1740"},{"type":"io","sourceNode":"NID_537","sourceSocket":"SID_1737","targetNode":"NID_726","targetSocket":"SID_2351"},{"type":"pn","sourceNode":"NID_537","sourceSocket":"SID_1738","targetNode":"NID_640","targetSocket":"SID_2071"},{"type":"pn","sourceNode":"NID_537","sourceSocket":"SID_1739","targetNode":"NID_681","targetSocket":"SID_2209"},{"type":"io","sourceNode":"NID_606","sourceSocket":"SID_1960","targetNode":"NID_570","targetSocket":"SID_1843"},{"type":"io","sourceNode":"NID_606","sourceSocket":"SID_1960","targetNode":"NID_640","targetSocket":"SID_2069"},{"type":"io","sourceNode":"NID_726","sourceSocket":"SID_2353","targetNode":"NID_681","targetSocket":"SID_2206"},{"type":"io","sourceNode":"NID_746","sourceSocket":"SID_2412","targetNode":"NID_726","targetSocket":"SID_2352"}]}`));
      canvas.program = prg;
    }

    function exampleCanvas2() {

      let prg = cnui.Env.import(JSON.parse(`{"id":"NID_776","version":1,"lastNodeIndex":1234,"lastSocketIndex":3987,"enter":"NID_777","exit":"NID_778","nodes":[{"id":"NID_777","name":"Enter","functional":false,"meta":{"pos":{"x":100,"y":100}},"inputs":[{"id":"SID_2512","name":"Val","node":null,"type":"any","value":0,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_2513","name":"Val","node":null,"type":"any","value":0,"canEditName":false,"peers":[]}],"prev":null,"nexts":[{"id":"SID_2514","name":"Begin","node":null,"peer":null}]},{"id":"NID_778","name":"Exit","functional":false,"meta":{"pos":{"x":1376.786376953125,"y":-15.530815124511719}},"inputs":[{"id":"SID_2515","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peer":null}],"outputs":[{"id":"SID_2516","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peers":[]}],"prev":{"id":"SID_2517","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_785","name":"For","functional":false,"meta":{"pos":{"x":464.35101318359375,"y":100.5627212524414}},"inputs":[{"id":"SID_2536","name":"From","node":null,"type":"number","value":"0","canEditName":false,"peer":null},{"id":"SID_2537","name":"To","node":null,"type":"number","value":"100","canEditName":false,"peer":null}],"outputs":[{"id":"SID_2538","name":"Index","node":null,"type":"number","value":99,"canEditName":false,"peers":[]}],"prev":{"id":"SID_2541","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_2539","name":"Out","node":null,"peer":null},{"id":"SID_2540","name":"Do","node":null,"peer":null}]},{"id":"NID_814","name":"Program","functional":false,"meta":{"pos":{"x":813.8449096679688,"y":206.58978271484375}},"program":{"id":"NID_814","version":1,"lastNodeIndex":1234,"lastSocketIndex":3987,"enter":"NID_815","exit":"NID_816","nodes":[{"id":"NID_815","name":"Enter","functional":false,"meta":{"pos":{"x":-38.05843734741211,"y":101.09680938720703}},"inputs":[{"id":"SID_2635","name":"Val","node":null,"type":"number","value":99,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_2636","name":"Val","node":null,"type":"number","value":99,"canEditName":false,"peers":[]}],"prev":null,"nexts":[{"id":"SID_2637","name":"Begin","node":null,"peer":null}]},{"id":"NID_816","name":"Exit","functional":false,"meta":{"pos":{"x":965.4336547851562,"y":-81.37123107910156}},"inputs":[{"id":"SID_2638","name":"Val","node":null,"type":"any","value":4851,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_2639","name":"Val","node":null,"type":"any","value":4851,"canEditName":false,"peers":[]}],"prev":{"id":"SID_2640","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_1034","name":"Setvar","functional":false,"meta":{"pos":{"x":245.56692504882812,"y":-93.94868850708008}},"inputs":[{"id":"SID_3345","name":"Name","node":null,"type":"string","value":"val","canEditName":false,"peer":null},{"id":"SID_3346","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peer":null}],"outputs":[{"id":"SID_3347","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peers":[]}],"prev":{"id":"SID_3349","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_3348","name":"Out","node":null,"peer":null}]},{"id":"NID_1065","name":"For","functional":false,"meta":{"pos":{"x":559.7780151367188,"y":11.575241088867188}},"inputs":[{"id":"SID_3440","name":"From","node":null,"type":"number","value":"0","canEditName":false,"peer":null},{"id":"SID_3441","name":"To","node":null,"type":"number","value":99,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_3442","name":"Index","node":null,"type":"number","value":98,"canEditName":false,"peers":[]}],"prev":{"id":"SID_3445","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_3443","name":"Out","node":null,"peer":null},{"id":"SID_3444","name":"Do","node":null,"peer":null}]},{"id":"NID_1104","name":"Setvar","functional":false,"meta":{"pos":{"x":1148.974609375,"y":164.41152954101562}},"inputs":[{"id":"SID_3571","name":"Name","node":null,"type":"string","value":"val","canEditName":false,"peer":null},{"id":"SID_3572","name":"Val","node":null,"type":"number","value":4851,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_3573","name":"Val","node":null,"type":"any","value":4851,"canEditName":false,"peers":[]}],"prev":{"id":"SID_3575","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_3574","name":"Out","node":null,"peer":null}]},{"id":"NID_1146","name":"FAdd","functional":true,"meta":{"pos":{"x":838.7145385742188,"y":253.17864990234375}},"inputs":[{"id":"SID_3708","name":"0","node":null,"type":"any","value":4753,"canEditName":false,"peer":null},{"id":"SID_3709","name":"1","node":null,"type":"number","value":98,"canEditName":false,"peer":null}],
      "outputs":[{"id":"SID_3710","name":"Val","node":null,"type":"number","value":4851,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_1169","name":"FGetvar","functional":true,"meta":{"pos":{"x":504.96453857421875,"y":284.86285400390625}},"inputs":[{"id":"SID_3777","name":"Name","node":null,"type":"string","value":"val","canEditName":false,"peer":null}],"outputs":[{"id":"SID_3778","name":"Val","node":null,"type":"any","value":4851,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]}],"connections":[{"type":"io","sourceNode":"NID_815","sourceSocket":"SID_2636","targetNode":"NID_1065","targetSocket":"SID_3441"},{"type":"pn","sourceNode":"NID_815","sourceSocket":"SID_2637","targetNode":"NID_1034","targetSocket":"SID_3349"},{"type":"pn","sourceNode":"NID_1065","sourceSocket":"SID_3443","targetNode":"NID_816","targetSocket":"SID_2640"},{"type":"io","sourceNode":"NID_1169","sourceSocket":"SID_3778","targetNode":"NID_816","targetSocket":"SID_2638"},{"type":"pn","sourceNode":"NID_1034","sourceSocket":"SID_3348","targetNode":"NID_1065","targetSocket":"SID_3445"},{"type":"io","sourceNode":"NID_1065","sourceSocket":"SID_3442","targetNode":"NID_1146","targetSocket":"SID_3709"},{"type":"pn","sourceNode":"NID_1065","sourceSocket":"SID_3444","targetNode":"NID_1104","targetSocket":"SID_3575"},{"type":"io","sourceNode":"NID_1146","sourceSocket":"SID_3710","targetNode":"NID_1104","targetSocket":"SID_3572"},{"type":"io","sourceNode":"NID_1169","sourceSocket":"SID_3778","targetNode":"NID_1146","targetSocket":"SID_3708"}]},"inputs":[{"id":"SID_2631","name":"Val","node":null,"type":"number","value":99,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_2632","name":"Val","node":null,"type":"any","value":4851,"canEditName":false,"peers":[]}],"prev":{"id":"SID_2634","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_2633","name":"Out","node":null,"peer":null}]},{"id":"NID_853","name":"Console","functional":false,"meta":{"pos":{"x":1146.1441650390625,"y":207.66282653808594}},"inputs":[{"id":"SID_2757","name":"Val","node":null,"type":"any","value":4851,"canEditName":false,"peer":null}],"outputs":[],"prev":{"id":"SID_2759","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_2758","name":"Out","node":null,"peer":null}]},{"id":"NID_884","name":"Program","functional":false,"meta":{"pos":{"x":1036.6151123046875,"y":-18.4528751373291}},"program":{"id":"NID_884","version":1,"lastNodeIndex":1234,"lastSocketIndex":3987,"enter":"NID_885","exit":"NID_886","nodes":[{"id":"NID_885","name":"Enter","functional":false,"meta":{"pos":{"x":57.470489501953125,"y":100.23866271972656}},"inputs":[{"id":"SID_2861","name":"Val","node":null,"type":"any","value":4851,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_2862","name":"Val","node":null,"type":"any","value":4851,"canEditName":false,"peers":[]}],"prev":null,"nexts":[{"id":"SID_2863","name":"Begin","node":null,"peer":null}]},{"id":"NID_886","name":"Exit","functional":false,"meta":{"pos":{"x":726.2847900390625,"y":101.50151062011719}},"inputs":[{"id":"SID_2864","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peer":null}],"outputs":[{"id":"SID_2865","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peers":[]}],"prev":{"id":"SID_2866","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_954","name":"Program","functional":false,"meta":{"pos":{"x":380.4736022949219,"y":100.56184387207031}},"program":{"id":"NID_954","version":1,"lastNodeIndex":1234,"lastSocketIndex":3987,"enter":"NID_955","exit":"NID_956","nodes":[{"id":"NID_955","name":"Enter","functional":false,"meta":null,"inputs":[{"id":"SID_3087","name":"Val","node":null,"type":"any","value":4851,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_3088","name":"Val","node":null,"type":"any","value":4851,"canEditName":false,"peers":[]}],"prev":null,"nexts":[{"id":"SID_3089","name":"Begin","node":null,"peer":null}]},{"id":"NID_956","name":"Exit","functional":false,"meta":null,"inputs":[{"id":"SID_3090","name":"Val","node":null,"type":"any","value":0,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_3091","name":"Val","node":null,"type":"any","value":0,"canEditName":false,"peers":[]}],"prev":{"id":"SID_3092","name":"End","node":null,"peers":[]},"nexts":[]}],"connections":[]},"inputs":[{"id":"SID_3083","name":"Val","node":null,"type":"any","value":4851,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_3084","name":"Val","node":null,"type":"any","value":0,"canEditName":false,"peers":[]}],"prev":{"id":"SID_3086","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_3085","name":"Out","node":null,"peer":null}]}],"connections":[{"type":"io","sourceNode":"NID_885","sourceSocket":"SID_2862","targetNode":"NID_954","targetSocket":"SID_3083"},{"type":"pn","sourceNode":"NID_885","sourceSocket":"SID_2863","targetNode":"NID_954","targetSocket":"SID_3086"},{"type":"pn","sourceNode":"NID_954","sourceSocket":"SID_3085","targetNode":"NID_886","targetSocket":"SID_2866"}]},"inputs":[{"id":"SID_2857","name":"Val","node":null,"type":"any","value":4851,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_2858","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peers":[]}],"prev":{"id":"SID_2860","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_2859","name":"Out","node":null,"peer":null}]}],"connections":[{"type":"pn","sourceNode":"NID_777","sourceSocket":"SID_2514","targetNode":"NID_785","targetSocket":"SID_2541"},{"type":"pn","sourceNode":"NID_884","sourceSocket":"SID_2859","targetNode":"NID_778","targetSocket":"SID_2517"},{"type":"io","sourceNode":"NID_785","sourceSocket":"SID_2538","targetNode":"NID_814","targetSocket":"SID_2631"},{"type":"pn","sourceNode":"NID_785","sourceSocket":"SID_2539","targetNode":"NID_884","targetSocket":"SID_2860"},{"type":"pn","sourceNode":"NID_785","sourceSocket":"SID_2540","targetNode":"NID_814","targetSocket":"SID_2634"},{"type":"io","sourceNode":"NID_814","sourceSocket":"SID_2632","targetNode":"NID_853","targetSocket":"SID_2757"},{"type":"io","sourceNode":"NID_814","sourceSocket":"SID_2632","targetNode":"NID_884","targetSocket":"SID_2857"},{"type":"pn","sourceNode":"NID_814","sourceSocket":"SID_2633","targetNode":"NID_853","targetSocket":"SID_2759"}]}`));
      canvas.program = prg;
    }

    function exampleCanvas3() {

      let prg = cnui.Env.import(JSON.parse(`{"id":"NID_1234","version":1,"lastNodeIndex":1692,"lastSocketIndex":5466,"enter":"NID_1235","exit":"NID_1236","nodes":[{"id":"NID_1235","name":"Enter","functional":false,"meta":{"pos":{"x":100,"y":100}},"inputs":[{"id":"SID_3991","name":"Val","node":null,"type":"any","value":0,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_3992","name":"Val","node":null,"type":"any","value":0,"canEditName":false,"peers":[]}],"prev":null,"nexts":[{"id":"SID_3993","name":"Begin","node":null,"peer":null}]},{"id":"NID_1236","name":"Exit","functional":false,"meta":{"pos":{"x":695.5383911132812,"y":-98.50469970703125}},"inputs":[{"id":"SID_3994","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peer":null}],"outputs":[{"id":"SID_3995","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peers":[]}],"prev":{"id":"SID_3996","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_1243","name":"For","functional":false,"meta":{"pos":{"x":386.08160400390625,"y":99.43911743164062}},"inputs":[{"id":"SID_4015","name":"From","node":null,"type":"number","value":"0","canEditName":false,"peer":null},{"id":"SID_4016","name":"To","node":null,"type":"number","value":"20","canEditName":false,"peer":null}],"outputs":[{"id":"SID_4017","name":"Index","node":null,"type":"number","value":19,"canEditName":false,"peers":[]}],"prev":{"id":"SID_4020","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_4018","name":"Out","node":null,"peer":null},{"id":"SID_4019","name":"Do","node":null,"peer":null}]},{"id":"NID_1272","name":"Program","functional":false,"meta":{"pos":{"x":737.5062866210938,"y":129.98941040039062}},"program":{"id":"NID_1272","version":1,"lastNodeIndex":1692,"lastSocketIndex":5466,"enter":"NID_1273","exit":"NID_1274","nodes":[{"id":"NID_1273","name":"Enter","functional":false,"meta":{"pos":{"x":100,"y":100}},"inputs":[{"id":"SID_4114","name":"Val","node":null,"type":"number","value":19,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_4115","name":"Val","node":null,"type":"number","value":19,"canEditName":false,"peers":[]}],"prev":null,"nexts":[{"id":"SID_4116","name":"Begin","node":null,"peer":null}]},{"id":"NID_1274","name":"Exit","functional":false,"meta":{"pos":{"x":1104.4833984375,"y":-149.1264190673828}},"inputs":[{"id":"SID_4117","name":"Val","node":null,"type":"any","value":6402373705728000,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_4118","name":"Val","node":null,"type":"any","value":6402373705728000,"canEditName":false,"peers":[]}],"prev":{"id":"SID_4119","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_1352","name":"Setvar","functional":false,"meta":{"pos":{"x":418.78607177734375,"y":-99.83367156982422}},"inputs":[{"id":"SID_4372","name":"Name","node":null,"type":"string","value":"val","canEditName":false,"peer":null},{"id":"SID_4373","name":"Val","node":null,"type":"any","value":"1","canEditName":false,"peer":null}],"outputs":[{"id":"SID_4374","name":"Val","node":null,"type":"any","value":"1","canEditName":false,"peers":[]}],"prev":{"id":"SID_4376","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_4375","name":"Out","node":null,"peer":null}]},{"id":"NID_1383","name":"For","functional":false,"meta":{"pos":{"x":731.0040893554688,"y":10.407867431640625}},"inputs":[{"id":"SID_4467","name":"From","node":null,"type":"number","value":"1","canEditName":false,"peer":null},{"id":"SID_4468","name":"To","node":null,"type":"number","value":19,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_4469","name":"Index","node":null,"type":"number","value":18,"canEditName":false,"peers":[]}],"prev":{"id":"SID_4472","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_4470","name":"Out","node":null,"peer":null},{"id":"SID_4471","name":"Do","node":null,"peer":null}]},{"id":"NID_1417","name":"FGetvar","functional":true,"meta":{"pos":{"x":750.6847534179688,"y":-160.42245483398438}},"inputs":[{"id":"SID_4578","name":"Name","node":null,"type":"string","value":"val","canEditName":false,"peer":null}],"outputs":[{"id":"SID_4579","name":"Val","node":null,"type":"any","value":6402373705728000,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_1457","name":"Setvar","functional":false,"meta":{"pos":{"x":1196.84130859375,"y":156.81878662109375}},"inputs":[{"id":"SID_4711","name":"Name","node":null,"type":"string","value":"val","canEditName":false,"peer":null},{"id":"SID_4712","name":"Val","node":null,"type":"number","value":6402373705728000,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_4713","name":"Val","node":null,"type":"any","value":6402373705728000,"canEditName":false,"peers":[]}],"prev":{"id":"SID_4715","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_4714","name":"Out","node":null,"peer":null}]},{"id":"NID_1502","name":"FMul","functional":true,"meta":{"pos":{"x":933.1858520507812,"y":288.2247619628906}},"inputs":[{"id":"SID_4857","name":"0","node":null,"type":"number","value":18,"canEditName":false,"peer":null},{"id":"SID_4858","name":"1","node":null,"type":"any","value":355687428096000,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_4859","name":"Val","node":null,"type":"number","value":6402373705728000,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_1522","name":"FGetvar","functional":true,"meta":{"pos":{"x":593.7399291992188,"y":348.3705139160156}},"inputs":[{"id":"SID_4917","name":"Name","node":null,"type":"string","value":"val","canEditName":false,"peer":null}],"outputs":[{"id":"SID_4918","name":"Val","node":null,"type":"any","value":355687428096000,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]}],"connections":[{"type":"io","sourceNode":"NID_1273","sourceSocket":"SID_4115","targetNode":"NID_1383","targetSocket":"SID_4468"},{"type":"pn","sourceNode":"NID_1273","sourceSocket":"SID_4116","targetNode":"NID_1352","targetSocket":"SID_4376"},{"type":"pn","sourceNode":"NID_1383","sourceSocket":"SID_4470","targetNode":"NID_1274","targetSocket":"SID_4119"},{"type":"io","sourceNode":"NID_1417","sourceSocket":"SID_4579","targetNode":"NID_1274","targetSocket":"SID_4117"},{"type":"pn","sourceNode":"NID_1352","sourceSocket":"SID_4375","targetNode":"NID_1383","targetSocket":"SID_4472"},{"type":"io","sourceNode":"NID_1383","sourceSocket":"SID_4469","targetNode":"NID_1502","targetSocket":"SID_4857"},{"type":"pn","sourceNode":"NID_1383","sourceSocket":"SID_4471","targetNode":"NID_1457","targetSocket":"SID_4715"},{"type":"io","sourceNode":"NID_1502","sourceSocket":"SID_4859","targetNode":"NID_1457","targetSocket":"SID_4712"},{"type":"io","sourceNode":"NID_1522","sourceSocket":"SID_4918","targetNode":"NID_1502","targetSocket":"SID_4858"}]},"inputs":[{"id":"SID_4110","name":"Val","node":null,"type":"number","value":19,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_4111","name":"Val","node":null,"type":"any","value":6402373705728000,"canEditName":false,"peers":[]}],"prev":{"id":"SID_4113","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_4112","name":"Out","node":null,"peer":null}]},{"id":"NID_1311","name":"Console","functional":false,"meta":{"pos":{"x":1051.0467529296875,"y":130.1541748046875}},"inputs":[{"id":"SID_4236","name":"Val","node":null,"type":"any","value":6402373705728000,"canEditName":false,"peer":null}],"outputs":[],"prev":{"id":"SID_4238","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_4237","name":"Out","node":null,"peer":null}]}],"connections":[{"type":"pn","sourceNode":"NID_1235","sourceSocket":"SID_3993","targetNode":"NID_1243","targetSocket":"SID_4020"},{"type":"pn","sourceNode":"NID_1243","sourceSocket":"SID_4018","targetNode":"NID_1236","targetSocket":"SID_3996"},{"type":"io","sourceNode":"NID_1243","sourceSocket":"SID_4017","targetNode":"NID_1272","targetSocket":"SID_4110"},{"type":"pn","sourceNode":"NID_1243","sourceSocket":"SID_4019","targetNode":"NID_1272","targetSocket":"SID_4113"},{"type":"io","sourceNode":"NID_1272","sourceSocket":"SID_4111","targetNode":"NID_1311","targetSocket":"SID_4236"},{"type":"pn","sourceNode":"NID_1272","sourceSocket":"SID_4112","targetNode":"NID_1311","targetSocket":"SID_4238"}]}`));
      canvas.program = prg;
    }

    function exampleCanvas4() {

      let prg = cnui.Env.import(JSON.parse(`{"id":"NID_356","version":1,"lastNodeIndex":849,"lastSocketIndex":2793,"enter":"NID_357","exit":"NID_358","nodes":[{"id":"NID_357","name":"Enter","functional":false,"meta":{"pos":{"x":-349.9272918701172,"y":11.183731079101562}},"inputs":[{"id":"SID_1194","name":"Val","node":null,"type":"any","value":0,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_1195","name":"Val","node":null,"type":"any","value":0,"canEditName":false,"peers":[]}],"prev":null,"nexts":[{"id":"SID_1196","name":"Begin","node":null,"peer":null}]},{"id":"NID_358","name":"Exit","functional":false,"meta":{"pos":{"x":600.1617431640625,"y":12.694499969482422}},"inputs":[{"id":"SID_1197","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peer":null}],"outputs":[{"id":"SID_1198","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peers":[]}],"prev":{"id":"SID_1199","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_363","name":"Console","functional":false,"meta":{"pos":{"x":-38.12510681152344,"y":11.672353744506836}},"inputs":[{"id":"SID_1213","name":"Val","node":null,"type":"any","value":"start...","canEditName":false,"peer":null}],"outputs":[],"prev":{"id":"SID_1215","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1214","name":"Out","node":null,"peer":null}]},{"id":"NID_400","name":"For","functional":false,"meta":{"pos":{"x":-9.358200073242188,"y":287.1058807373047}},"inputs":[{"id":"SID_1331","name":"From","node":null,"type":"number","value":"0","canEditName":false,"peer":null},{"id":"SID_1332","name":"To","node":null,"type":"number","value":"10","canEditName":false,"peer":null}],"outputs":[{"id":"SID_1333","name":"Index","node":null,"type":"number","value":9,"canEditName":false,"peers":[]}],"prev":{"id":"SID_1336","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1334","name":"Out","node":null,"peer":null},{"id":"SID_1335","name":"Do","node":null,"peer":null}]},{"id":"NID_433","name":"Console","functional":false,"meta":{"pos":{"x":1494.84326171875,"y":281.87890625}},"inputs":[{"id":"SID_1439","name":"Val","node":null,"type":"string","value":"Iteration n.9 (odd)","canEditName":false,"peer":null}],"outputs":[],"prev":{"id":"SID_1441","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1440","name":"Out","node":null,"peer":null}]},{"id":"NID_479","name":"FConcat","functional":true,"meta":{"pos":{"x":1205.6260986328125,"y":446.2205505371094}},"inputs":[{"id":"SID_1594","name":"0","node":null,"type":"string","value":"Iteration ","canEditName":false,"peer":null},{"id":"SID_2223","name":"1","node":null,"type":"string","value":"n.","canEditName":false,"peer":null},{"id":"SID_2224","name":"2","node":null,"type":"string","value":"9","canEditName":false,"peer":null},{"id":"SID_2790","name":"3","node":null,"type":"string","value":" (","canEditName":false,"peer":null},{"id":"SID_2791","name":"4","node":null,"type":"any","value":"odd","canEditName":false,"peer":null},{"id":"SID_2792","name":"5","node":null,"type":"string","value":")","canEditName":false,"peer":null}],"outputs":[{"id":"SID_1596","name":"Val","node":null,"type":"string","value":"Iteration n.9 (odd)","canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_508","name":"FIf","functional":true,"meta":{"pos":{"x":879.0234375,"y":650.052001953125}},"inputs":[{"id":"SID_1690","name":"Condition","node":null,"type":"boolean","value":false,"canEditName":false,"peer":null},{"id":"SID_1691","name":"True","node":null,"type":"any","value":"even","canEditName":false,"peer":null},{"id":"SID_1692","name":"False","node":null,"type":"any","value":"odd","canEditName":false,"peer":null}],"outputs":[{"id":"SID_1693","name":"Val","node":null,"type":"any","value":"odd","canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_556","name":"FEqual","functional":true,"meta":{"pos":{"x":556.0952758789062,"y":680.1498413085938}},"inputs":[{"id":"SID_1845","name":"Val1","node":null,"type":"number","value":1,"canEditName":false,"peer":null},{"id":"SID_1846","name":"Val2","node":null,"type":"number","value":0,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_1847","name":"Val","node":null,"type":"boolean","value":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_588","name":"FMod","functional":true,"meta":{"pos":{"x":244.97076416015625,"y":614.55224609375}},"inputs":[{"id":"SID_1950","name":"Val1","node":null,"type":"number","value":9,"canEditName":false,"peer":null},{"id":"SID_1951","name":"Val2","node":null,"type":"number","value":"2","canEditName":false,"peer":null}],"outputs":[{"id":"SID_1952","name":"Val","node":null,"type":"number","value":1,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_620","name":"FNConst","functional":true,"meta":{"pos":{"x":245.09242248535156,"y":804.2457275390625}},"inputs":[{"id":"SID_2055","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peer":null}],"outputs":[{"id":"SID_2056","name":"Val","node":null,"type":"number","value":0,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_643","name":"Console","functional":false,"meta":{"pos":{"x":282.8063049316406,"y":13.253865242004395}},"inputs":[{"id":"SID_2123","name":"Val","node":null,"type":"any","value":"end","canEditName":false,"peer":null}],"outputs":[],"prev":{"id":"SID_2125","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_2124","name":"Out","node":null,"peer":null}]},{"id":"NID_828","name":"FSConst","functional":true,"meta":{"pos":{"x":882.6427001953125,"y":454.4542236328125}},"inputs":[{"id":"SID_2730","name":"Val","node":null,"type":"number","value":9,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_2731","name":"Val","node":null,"type":"string","value":"9","canEditName":false,"peers":[]}],"prev":null,"nexts":[]}],"connections":[{"type":"pn","sourceNode":"NID_357","sourceSocket":"SID_1196","targetNode":"NID_363","targetSocket":"SID_1215"},{"type":"pn","sourceNode":"NID_643","sourceSocket":"SID_2124","targetNode":"NID_358","targetSocket":"SID_1199"},{"type":"pn","sourceNode":"NID_363","sourceSocket":"SID_1214","targetNode":"NID_400","targetSocket":"SID_1336"},{"type":"io","sourceNode":"NID_400","sourceSocket":"SID_1333","targetNode":"NID_588","targetSocket":"SID_1950"},{"type":"io","sourceNode":"NID_400","sourceSocket":"SID_1333","targetNode":"NID_828","targetSocket":"SID_2730"},{"type":"pn","sourceNode":"NID_400","sourceSocket":"SID_1334","targetNode":"NID_643","targetSocket":"SID_2125"},{"type":"pn","sourceNode":"NID_400","sourceSocket":"SID_1335","targetNode":"NID_433","targetSocket":"SID_1441"},{"type":"io","sourceNode":"NID_479","sourceSocket":"SID_1596","targetNode":"NID_433","targetSocket":"SID_1439"},{"type":"io","sourceNode":"NID_828","sourceSocket":"SID_2731","targetNode":"NID_479","targetSocket":"SID_2224"},{"type":"io","sourceNode":"NID_508","sourceSocket":"SID_1693","targetNode":"NID_479","targetSocket":"SID_2791"},{"type":"io","sourceNode":"NID_556","sourceSocket":"SID_1847","targetNode":"NID_508","targetSocket":"SID_1690"},{"type":"io","sourceNode":"NID_588","sourceSocket":"SID_1952","targetNode":"NID_556","targetSocket":"SID_1845"},{"type":"io","sourceNode":"NID_620","sourceSocket":"SID_2056","targetNode":"NID_556","targetSocket":"SID_1846"}]}`));
      canvas.program = prg;
    }

    function saveProgram() {
      localStorage.setItem("lastProgram", JSON.stringify(cnui.Env.export(canvas.program)));
    }

    function loadProgram() {
      canvas.program = cnui.Env.import(JSON.parse(localStorage.getItem("lastProgram")));
    }

    function newCanvas() {
      let prg = new cnui.Program();
      prg.exit.meta = {
        pos: {
          x: 700,
          y: 100
        }
      }
      canvas.program = prg;
    };

    newCanvas();

  </script>
</body>

</html>
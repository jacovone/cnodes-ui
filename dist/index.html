<!DOCTYPE html>
<html style="height: 100%; margin: 0; position:relative">

<head>
  <meta charset="utf-8" />
  <title>CANVAS-UI test board</title>
</head>

<body style="margin: 0; overflow: hidden; background-color: gray;position: absolute; top:0;left:0;right:0;bottom:0">
  <button onclick="canvas.run()">New</button>
  <button onclick="addWhile();">While</button>
  <button onclick="addFor();">For</button>
  <div id="cnodes"
    style="margin: 10px; border: 10px solid lightgray; background-color: white; position: absolute; top:20px; left:0; right:0; bottom:0">
  </div>

  <script src="main.js"></script>
  <script>

    let canvas = cnui.canvas('cnodes');

    function addWhile() {
      let whileNod = cnui.Env.getInstance('While');
      let comp = new cnui.CnodeComponent(whileNod, canvas);
      comp.pos = new cnui.Position(100, 100);
    }

    function addFor() {
      let forNod = cnui.Env.getInstance('For');
      let comp = new cnui.CnodeComponent(forNod, canvas);
      comp.pos = new cnui.Position(100, 100);
    }

    // let ifNod = cnui.Env.getInstance('if');
    // let forNod = cnui.Env.getInstance('for');
    // let faddNod = cnui.Env.getInstance('fadd');

    // let comp1 = new cnui.CnodeComponent(consoleNod, canvas);
    // comp1.moveable = true;
    // comp1.pos = new cnui.Position(100, 100);

    // let comp2 = new cnui.CnodeComponent(ifNod, canvas);
    // comp2.moveable = true;
    // comp2.pos = new cnui.Position(400, 100);

    // let comp3 = new cnui.CnodeComponent(forNod, canvas);
    // comp3.moveable = true;
    // comp3.pos = new cnui.Position(700, 50);

    // let comp4 = new cnui.CnodeComponent(faddNod, canvas);
    // comp4.moveable = true;
    // comp4.pos = new cnui.Position(900, 50);

    let prg = cnui.Env.import(JSON.parse(`{"id":"NID_6","version":1,"lastNodeIndex":6,"lastSocketIndex":19,"enter":"NID_4","exit":"NID_5","nodes":[{"id":"NID_4","name":"Enter","functional":false,"inputs":[{"id":"SID_13","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":0,"peer":null}],"outputs":[{"id":"SID_14","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":0,"peers":[]}],"prev":null,"nexts":[{"id":"SID_15","name":"Begin","node":null,"peer":null}]},{"id":"NID_5","name":"Exit","functional":false,"inputs":[{"id":"SID_16","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":0,"peer":null}],"outputs":[{"id":"SID_17","name":"Val","node":null,"type":{"type":"any","isArray":false},"value":0,"peers":[]}],"prev":{"id":"SID_18","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_0","name":"FAdd","functional":true,"inputs":[{"id":"SID_0","name":"Val1","node":null,"type":{"type":"number","isArray":false},"value":12,"peer":null},{"id":"SID_1","name":"Val2","node":null,"type":{"type":"number","isArray":false},"value":2,"peer":null}],"outputs":[{"id":"SID_2","name":"Val","node":null,"type":{"type":"number","isArray":false},"value":14,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_1","name":"FAdd","functional":true,"inputs":[{"id":"SID_3","name":"Val1","node":null,"type":{"type":"number","isArray":false},"value":10,"peer":null},{"id":"SID_4","name":"Val2","node":null,"type":{"type":"number","isArray":false},"value":14,"peer":null}],"outputs":[{"id":"SID_5","name":"Val","node":null,"type":{"type":"number","isArray":false},"value":24,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2","name":"Console","functional":false,"inputs":[{"id":"SID_6","name":"Val","node":null,"type":{"type":"number","isArray":false},"value":24,"peer":null}],"outputs":[],"prev":{"id":"SID_8","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_7","name":"Out","node":null,"peer":null}]}],"connections":[{"type":"pn","sourceNode":"NID_4","sourceSocket":"SID_15","targetNode":"NID_2","targetSocket":"SID_8"},{"type":"pn","sourceNode":"NID_2","sourceSocket":"SID_7","targetNode":"NID_5","targetSocket":"SID_18"},{"type":"io","sourceNode":"NID_0","sourceSocket":"SID_2","targetNode":"NID_1","targetSocket":"SID_4"},{"type":"io","sourceNode":"NID_1","sourceSocket":"SID_5","targetNode":"NID_2","targetSocket":"SID_6"}]}`));
    canvas.program = prg;

  </script>
</body>

</html>
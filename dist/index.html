<!DOCTYPE html>
<html style="height: 100%; margin: 0; position:relative">

<head>
  <meta charset="utf-8" />

  <title>cnodes-ui test board</title>
  <style>
    .action {
      border: none;
      border-radius: 5px;
      padding: 4px;
      margin-left: 10px;
      margin-top: 3px;
      font-weight: bold;
      font-size: 12px;
      font: sans-serif;
      background-color: rgb(247, 247, 247)
    }
  </style>
</head>

<body
  style="margin: 0; overflow: hidden; background-color: lightgray;position: absolute; top:0;left:0;right:0;bottom:0">
  <button class="action" onclick="newCanvas()">New</button>
  <button class="action" onclick="runProgram()">Run</button>
  <button class="action" onclick="canvas.dump()">Dump</button>
  <button class="action" onclick="changeToDark()">Dark Theme</button>
  <button class="action" onclick="changeToLight()">Light Theme</button>
  <button class="action" onclick="loadProgram()">Load</button>
  <button class="action" onclick="saveProgram()">Save</button>
  <button class="action" onclick="exampleCanvas()">Example1</button>
  <button class="action" onclick="exampleCanvas2()">Example2</button>
  <button class="action" onclick="exampleClassDiagram()">Class Diagram</button>
  <div id="cnodes"
    style="background-color: black;margin: 10px; border: 10px solid gray; position: absolute; top:20px; left:0; right:0; bottom:0">
  </div>

  <script type="text/javascript" src="cnodesui.bundle.js"></script>
  <script>
    let canvas;

    function runProgram() {
      (async () => {
        await canvas.run()
        console.log(canvas.program.output("Val").value);
      })();
    }

    function exampleCanvas() {
      let prg = cnui.Env.import(JSON.parse(`{"id":"NID_956","version":1,"lastNodeIndex":3379,"lastSocketIndex":16187,"enter":"NID_1235","exit":"NID_1236","nodes":[{"id":"NID_1235","name":"Enter","title":"Enter","functional":false,"meta":{"pos":{"x":29.953140258789062,"y":38.823509216308594},"titlePos":{"x":31.224075317382812,"y":-25.0592041015625},"comment":{"text":"The starting point of the program<br/><img width='100px' src='https://unpkg.com/@marco.jacovone/cnodes/docs/images/cnodes-logo.png'>","pos":{"x":15.518356323242188,"y":137.27415466308594}}},"inputs":[{"id":"SID_3991","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"canEditType":false,"peer":null}],"outputs":[{"id":"SID_3992","name":"Val","node":null,"type":"any","value":0,"cached":true,"canEditName":false,"canEditType":false,"peers":[]}],"prev":null,"nexts":[{"id":"SID_3993","name":"Begin","node":null,"peer":null}]},{"id":"NID_1236","name":"Exit","title":"Exit","functional":false,"meta":{"pos":{"x":745.4008178710938,"y":-104.55543518066406},"titlePos":{"x":30.4542236328125,"y":-26.0443115234375},"comment":{"text":"The exit point of the program<br/><img width='100px' src='https://unpkg.com/@marco.jacovone/cnodes/docs/images/cnodes-logo.png'>","pos":{"x":24.380218505859375,"y":108.03602886199951}}},"inputs":[{"id":"SID_3994","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"canEditType":false,"peer":null}],"outputs":[{"id":"SID_3995","name":"Val","node":null,"type":"any","value":"0","cached":true,"canEditName":false,"canEditType":false,"peers":[]}],"prev":{"id":"SID_3996","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_1243","name":"For","title":"For","functional":false,"meta":{"pos":{"x":335.2648620605469,"y":88.77442169189453},"titlePos":{"x":28.594635009765625,"y":-24.938552856445312},"comment":{"text":"A for loop that compute the factorial for first 20 integers","pos":{"x":0,"y":202.5}}},"inputs":[{"id":"SID_4015","name":"From","node":null,"type":"number","value":0,"canEditName":false,"canEditType":false,"peer":null},{"id":"SID_4016","name":"To","node":null,"type":"number","value":20,"canEditName":false,"canEditType":false,"peer":null}],"outputs":[{"id":"SID_4017","name":"Index","node":null,"type":"number","value":19,"cached":true,"canEditName":false,"canEditType":false,"peers":[]}],"prev":{"id":"SID_4020","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_4018","name":"Out","node":null,"peer":null},{"id":"SID_4019","name":"Do","node":null,"peer":null}]},{"id":"NID_1272","name":"Program","title":"Factorial(n)<br/><span style='font-size: 12px; color: gray'>Double click to open</span>","functional":false,"meta":{"pos":{"x":723.9107055664062,"y":178.56918334960938},"titlePos":{"x":25.66986083984375,"y":-49.15058135986328},"comment":{"text":"Call a subroutine for the factorial computation","pos":{"x":0.16925048828125,"y":142.5}}},"program":{"id":"NID_1272","version":1,"lastNodeIndex":3379,"lastSocketIndex":16187,"enter":"NID_1273","exit":"NID_1274","nodes":[{"id":"NID_1273","name":"Enter","title":"Enter","functional":false,"meta":{"pos":{"x":143.55006408691406,"y":160.13758087158203},"titlePos":{"x":29.688552856445312,"y":-25.834632873535156},"comment":{"text":"Entry point<br/><img width='200px' src='https://unpkg.com/@marco.jacovone/cnodes/docs/images/cnodes-logo.png'>","pos":{"x":0.2083740234375,"y":144.54840087890625}}},"inputs":[{"id":"SID_4114","name":"Val","node":null,"type":"number","value":19,"canEditName":false,"canEditType":false,"peer":null}],"outputs":[{"id":"SID_4115","name":"Val","node":null,"type":"number","value":19,"cached":true,"canEditName":false,"canEditType":false,"peers":[]}],"prev":null,"nexts":[{"id":"SID_4116","name":"Begin","node":null,"peer":null}]},{"id":"NID_1274","name":"Exit","title":"Exit","functional":false,"meta":{"pos":{"x":1180.194091796875,"y":-173.83786010742188},"titlePos":{"x":31.35693359375,"y":-25.152313232421875},"comment":{"text":"Return the computed factorial to caller<img width='200px' src='https://unpkg.com/@marco.jacovone/cnodes/docs/images/cnodes-logo.png'>","pos":{"x":-0.1365966796875,"y":112.5}}},"inputs":[{"id":"SID_4117","name":"Val","node":null,"type":"any","value":"6402373705728000","canEditName":false,"canEditType":false,"peer":null}],"outputs":[{"id":"SID_4118","name":"Val","node":null,"type":"any","value":6402373705728000,"cached":true,"canEditName":false,"canEditType":false,"peers":[]}],"prev":{"id":"SID_4119","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_1352","name":"Setvar","title":"Set Var","functional":false,"meta":{"pos":{"x":432.6397705078125,"y":-74.65430068969727},"titlePos":{"x":30.354583740234375,"y":-24.915542602539062},"comment":{"text":"Initialize the value for factorial to 1","pos":{"x":0,"y":172.5}}},"inputs":[{"id":"SID_4372","name":"Name","node":null,"type":"string","value":"val","canEditName":false,"canEditType":false,"peer":null},{"id":"SID_4373","name":"Val","node":null,"type":"any","value":"1","canEditName":false,"canEditType":false,"peer":null}],"outputs":[{"id":"SID_4374","name":"Val","node":null,"type":"any","value":"1","cached":true,"canEditName":false,"canEditType":false,"peers":[]}],"prev":{"id":"SID_4376","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_4375","name":"Out","node":null,"peer":null}]},{"id":"NID_1383","name":"For","title":"For","functional":false,"meta":{"pos":{"x":752.3497314453125,"y":-17.295085191726685},"titlePos":{"x":33.36376953125,"y":-21.758541226387024},"comment":{"text":"Cycle from 1 to the requested soubroutine value for the factorial","pos":{"x":-0.8123779296875,"y":203.10928344726562}}},"inputs":[{"id":"SID_4467","name":"From","node":null,"type":"number","value":1,"canEditName":false,"canEditType":false,"peer":null},{"id":"SID_4468","name":"To","node":null,"type":"number","value":19,"canEditName":false,"canEditType":false,"peer":null}],"outputs":[{"id":"SID_4469","name":"Index","node":null,"type":"number","value":18,"cached":true,"canEditName":false,"canEditType":false,"peers":[]}],"prev":{"id":"SID_4472","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_4470","name":"Out","node":null,"peer":null},{"id":"SID_4471","name":"Do","node":null,"peer":null}]},{"id":"NID_1417","name":"FGetvar","title":"Get Var","functional":true,"meta":{"pos":{"x":740.7417602539062,"y":-153.344970703125},"titlePos":{"x":26.7470703125,"y":-24.096588134765625}},"inputs":[{"id":"SID_4578","name":"Name","node":null,"type":"string","value":"val","canEditName":false,"canEditType":false,"peer":null}],"outputs":[{"id":"SID_4579","name":"Val","node":null,"type":"any","value":6402373705728000,"cached":false,"canEditName":false,"canEditType":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_1457","name":"Setvar","title":"Set Var","functional":false,"meta":{"pos":{"x":1241.5594482421875,"y":126.28157043457031},"titlePos":{"x":31.64697265625,"y":-24.407180786132812},"comment":{"text":"Store the value to the vars","pos":{"x":0,"y":172.5}}},"inputs":[{"id":"SID_4711","name":"Name","node":null,"type":"string","value":"val","canEditName":false,"canEditType":false,"peer":null},{"id":"SID_4712","name":"Val","node":null,"type":"number","value":6402373705728000,"canEditName":false,"canEditType":false,"peer":null}],"outputs":[{"id":"SID_4713","name":"Val","node":null,"type":"any","value":6402373705728000,"cached":true,"canEditName":false,"canEditType":false,"peers":[]}],"prev":{"id":"SID_4715","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_4714","name":"Out","node":null,"peer":null}]},{"id":"NID_1502","name":"FMul","title":"Multiply","functional":true,"meta":{"pos":{"x":967.1542358398438,"y":229.5306854248047},"titlePos":{"x":32.0101318359375,"y":-22.965362548828125},"comment":{"text":"Multiply the current for index value for the last partial value","pos":{"x":0,"y":142.5}}},"inputs":[{"id":"SID_4857","name":"0","node":null,"type":"number","value":18,"canEditName":false,"canEditType":false,"peer":null},{"id":"SID_4858","name":"1","node":null,"type":"any","value":"355687428096000","canEditName":false,"canEditType":false,"peer":null}],"outputs":[{"id":"SID_4859","name":"Val","node":null,"type":"number","value":6402373705728000,"cached":false,"canEditName":false,"canEditType":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_1522","name":"FGetvar","title":"Get Var","functional":true,"meta":{"pos":{"x":719.1912841796875,"y":320.8400573730469},"titlePos":{"x":23.74603271484375,"y":-22.74188232421875},"comment":{"text":"Get the current factorial partial value from vars","pos":{"x":0,"y":112.5}}},"inputs":[{"id":"SID_4917","name":"Name","node":null,"type":"string","value":"val","canEditName":false,"canEditType":false,"peer":null}],"outputs":[{"id":"SID_4918","name":"Val","node":null,"type":"any","value":355687428096000,"cached":false,"canEditName":false,"canEditType":false,"peers":[]}],"prev":null,"nexts":[]}],"connections":[{"type":"io","sourceNode":"NID_1273","sourceSocket":"SID_4115","targetNode":"NID_1383","targetSocket":"SID_4468"},{"type":"pn","sourceNode":"NID_1273","sourceSocket":"SID_4116","targetNode":"NID_1352","targetSocket":"SID_4376"},{"type":"pn","sourceNode":"NID_1383","sourceSocket":"SID_4470","targetNode":"NID_1274","targetSocket":"SID_4119"},{"type":"io","sourceNode":"NID_1417","sourceSocket":"SID_4579","targetNode":"NID_1274","targetSocket":"SID_4117"},{"type":"pn","sourceNode":"NID_1352","sourceSocket":"SID_4375","targetNode":"NID_1383","targetSocket":"SID_4472"},{"type":"io","sourceNode":"NID_1383","sourceSocket":"SID_4469","targetNode":"NID_1502","targetSocket":"SID_4857"},{"type":"pn","sourceNode":"NID_1383","sourceSocket":"SID_4471","targetNode":"NID_1457","targetSocket":"SID_4715"},{"type":"io","sourceNode":"NID_1502","sourceSocket":"SID_4859","targetNode":"NID_1457","targetSocket":"SID_4712"},{"type":"io","sourceNode":"NID_1522","sourceSocket":"SID_4918","targetNode":"NID_1502","targetSocket":"SID_4858"}]},"inputs":[{"id":"SID_4110","name":"Val","node":null,"type":"number","value":19,"canEditName":false,"canEditType":false,"peer":null}],"outputs":[{"id":"SID_4111","name":"Val","node":null,"type":"any","value":6402373705728000,"cached":true,"canEditName":false,"canEditType":false,"peers":[]}],"prev":{"id":"SID_4113","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_4112","name":"Out","node":null,"peer":null}]},{"id":"NID_1311","name":"Console","title":"Console","functional":false,"meta":{"pos":{"x":1051.0467529296875,"y":130.1541748046875},"titlePos":{"x":31.27099609375,"y":-24.307029724121094},"comment":{"text":"Prints to the console the output value","pos":{"x":0,"y":112.5}}},"inputs":[{"id":"SID_4236","name":"Val","node":null,"type":"any","value":"6402373705728000","canEditName":false,"canEditType":false,"peer":null}],"outputs":[],"prev":{"id":"SID_4238","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_4237","name":"Out","node":null,"peer":null}]}],"connections":[{"type":"pn","sourceNode":"NID_1235","sourceSocket":"SID_3993","targetNode":"NID_1243","targetSocket":"SID_4020"},{"type":"pn","sourceNode":"NID_1243","sourceSocket":"SID_4018","targetNode":"NID_1236","targetSocket":"SID_3996"},{"type":"io","sourceNode":"NID_1243","sourceSocket":"SID_4017","targetNode":"NID_1272","targetSocket":"SID_4110"},{"type":"pn","sourceNode":"NID_1243","sourceSocket":"SID_4019","targetNode":"NID_1272","targetSocket":"SID_4113"},{"type":"io","sourceNode":"NID_1272","sourceSocket":"SID_4111","targetNode":"NID_1311","targetSocket":"SID_4236"},{"type":"pn","sourceNode":"NID_1272","sourceSocket":"SID_4112","targetNode":"NID_1311","targetSocket":"SID_4238"}]}`));
      canvas.program = prg;
    }

    function exampleCanvas2() {

      let prg = cnui.Env.import(JSON.parse(`{"id":"NID_1731","version":1,"lastNodeIndex":956,"lastSocketIndex":3484,"enter":"NID_357","exit":"NID_358","nodes":[{"id":"NID_357","name":"Enter","title":"Enter","functional":false,"meta":{"pos":{"x":-561.1479339599609,"y":204.77766036987305},"titlePos":{"x":26.77386474609375,"y":-21.937713742256165}},"inputs":[{"id":"SID_1194","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peer":null}],"outputs":[{"id":"SID_1195","name":"Val","node":null,"type":"any","value":0,"cached":true,"canEditName":false,"peers":[]}],"prev":null,"nexts":[{"id":"SID_1196","name":"Begin","node":null,"peer":null}]},{"id":"NID_358","name":"Exit","title":"Exit","functional":false,"meta":{"pos":{"x":588.8255615234375,"y":11.238018035888672},"titlePos":{"x":31.08172607421875,"y":-23.964963912963867}},"inputs":[{"id":"SID_1197","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peer":null}],"outputs":[{"id":"SID_1198","name":"Val","node":null,"type":"any","value":"0","cached":true,"canEditName":false,"peers":[]}],"prev":{"id":"SID_1199","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_363","name":"Console","title":"Console","functional":false,"meta":{"pos":{"x":-251.40899276733398,"y":201.71944427490234},"titlePos":{"x":29.377540588378906,"y":-21.639643669128418},"comment":{"text":"Output the start string","pos":{"x":0,"y":112.5}}},"inputs":[{"id":"SID_1213","name":"Val","node":null,"type":"any","value":"start...","canEditName":false,"peer":null}],"outputs":[],"prev":{"id":"SID_1215","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1214","name":"Out","node":null,"peer":null}]},{"id":"NID_400","name":"For","title":"For","functional":false,"meta":{"pos":{"x":15.590774536132812,"y":203.92025756835938},"titlePos":{"x":34.07825469970703,"y":-22.51416015625},"comment":{"text":"A simple for cycle from 0 to 10","pos":{"x":0,"y":202.5}}},"inputs":[{"id":"SID_1331","name":"From","node":null,"type":"number","value":0,"canEditName":false,"peer":null},{"id":"SID_1332","name":"To","node":null,"type":"number","value":10,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_1333","name":"Index","node":null,"type":"number","value":9,"cached":true,"canEditName":false,"peers":[]}],"prev":{"id":"SID_1336","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1334","name":"Out","node":null,"peer":null},{"id":"SID_1335","name":"Do","node":null,"peer":null}]},{"id":"NID_433","name":"Console","title":"Console","functional":false,"meta":{"pos":{"x":1312.58203125,"y":238.64178466796875},"titlePos":{"x":30.0235595703125,"y":-23.875732421875}},"inputs":[{"id":"SID_1439","name":"Val","node":null,"type":"string","value":"Itaration n.9 (odd)","canEditName":false,"peer":null}],"outputs":[],"prev":{"id":"SID_1441","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_1440","name":"Out","node":null,"peer":null}]},{"id":"NID_508","name":"FIf","title":"If","functional":true,"meta":{"pos":{"x":778.1415405273438,"y":521.865234375},"titlePos":{"x":27.92626953125,"y":-24.05560302734375},"comment":{"text":"If so, output the even string, otherwise output the odd string","pos":{"x":0,"y":172.5}}},"inputs":[{"id":"SID_1690","name":"Condition","node":null,"type":"boolean","value":false,"canEditName":false,"peer":null},{"id":"SID_1691","name":"True","node":null,"type":"any","value":"even","canEditName":false,"peer":null},{"id":"SID_1692","name":"False","node":null,"type":"any","value":"odd","canEditName":false,"peer":null}],"outputs":[{"id":"SID_1693","name":"Val","node":null,"type":"any","value":"odd","cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_556","name":"FEqual","title":"==","functional":true,"meta":{"pos":{"x":532.51025390625,"y":552.605712890625},"titlePos":{"x":29.44732666015625,"y":-23.16015625},"comment":{"text":"Is the current for-index even??","pos":{"x":0,"y":142.5}}},"inputs":[{"id":"SID_1845","name":"Val1","node":null,"type":"number","value":1,"canEditName":false,"peer":null},{"id":"SID_1846","name":"Val2","node":null,"type":"number","value":0,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_1847","name":"Val","node":null,"type":"boolean","value":false,"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_588","name":"FMod","title":"%","functional":true,"meta":{"pos":{"x":266.1653137207031,"y":465.3293762207031},"titlePos":{"x":29.839691162109375,"y":-23.69683837890625},"comment":{"text":"write a comment","pos":{"x":0,"y":142.5}}},"inputs":[{"id":"SID_1950","name":"Val1","node":null,"type":"number","value":9,"canEditName":false,"peer":null},{"id":"SID_1951","name":"Val2","node":null,"type":"number","value":2,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_1952","name":"Val","node":null,"type":"number","value":1,"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_620","name":"FNConst","title":"N Const","functional":true,"meta":{"pos":{"x":272.0693817138672,"y":685.7700805664062},"titlePos":{"x":27.603668212890625,"y":-20.998779296875}},"inputs":[{"id":"SID_2055","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peer":null}],"outputs":[{"id":"SID_2056","name":"Val","node":null,"type":"number","value":0,"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_643","name":"Console","title":"Console","functional":false,"meta":{"pos":{"x":282.8063049316406,"y":13.253865242004395},"titlePos":{"x":31.65826416015625,"y":-24.427091121673584},"comment":{"text":"Output the end string","pos":{"x":0,"y":112.5}}},"inputs":[{"id":"SID_2123","name":"Val","node":null,"type":"any","value":"end","canEditName":false,"peer":null}],"outputs":[],"prev":{"id":"SID_2125","name":"In","node":null,"peers":[]},"nexts":[{"id":"SID_2124","name":"Out","node":null,"peer":null}]},{"id":"NID_828","name":"FSConst","title":"toString()","functional":true,"meta":{"pos":{"x":566.3714599609375,"y":393.5686340332031},"titlePos":{"x":27.02734375,"y":-24.218475341796875}},"inputs":[{"id":"SID_2730","name":"Val","node":null,"type":"number","value":9,"canEditName":false,"peer":null}],"outputs":[{"id":"SID_2731","name":"Val","node":null,"type":"string","value":"9","cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_864","name":"FConcat","title":"FConcat","functional":true,"meta":{"titlePos":{"x":27.971435546875,"y":-25.560211181640625},"pos":{"x":1044.2081298828125,"y":324.23358154296875},"comment":{"text":"Compute the final message","pos":{"x":0,"y":262.5}}},"inputs":[{"id":"SID_2848","name":"0","node":null,"type":"string","value":"Itaration ","canEditName":false,"peer":null},{"id":"SID_2849","name":"1","node":null,"type":"string","value":"n.","canEditName":false,"peer":null},{"id":"SID_3480","name":"2","node":null,"type":"string","value":"9","canEditName":false,"peer":null},{"id":"SID_3481","name":"3","node":null,"type":"string","value":" (","canEditName":false,"peer":null},{"id":"SID_3482","name":"4","node":null,"type":"string","value":"odd","canEditName":false,"peer":null},{"id":"SID_3483","name":"5","node":null,"type":"string","value":")","canEditName":false,"peer":null}],"outputs":[{"id":"SID_2850","name":"Val","node":null,"type":"string","value":"Itaration n.9 (odd)","cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]}],"connections":[{"type":"pn","sourceNode":"NID_357","sourceSocket":"SID_1196","targetNode":"NID_363","targetSocket":"SID_1215"},{"type":"pn","sourceNode":"NID_643","sourceSocket":"SID_2124","targetNode":"NID_358","targetSocket":"SID_1199"},{"type":"pn","sourceNode":"NID_363","sourceSocket":"SID_1214","targetNode":"NID_400","targetSocket":"SID_1336"},{"type":"io","sourceNode":"NID_400","sourceSocket":"SID_1333","targetNode":"NID_588","targetSocket":"SID_1950"},{"type":"io","sourceNode":"NID_400","sourceSocket":"SID_1333","targetNode":"NID_828","targetSocket":"SID_2730"},{"type":"pn","sourceNode":"NID_400","sourceSocket":"SID_1334","targetNode":"NID_643","targetSocket":"SID_2125"},{"type":"pn","sourceNode":"NID_400","sourceSocket":"SID_1335","targetNode":"NID_433","targetSocket":"SID_1441"},{"type":"io","sourceNode":"NID_864","sourceSocket":"SID_2850","targetNode":"NID_433","targetSocket":"SID_1439"},{"type":"io","sourceNode":"NID_556","sourceSocket":"SID_1847","targetNode":"NID_508","targetSocket":"SID_1690"},{"type":"io","sourceNode":"NID_508","sourceSocket":"SID_1693","targetNode":"NID_864","targetSocket":"SID_3482"},{"type":"io","sourceNode":"NID_588","sourceSocket":"SID_1952","targetNode":"NID_556","targetSocket":"SID_1845"},{"type":"io","sourceNode":"NID_620","sourceSocket":"SID_2056","targetNode":"NID_556","targetSocket":"SID_1846"},{"type":"io","sourceNode":"NID_828","sourceSocket":"SID_2731","targetNode":"NID_864","targetSocket":"SID_3480"}]}`));
      canvas.program = prg;
    }

    function exampleClassDiagram() {

      let prg = cnui.Env.import(JSON.parse(`{"id":"NID_956","version":1,"lastNodeIndex":3107,"lastSocketIndex":14805,"enter":"NID_1923","exit":"NID_1924","nodes":[{"id":"NID_1923","name":"Enter","title":"Enter","functional":false,"meta":{"titlePos":{"x":28.308380126953125,"y":-22.586837768554688},"pos":{"x":-454.2120666503906,"y":128.30799865722656}},"inputs":[{"id":"SID_9677","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peer":null}],"outputs":[{"id":"SID_9678","name":"Val","node":null,"type":"any","value":0,"cached":true,"canEditName":false,"peers":[]}],"prev":null,"nexts":[{"id":"SID_9679","name":"Begin","node":null,"peer":null}]},{"id":"NID_1924","name":"Exit","title":"Exit","functional":false,"meta":{"pos":{"x":-448.4183044433594,"y":-32.78642463684082},"titlePos":{"x":31.179412841796875,"y":-23.041378021240234}},"inputs":[{"id":"SID_9680","name":"Val","node":null,"type":"any","value":"0","canEditName":false,"peer":null}],"outputs":[{"id":"SID_9681","name":"Val","node":null,"type":"any","value":0,"cached":true,"canEditName":false,"peers":[]}],"prev":{"id":"SID_9682","name":"End","node":null,"peers":[]},"nexts":[]},{"id":"NID_2005","name":"FOMake","title":"Component","functional":true,"meta":{"titlePos":{"x":25.49609375,"y":-23.556396484375},"pos":{"x":680.0391845703125,"y":-151.4112091064453}},"inputs":[{"id":"SID_10005","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null},{"id":"SID_10006","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null},{"id":"SID_10391","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null},{"id":"SID_11631","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null}],"outputs":[{"id":"SID_10007","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2048","name":"FOMake","title":"Socket","functional":true,"meta":{"titlePos":{"x":25.992950439453125,"y":-21.35125732421875},"pos":{"x":281.0135803222656,"y":-334.48609924316406}},"inputs":[{"id":"SID_10182","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null}],"outputs":[{"id":"SID_10184","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2091","name":"FOMake","title":"Connection","functional":true,"meta":{"titlePos":{"x":25.16424560546875,"y":-21.282623291015625},"pos":{"x":688.518310546875,"y":272.92535400390625}},"inputs":[{"id":"SID_10359","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null}],"outputs":[{"id":"SID_10361","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2134","name":"FOMake","title":"Canvas","functional":true,"meta":{"titlePos":{"x":26.08819580078125,"y":-22.9556884765625},"pos":{"x":682.1103515625,"y":-347.3287658691406}},"inputs":[{"id":"SID_10537","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null}],"outputs":[{"id":"SID_10539","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2177","name":"FOMake","title":"CnodesCanvas","functional":true,"meta":{"titlePos":{"x":25.01898193359375,"y":-23.17333984375},"pos":{"x":279.3316650390625,"y":-468.6043701171875}},"inputs":[],"outputs":[{"id":"SID_10716","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2220","name":"FOMake","title":"MenuItem","functional":true,"meta":{"titlePos":{"x":27.37322998046875,"y":-20.598388671875},"pos":{"x":688.4234619140625,"y":-481.6759948730469}},"inputs":[],"outputs":[{"id":"SID_10893","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2263","name":"FOMake","title":"Menu","functional":true,"meta":{"titlePos":{"x":27.373291015625,"y":-22.403411865234375},"pos":{"x":286.4049987792969,"y":-161.1000518798828}},"inputs":[{"id":"SID_11068","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null}],"outputs":[{"id":"SID_11070","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2306","name":"FOMake","title":"Position","functional":true,"meta":{"titlePos":{"x":26.9554443359375,"y":-22.09771728515625},"pos":{"x":680.5436401367188,"y":106.00279235839844}},"inputs":[],"outputs":[{"id":"SID_11247","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2349","name":"FOMake","title":"CnodeCompoent","functional":true,"meta":{"titlePos":{"x":28.20733642578125,"y":-24.057453751564026},"pos":{"x":280.00537109375,"y":11.592788696289062}},"inputs":[{"id":"SID_11422","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null},{"id":"SID_11423","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null}],"outputs":[{"id":"SID_11424","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2392","name":"FOMake","title":"CnodesConnection","functional":true,"meta":{"titlePos":{"x":25.933319091796875,"y":-23.76739501953125},"pos":{"x":259.55206298828125,"y":380.53582763671875}},"inputs":[{"id":"SID_11599","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null},{"id":"SID_11600","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null}],"outputs":[{"id":"SID_11601","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2435","name":"FOMake","title":"CnodesEditableTextComponent","functional":true,"meta":{"titlePos":{"x":-27.6507568359375,"y":-37.123291015625},"pos":{"x":267.4845275878906,"y":205.9060516357422}},"inputs":[],"outputs":[{"id":"SID_11779","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2478","name":"FOMake","title":"CnodesMenu","functional":true,"meta":{"titlePos":{"x":25.129405975341797,"y":-22.978912353515625},"pos":{"x":-50.73119354248047,"y":-116.71995544433594}},"inputs":[],"outputs":[{"id":"SID_11956","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2521","name":"FOMake","title":"CnodesSocket","functional":true,"meta":{"titlePos":{"x":30.498037338256836,"y":-23.959930419921875},"pos":{"x":-37.4349365234375,"y":-357.8421630859375}},"inputs":[{"id":"SID_12131","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null},{"id":"SID_12132","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null},{"id":"SID_13050","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null},{"id":"SID_13051","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null}],"outputs":[{"id":"SID_12133","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2564","name":"FOMake","title":"Input","functional":true,"meta":{"titlePos":{"x":29.093399047851562,"y":-25.353271484375},"pos":{"x":-305.8553009033203,"y":-578.458740234375}},"inputs":[],"outputs":[{"id":"SID_12312","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2607","name":"FOMake","title":"Output","functional":true,"meta":{"titlePos":{"x":29.516448974609375,"y":-22.6097412109375},"pos":{"x":-350.2601013183594,"y":-461.7370910644531}},"inputs":[],"outputs":[{"id":"SID_12489","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2650","name":"FOMake","title":"Prev","functional":true,"meta":{"titlePos":{"x":26.748172760009766,"y":-21.154205322265625},"pos":{"x":-354.32684326171875,"y":-341.4242858886719}},"inputs":[],"outputs":[{"id":"SID_12666","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2693","name":"FOMake","title":"Next","functional":true,"meta":{"titlePos":{"x":26.240386962890625,"y":-20.986968994140625},"pos":{"x":-348.6496276855469,"y":-215.93627166748047}},"inputs":[],"outputs":[{"id":"SID_12843","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2736","name":"FOMake","title":"Theme","functional":true,"meta":{"titlePos":{"x":27.1187744140625,"y":-22.7061767578125},"pos":{"x":701.6038208007812,"y":489.1515808105469}},"inputs":[],"outputs":[{"id":"SID_13020","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2779","name":"FOMake","title":"IOConnection","functional":true,"meta":{"titlePos":{"x":29.114410400390625,"y":-21.44580078125},"pos":{"x":-121.5901870727539,"y":404.767822265625}},"inputs":[],"outputs":[{"id":"SID_13199","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2865","name":"FOMake","title":"PrevNextConnection","functional":true,"meta":{"titlePos":{"x":25.736351013183594,"y":-25.0880126953125},"pos":{"x":-123.19925308227539,"y":539.6624145507812}},"inputs":[],"outputs":[{"id":"SID_13553","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2908","name":"FOMake","title":"CnodeBreakComponent","functional":true,"meta":{"titlePos":{"x":23.01720428466797,"y":-29.078768730163574},"pos":{"x":-115.02484488487244,"y":28.774524688720703}},"inputs":[],"outputs":[{"id":"SID_13730","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2951","name":"FOMake","title":"CnodeProgramComponent","functional":true,"meta":{"titlePos":{"x":16.52600860595703,"y":-28.899032592773438},"pos":{"x":-112.81900215148926,"y":175.84243774414062}},"inputs":[],"outputs":[{"id":"SID_13907","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]},{"id":"NID_2994","name":"FOMake","title":"Object","functional":true,"meta":{"titlePos":{"x":27.71240234375,"y":-23.729958534240723},"pos":{"x":1052.4915771484375,"y":-17.833646297454834}},"inputs":[{"id":"SID_14082","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null},{"id":"SID_14083","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null},{"id":"SID_14114","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null},{"id":"SID_14115","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null},{"id":"SID_14116","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null},{"id":"SID_14117","name":"","node":null,"type":"any","value":"","canEditName":true,"peer":null}],"outputs":[{"id":"SID_14084","name":"Val","node":null,"type":"object","value":{},"cached":false,"canEditName":false,"peers":[]}],"prev":null,"nexts":[]}],"connections":[{"type":"io","sourceNode":"NID_2048","sourceSocket":"SID_10184","targetNode":"NID_2005","targetSocket":"SID_10005"},{"type":"io","sourceNode":"NID_2263","sourceSocket":"SID_11070","targetNode":"NID_2005","targetSocket":"SID_10006"},{"type":"io","sourceNode":"NID_2349","sourceSocket":"SID_11424","targetNode":"NID_2005","targetSocket":"SID_10391"},{"type":"io","sourceNode":"NID_2435","sourceSocket":"SID_11779","targetNode":"NID_2005","targetSocket":"SID_11631"},{"type":"io","sourceNode":"NID_2005","sourceSocket":"SID_10007","targetNode":"NID_2994","targetSocket":"SID_14114"},{"type":"io","sourceNode":"NID_2521","sourceSocket":"SID_12133","targetNode":"NID_2048","targetSocket":"SID_10182"},{"type":"io","sourceNode":"NID_2392","sourceSocket":"SID_11601","targetNode":"NID_2091","targetSocket":"SID_10359"},{"type":"io","sourceNode":"NID_2091","sourceSocket":"SID_10361","targetNode":"NID_2994","targetSocket":"SID_14116"},{"type":"io","sourceNode":"NID_2177","sourceSocket":"SID_10716","targetNode":"NID_2134","targetSocket":"SID_10537"},{"type":"io","sourceNode":"NID_2134","sourceSocket":"SID_10539","targetNode":"NID_2994","targetSocket":"SID_14083"},{"type":"io","sourceNode":"NID_2220","sourceSocket":"SID_10893","targetNode":"NID_2994","targetSocket":"SID_14082"},{"type":"io","sourceNode":"NID_2478","sourceSocket":"SID_11956","targetNode":"NID_2263","targetSocket":"SID_11068"},{"type":"io","sourceNode":"NID_2306","sourceSocket":"SID_11247","targetNode":"NID_2994","targetSocket":"SID_14115"},{"type":"io","sourceNode":"NID_2908","sourceSocket":"SID_13730","targetNode":"NID_2349","targetSocket":"SID_11422"},{"type":"io","sourceNode":"NID_2951","sourceSocket":"SID_13907","targetNode":"NID_2349","targetSocket":"SID_11423"},{"type":"io","sourceNode":"NID_2779","sourceSocket":"SID_13199","targetNode":"NID_2392","targetSocket":"SID_11599"},{"type":"io","sourceNode":"NID_2865","sourceSocket":"SID_13553","targetNode":"NID_2392","targetSocket":"SID_11600"},{"type":"io","sourceNode":"NID_2564","sourceSocket":"SID_12312","targetNode":"NID_2521","targetSocket":"SID_12131"},{"type":"io","sourceNode":"NID_2607","sourceSocket":"SID_12489","targetNode":"NID_2521","targetSocket":"SID_12132"},{"type":"io","sourceNode":"NID_2650","sourceSocket":"SID_12666","targetNode":"NID_2521","targetSocket":"SID_13050"},{"type":"io","sourceNode":"NID_2693","sourceSocket":"SID_12843","targetNode":"NID_2521","targetSocket":"SID_13051"},{"type":"io","sourceNode":"NID_2736","sourceSocket":"SID_13020","targetNode":"NID_2994","targetSocket":"SID_14117"}]}`));
      canvas.program = prg;
    }

    function saveProgram() {
      localStorage.setItem("lastProgram", JSON.stringify(cnui.Env.export(canvas.program)));
    }

    function loadProgram() {
      canvas.program = cnui.Env.import(JSON.parse(localStorage.getItem("lastProgram")));
    }

    function changeToDark() {
      let prg = cnui.Env.export(canvas.program);
      document.getElementById("cnodes").innerHTML = "";
      cnui.Theme.current = cnui.defaultDark;
      canvas = cnui.canvas('cnodes');

      canvas.maxVBSize = 5000;
      canvas.minVBSize = 100;
      canvas.program = cnui.Env.import(prg);
    }

    function changeToLight() {
      let prg = cnui.Env.export(canvas.program);
      document.getElementById("cnodes").innerHTML = "";
      cnui.Theme.current = cnui.defaultLight;
      canvas = cnui.canvas('cnodes');

      canvas.maxVBSize = 5000;
      canvas.minVBSize = 100;
      canvas.program = cnui.Env.import(prg);
    }

    function newCanvas() {
      let prg = new cnui.Program();
      prg.exit.meta = {
        pos: {
          x: 700,
          y: 100
        }
      }

      canvas.program = prg;
    };

    cnui.Theme.current = cnui.defaultLight;
    canvas = cnui.canvas('cnodes');

    canvas.maxVBSize = 5000;
    canvas.minVBSize = 100;
  </script>
</body>

</html>
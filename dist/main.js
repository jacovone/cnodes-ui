var cnodesui;cnodesui=(()=>{"use strict";var t={640:(t,e,n)=>{function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function o(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function a(t,e,n){var i=e.get(t);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(t,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}n.r(e),n.d(e,{canvas:()=>pt,fill:()=>ft});var s=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,d=new WeakSet,w=new WeakSet,y=new WeakSet,b=new WeakSet,m=new WeakSet,g=new WeakSet,k=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g.add(this),m.add(this),b.add(this),y.add(this),w.add(this),d.add(this),s.set(this,{writable:!0,value:null}),l.set(this,{writable:!0,value:0}),u.set(this,{writable:!0,value:0}),c.set(this,{writable:!0,value:100}),h.set(this,{writable:!0,value:100}),f.set(this,{writable:!0,value:!1}),p.set(this,{writable:!0,value:void 0}),v.set(this,{writable:!0,value:[]}),a(this,s,document.createElementNS("http://www.w3.org/2000/svg","svg")),o(this,s).style.width="100%",o(this,s).style.height="100%",e.appendChild(o(this,s)),r(this,w,S).call(this);var n=this;window.addEventListener("resize",(function(){r(n,w,S).call(n)})),o(this,s).addEventListener("wheel",(function(t){r(n,y,P).call(n,t)})),o(this,s).addEventListener("pointerdown",(function(t){r(n,b,W).call(n,t)})),o(this,s).addEventListener("pointerup",(function(t){r(n,m,M).call(n,t)})),o(this,s).addEventListener("pointermove",(function(t){r(n,g,T).call(n,t)}))}var e,n;return e=t,(n=[{key:"clientToSvgPoint",value:function(t,e){var n=o(this,s).createSVGPoint();return n.x=t,n.y=e,n.matrixTransform(o(this,s).getCTM().inverse())}},{key:"addComponent",value:function(t){o(this,v).push(t),t.canvas=this,o(this,s).appendChild(t.componentEl)}},{key:"removeComponent",value:function(t){this.components=o(this,v).filter((function(e){return e!==t})),o(this,s).removeChild(t.componentEl)}},{key:"clear",value:function(){o(this,s).innerHTML=""}},{key:"svgEl",get:function(){return o(this,s)}}])&&i(e.prototype,n),t}(),E=function(){o(this,s).setAttribute("viewBox","".concat(o(this,l)," ").concat(o(this,u)," ").concat(o(this,c)," ").concat(o(this,h)))},S=function(){a(this,c,o(this,s).parentElement.clientWidth),a(this,h,o(this,s).parentElement.clientHeight),r(this,d,E).call(this)},P=function(t){var e=this.clientToSvgPoint(t.clientX,t.clientY),n=1+.003*t.deltaY,i=o(this,c)*n,s=o(this,h)*n;if(!(s<10||i<10||s>5e4||i>5e4)){var f=o(this,l)-(i-o(this,c))*((e.x-o(this,l))/o(this,c)),p=o(this,u)-(s-o(this,h))*((e.y-o(this,u))/o(this,h));a(this,h,s),a(this,c,i),a(this,l,f),a(this,u,p),r(this,d,E).call(this)}},W=function(t){a(this,f,!0),a(this,p,this.clientToSvgPoint(t.clientX,t.clientY)),o(this,s).setPointerCapture(t.pointerId)},M=function(t){a(this,f,!1),o(this,s).releasePointerCapture(t.pointerId)},T=function(t){if(o(this,f)){var e=this.clientToSvgPoint(t.clientX,t.clientY),n=e.x-o(this,p).x,i=e.y-o(this,p).y;a(this,l,o(this,l)-n),a(this,u,o(this,u)-i),r(this,d,E).call(this)}};function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function C(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function A(t,e,n){var i=e.get(t);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(t,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}var O=new WeakMap,j=new WeakMap,L=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),O.set(this,{writable:!0,value:0}),j.set(this,{writable:!0,value:0}),A(this,O,e),A(this,j,n)}var e,n;return e=t,(n=[{key:"add",value:function(e){return new t(C(this,O)+e.x,C(this,j)+e.y)}},{key:"sub",value:function(e){return new t(C(this,O)-e.x,C(this,j)-e.y)}},{key:"x",get:function(){return C(this,O)},set:function(t){A(this,O,t)}},{key:"y",get:function(){return C(this,j)},set:function(t){A(this,j,t)}}])&&x(e.prototype,n),t}();function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&G(t,e)}function G(t,e){return(G=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Y(t);if(e){var r=Y(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return R(this,n)}}function R(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Y(t){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function D(t,e,n){return e&&B(t.prototype,e),n&&B(t,n),t}function H(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function z(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function U(t,e,n){var i=e.get(t);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(t,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}var Z,$=new WeakMap,q=new WeakMap,F=new WeakMap,J=new WeakMap,K=new WeakMap,Q=new WeakMap,tt=new WeakMap,et=new WeakMap,nt=new WeakMap,it=new WeakSet,rt=new WeakSet,ot=new WeakSet,at=function(){function t(){N(this,t),ot.add(this),rt.add(this),it.add(this),$.set(this,{writable:!0,value:null}),q.set(this,{writable:!0,value:null}),F.set(this,{writable:!0,value:null}),J.set(this,{writable:!0,value:!0}),K.set(this,{writable:!0,value:new L(0,0)}),Q.set(this,{writable:!0,value:!1}),tt.set(this,{writable:!0,value:null}),et.set(this,{writable:!0,value:null}),nt.set(this,{writable:!0,value:[]});var e=this;U(this,q,this.createElement()),z(this,q).addEventListener("pointerdown",(function(t){H(e,it,st).call(e,t)})),z(this,q).addEventListener("pointerup",(function(t){H(e,rt,lt).call(e,t)})),z(this,q).addEventListener("pointermove",(function(t){H(e,ot,ut).call(e,t)}))}return D(t,[{key:"createElement",value:function(){throw new Error("Element must be defined in a subclass!")}},{key:"updateSVGElement",value:function(){var t=this.absPos;z(this,q).setAttribute("transform","translate(".concat(t.x,",").concat(t.y,")"));var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return X(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(z(this,nt));try{for(n.s();!(e=n.n()).done;)e.value.updateSVGElement()}catch(t){n.e(t)}finally{n.f()}}},{key:"addComponent",value:function(t){z(this,nt).push(t),t.parent=this,t.canvas=this.canvas,this.svgEl.appendChild(t.componentEl),t.updateSVGElement()}},{key:"removeComponent",value:function(t){this.components=z(this,nt).filter((function(e){return e!==t})),this.svgEl.removeChild(t.componentEl)}},{key:"pos",get:function(){return z(this,K)},set:function(t){U(this,K,t),this.updateSVGElement()}},{key:"canvas",get:function(){return z(this,$)},set:function(t){U(this,$,t)}},{key:"componentEl",get:function(){return z(this,q)}},{key:"svgEl",get:function(){return z(this,$).svgEl}},{key:"moveable",get:function(){return z(this,J)},set:function(t){U(this,J,t)}},{key:"parent",get:function(){return z(this,F)},set:function(t){U(this,F,t)}},{key:"absPos",get:function(){var t=new L(z(this,K).x,z(this,K).y);if(z(this,F)){var e=z(this,F).absPos;t=t.add(e)}return t}}]),t}(),st=function(t){z(this,J)&&(U(this,Q,!0),U(this,tt,z(this,$).clientToSvgPoint(t.clientX,t.clientY)),U(this,et,z(this,$).svgEl.createSVGPoint()),z(this,et).x=z(this,K).x,z(this,et).y=z(this,K).y,z(this,q).setPointerCapture(t.pointerId),t.stopPropagation())},lt=function(t){z(this,J)&&(U(this,Q,!1),z(this,q).releasePointerCapture(t.pointerId),t.stopPropagation())},ut=function(t){if(z(this,J)){if(!z(this,Q))return;var e=z(this,$).clientToSvgPoint(t.clientX,t.clientY),n=e.x-z(this,tt).x,i=e.y-z(this,tt).y;z(this,K).x=n+z(this,et).x,z(this,K).y=i+z(this,et).y,this.updateSVGElement(),t.stopPropagation()}},ct=function(t){I(n,t);var e=V(n);function n(){return N(this,n),e.call(this)}return D(n,[{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","M 100 30 L 50 120 C 70 100 90 140 210 220 Z"),t.setAttribute("stroke","red"),t.setAttribute("stroke-width","5"),t.setAttribute("fill","blue"),t.setAttribute("fill-opacity","0.7"),t}}]),n}(at),ht=function(t){I(n,t);var e=V(n);function n(){return N(this,n),e.call(this)}return D(n,[{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","rect");return t.setAttribute("width","200"),t.setAttribute("height","100"),t.setAttribute("stroke","blue"),t.setAttribute("fill-opacity","0.5"),t.setAttribute("stroke-width","5"),t.setAttribute("fill","green"),t}}]),n}(at);function ft(){Z.clear();for(var t=0;t<1e3;t++){var e=4e4*Math.random(),n=2e4*Math.random(),i=new ht;i.pos=new L(e,n),Z.addComponent(i);var r=new ct;r.pos=new L(200,200),i.addComponent(r);var o=new ct;o.moveable=!1,o.pos=new L(200,200),r.addComponent(o)}}function pt(t){var e=document.getElementById(t);e?(Z=new k(e),ft()):console.log("No element with id '".concat(t,"'"))}}},e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}return n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(640)})();
var cnui;cnui=(()=>{"use strict";var t={277:(t,e,n)=>{function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function i(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}n.r(e),n.d(e,{Call:()=>Mr,Canvas:()=>lt,CnodeComponent:()=>In,CnodesCanvas:()=>$n,Comparision:()=>Oi,Component:()=>k,Console:()=>Hr,Env:()=>Ru,FAdd:()=>$o,FCompare:()=>Ei,FDiv:()=>ni,FGetvar:()=>zr,FMul:()=>li,FlowSocket:()=>Zt,For:()=>uo,Getvar:()=>ho,If:()=>Vo,InputSocket:()=>$t,NextSocket:()=>ee,Node:()=>lr,OutputSocket:()=>Qt,Position:()=>s,PrevSocket:()=>Jt,Program:()=>mu,Result:()=>yr,Setvar:()=>_o,Socket:()=>Xt,Theme:()=>re,Type:()=>St,Types:()=>gt,ValueSocket:()=>Yt,While:()=>Do,callNode:()=>Lr,canvas:()=>ku,consoleNode:()=>Gr,faddNode:()=>qo,fcompareNode:()=>_i,fdivNode:()=>ri,fgetvarNode:()=>Jr,fmulNode:()=>pi,forNode:()=>co,getvarNode:()=>vo,ifNode:()=>Wo,program:()=>Ou,setvarNode:()=>So,type:()=>Rt,whileNode:()=>Ao});var u=new WeakMap,a=new WeakMap,s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u.set(this,{writable:!0,value:0}),a.set(this,{writable:!0,value:0}),i(this,u,e),i(this,a,n)}var e,n;return e=t,(n=[{key:"add",value:function(e){return new t(o(this,u)+e.x,o(this,a)+e.y)}},{key:"sub",value:function(e){return new t(o(this,u)-e.x,o(this,a)-e.y)}},{key:"x",get:function(){return o(this,u)},set:function(t){i(this,u,t)}},{key:"y",get:function(){return o(this,a)},set:function(t){i(this,a,t)}}])&&r(e.prototype,n),t}();function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function y(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function h(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var v=new WeakMap,b=new WeakMap,d=new WeakMap,w=new WeakMap,m=new WeakMap,O=new WeakMap,g=new WeakMap,E=new WeakMap,_=new WeakMap,S=new WeakSet,R=new WeakSet,N=new WeakSet,k=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),N.add(this),R.add(this),S.add(this),v.set(this,{writable:!0,value:null}),b.set(this,{writable:!0,value:null}),d.set(this,{writable:!0,value:null}),w.set(this,{writable:!0,value:!0}),m.set(this,{writable:!0,value:new s(0,0)}),O.set(this,{writable:!0,value:!1}),g.set(this,{writable:!0,value:null}),E.set(this,{writable:!0,value:null}),_.set(this,{writable:!0,value:[]})}var e,n;return e=t,(n=[{key:"setup",value:function(){h(this,b,this.createElement());var t=this;y(this,b).componentRef=this,this.moveable&&(y(this,b).addEventListener("pointerdown",(function(e){p(t,S,P).call(t,e)})),y(this,b).addEventListener("pointerup",(function(e){p(t,R,C).call(t,e)})),y(this,b).addEventListener("pointermove",(function(e){p(t,N,T).call(t,e)})))}},{key:"createElement",value:function(){throw new Error("Element must be defined in a subclass!")}},{key:"updateSVGElement",value:function(){var t=this.absPos;y(this,b).setAttribute("transform","translate(".concat(t.x,",").concat(t.y,")"));var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}(y(this,_));try{for(n.s();!(e=n.n()).done;)e.value.updateSVGElement()}catch(t){n.e(t)}finally{n.f()}this.canvas&&this.canvas.updateAllConnections()}},{key:"addComponent",value:function(t){y(this,_).push(t),t.parent=this,t.canvas=this.canvas,this.svgEl.appendChild(t.componentEl),t.updateSVGElement()}},{key:"removeComponent",value:function(t){this.components=y(this,_).filter((function(e){return e!==t})),t.destroy(),this.svgEl.removeChild(t.componentEl)}},{key:"destroy",value:function(){}},{key:"pos",get:function(){return y(this,m)},set:function(t){h(this,m,t),this.updateSVGElement()}},{key:"canvas",get:function(){return y(this,v)},set:function(t){h(this,v,t)}},{key:"componentEl",get:function(){return y(this,b)}},{key:"components",get:function(){return y(this,_)},set:function(t){h(this,_,t)}},{key:"svgEl",get:function(){return y(this,v).svgEl}},{key:"moveable",get:function(){return y(this,w)},set:function(t){h(this,w,t)}},{key:"parent",get:function(){return y(this,d)},set:function(t){h(this,d,t)}},{key:"absPos",get:function(){var t=new s(y(this,m).x,y(this,m).y);if(y(this,d)){var e=y(this,d).absPos;t=t.add(e)}return t}}])&&l(e.prototype,n),t}(),P=function(t){y(this,w)&&(h(this,O,!0),h(this,g,y(this,v).clientToSvgPoint(t.clientX,t.clientY)),h(this,E,y(this,v).svgEl.createSVGPoint()),y(this,E).x=y(this,m).x,y(this,E).y=y(this,m).y,y(this,b).setPointerCapture(t.pointerId),t.stopPropagation())},C=function(t){y(this,w)&&(h(this,O,!1),y(this,b).releasePointerCapture(t.pointerId),t.stopPropagation())},T=function(t){if(y(this,w)){if(!y(this,O))return;var e=y(this,v).clientToSvgPoint(t.clientX,t.clientY),n=e.x-y(this,g).x,r=e.y-y(this,g).y;y(this,m).x=n+y(this,E).x,y(this,m).y=r+y(this,E).y,this.updateSVGElement(),t.stopPropagation()}};function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e,n){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j(t,e){return!e||"object"!==D(e)&&"function"!=typeof e?M(t):e}function M(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}function V(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}var W=new WeakMap,U=new WeakMap,B=new WeakMap,X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(r);if(o){var n=L(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return j(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),t=i.call(this),W.set(M(t),{writable:!0,value:!1}),U.set(M(t),{writable:!0,value:null}),B.set(M(t),{writable:!0,value:null}),t}return e=u,(n=[{key:"setup",value:function(){this.moveable=!1,I(L(u.prototype),"setup",this).call(this);var t=this;this.componentEl.addEventListener("pointerdown",(function(e){t.onPointerDown(e)})),this.componentEl.addEventListener("pointerup",(function(e){t.onPointerUp(e)})),this.componentEl.addEventListener("pointermove",(function(e){t.onPointerMove(e)}))}},{key:"onPointerDown",value:function(t){if(this.hasSingleConnection&&this.isConnected){this.getPeerComponent().onPointerDown(t);var e=this.canvas.getConnectionsFor(this)[0];this.canvas.removeConnection(e),t.stopPropagation()}else F(this,W,!0),this.componentEl.setPointerCapture(t.pointerId),t.stopPropagation(),this.connectionStarted()}},{key:"onPointerUp",value:function(t){if(F(this,W,!1),this.componentEl.releasePointerCapture(t.pointerId),t.stopPropagation(),V(this,U)){var e=V(this,U);F(this,U,null),this.connectionDone(e)}else this.connectionCancelled()}},{key:"onPointerMove",value:function(t){if(V(this,W)){var e=this.canvas.componentFromPosition(t.clientX,t.clientY,!0),n=this.canvas.clientToSvgPoint(t.clientX,t.clientY);e?this.canAcceptPeerSocket(e)?(F(this,U,e),this.connectionMoving(n.x,n.y,!1)):(F(this,U,null),this.connectionMoving(n.x,n.y,!0)):(F(this,U,null),this.connectionMoving(n.x,n.y,!1)),t.stopPropagation()}}},{key:"connectionStarted",value:function(){F(this,B,document.createElementNS("http://www.w3.org/2000/svg","path")),V(this,B).setAttribute("d","\n      M ".concat(this.absPos.x," ").concat(this.absPos.y,"\n    ")),this.canvas.connectionsEl.appendChild(V(this,B))}},{key:"connectionMoving",value:function(t,e,n){var r=new s(this.absPos.x,this.absPos.y),o=new s(this.currentPeerSocketComponent?this.currentPeerSocketComponent.absPos.x:t,this.currentPeerSocketComponent?this.currentPeerSocketComponent.absPos.y:e);V(this,B).setAttribute("d","\n      M ".concat(r.x," ").concat(r.y,"\n      L ").concat(o.x," ").concat(o.y,"\n    ")),V(this,B).setAttribute("stroke-width",2),V(this,B).setAttribute("stroke","black"),V(this,B).setAttribute("fill","transparent")}},{key:"connectionDone",value:function(t){this.canvas.connectionsEl.removeChild(V(this,B))}},{key:"connectionCancelled",value:function(){this.canvas.connectionsEl.removeChild(V(this,B))}},{key:"canAcceptPeerSocket",value:function(t){throw new Error("This method must be overridden in a subclass!")}},{key:"getPeerComponent",value:function(){if(this.hasSingleConnection){var t=this.canvas.getConnectionsFor(this)[0];return this===t.source?t.target:t.source}return null}},{key:"connecting",get:function(){return V(this,W)},set:function(t){F(this,W,t)}},{key:"currentPeerSocketComponent",get:function(){return V(this,U)}},{key:"tempConnectionEl",get:function(){return V(this,B)}},{key:"hasSingleConnection",get:function(){throw new Error("This method must be overridden in a subclass!")}},{key:"isConnected",get:function(){return this.canvas.getConnectionsFor(this).length>0}}])&&A(e.prototype,n),u}(k);function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Y(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function K(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function $(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var q=new WeakMap,Q=new WeakMap,Z=new WeakMap,z=new WeakMap,J=new WeakMap,tt=new WeakMap,et=new WeakMap,nt=new WeakMap,rt=new WeakMap,ot=new WeakMap,it=new WeakSet,ut=new WeakSet,ct=new WeakSet,at=new WeakSet,st=new WeakSet,ft=new WeakSet,lt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ft.add(this),st.add(this),at.add(this),ct.add(this),ut.add(this),it.add(this),q.set(this,{writable:!0,value:null}),Q.set(this,{writable:!0,value:null}),Z.set(this,{writable:!0,value:0}),z.set(this,{writable:!0,value:0}),J.set(this,{writable:!0,value:100}),tt.set(this,{writable:!0,value:100}),et.set(this,{writable:!0,value:!1}),nt.set(this,{writable:!0,value:void 0}),rt.set(this,{writable:!0,value:[]}),ot.set(this,{writable:!0,value:[]}),$(this,q,document.createElementNS("http://www.w3.org/2000/svg","svg")),K(this,q).style.width="100%",K(this,q).style.height="100%",e.appendChild(K(this,q)),$(this,Q,document.createElementNS("http://www.w3.org/2000/svg","g")),K(this,q).appendChild(K(this,Q)),Y(this,ut,yt).call(this);var n=this;window.addEventListener("resize",(function(){Y(n,ut,yt).call(n)})),K(this,q).addEventListener("wheel",(function(t){Y(n,ct,ht).call(n,t)})),K(this,q).addEventListener("pointerdown",(function(t){Y(n,at,vt).call(n,t)})),K(this,q).addEventListener("pointerup",(function(t){Y(n,st,bt).call(n,t)})),K(this,q).addEventListener("pointermove",(function(t){Y(n,ft,dt).call(n,t)}))}var e,n;return e=t,(n=[{key:"clientToSvgPoint",value:function(t,e){t-=K(this,q).getBoundingClientRect().left,e-=K(this,q).getBoundingClientRect().top;var n=K(this,q).createSVGPoint();return n.x=t,n.y=e,n.matrixTransform(K(this,q).getCTM().inverse())}},{key:"componentFromPosition",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.elementFromPoint(t,e);r;){if(r.componentRef&&(!n||r.componentRef instanceof X))return r.componentRef;r=r.parentElement}return null}},{key:"addConnection",value:function(t){K(this,ot).push(t),t.canvas=this,K(this,Q).appendChild(t.connectionEl)}},{key:"removeConnection",value:function(t){t.destroy(),$(this,ot,K(this,ot).filter((function(e){return e!==t}))),K(this,Q).removeChild(t.connectionEl)}},{key:"addComponent",value:function(t){K(this,rt).push(t),t.canvas=this,K(this,q).appendChild(t.componentEl)}},{key:"removeComponent",value:function(t){c.destroy(),this.components=K(this,rt).filter((function(e){return e!==t})),K(this,q).removeChild(t.componentEl),K(this,ot).forEach((function(e){e.source!==t&&e.target!==t||e.destroy()})),$(this,ot,K(this,ot).filter((function(e){return e.source!==t&&e.target!==t})))}},{key:"updateAllConnections",value:function(){var t,e=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}(K(this,ot));try{for(e.s();!(t=e.n()).done;)t.value.updateSVGElement()}catch(t){e.e(t)}finally{e.f()}}},{key:"getConnectionsFor",value:function(t){return K(this,ot).filter((function(e){return e.source===t||e.target===t}))}},{key:"removeAllConnections",value:function(){for(;K(this,ot).length>0;)this.removeConnection(K(this,ot)[0])}},{key:"removeAllComponents",value:function(){for(;K(this,rt).length>0;)this.removeComponent(K(this,rt)[0])}},{key:"removeAll",value:function(){this.removeAllConnections(),this.removeAllComponents()}},{key:"components",get:function(){return K(this,rt)},set:function(t){$(this,rt,t)}},{key:"connections",get:function(){return K(this,ot)},set:function(t){$(this,ot,t)}},{key:"svgEl",get:function(){return K(this,q)}},{key:"connectionsEl",get:function(){return K(this,Q)}}])&&G(e.prototype,n),t}(),pt=function(){K(this,q).setAttribute("viewBox","".concat(K(this,Z)," ").concat(K(this,z)," ").concat(K(this,J)," ").concat(K(this,tt)))},yt=function(){$(this,J,K(this,q).parentElement.clientWidth),$(this,tt,K(this,q).parentElement.clientHeight),Y(this,it,pt).call(this)},ht=function(t){var e=this.clientToSvgPoint(t.clientX,t.clientY),n=1+.003*t.deltaY,r=K(this,J)*n,o=K(this,tt)*n;if(!(o<10||r<10||o>5e4||r>5e4)){var i=K(this,Z)-(r-K(this,J))*((e.x-K(this,Z))/K(this,J)),u=K(this,z)-(o-K(this,tt))*((e.y-K(this,z))/K(this,tt));$(this,tt,o),$(this,J,r),$(this,Z,i),$(this,z,u),Y(this,it,pt).call(this),t.stopPropagation()}},vt=function(t){$(this,et,!0),$(this,nt,this.clientToSvgPoint(t.clientX,t.clientY)),K(this,q).setPointerCapture(t.pointerId)},bt=function(t){$(this,et,!1),K(this,q).releasePointerCapture(t.pointerId)},dt=function(t){if(K(this,et)){var e=this.clientToSvgPoint(t.clientX,t.clientY),n=e.x-K(this,nt).x,r=e.y-K(this,nt).y;$(this,Z,K(this,Z)-n),$(this,z,K(this,z)-r),Y(this,it,pt).call(this)}};function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mt(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function Ot(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var gt={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",OBJECT:"object",ANY:"any"},Et=new WeakMap,_t=new WeakMap,St=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Et.set(this,{writable:!0,value:gt.NUMBER}),_t.set(this,{writable:!0,value:!1}),Ot(this,Et,e),Ot(this,_t,n)}var e,n;return e=t,(n=[{key:"type",get:function(){return mt(this,Et)},set:function(t){Ot(this,Et,t)}},{key:"isArray",get:function(){return mt(this,_t)},set:function(t){Ot(this,_t,t)}}])&&wt(e.prototype,n),t}();function Rt(t,e){return new St(t,e)}function Nt(t){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pt(t,e)}function Pt(t,e){return(Pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=At(t);if(e){var o=At(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Tt(this,n)}}function Tt(t,e){return!e||"object"!==Nt(e)&&"function"!=typeof e?Dt(t):e}function Dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function At(t){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function It(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jt(t,e,n){return e&&xt(t.prototype,e),n&&xt(t,n),t}function Mt(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function Lt(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var Ft,Vt,Wt=new WeakMap,Ut=new WeakMap,Bt=new WeakMap,Xt=function(){function t(e,n){It(this,t),Wt.set(this,{writable:!0,value:""}),Ut.set(this,{writable:!0,value:""}),Bt.set(this,{writable:!0,value:null}),Lt(this,Wt,"SID_"+t.lastSocketIdIndex++),Lt(this,Ut,e),Lt(this,Bt,n)}return jt(t,[{key:"id",get:function(){return Mt(this,Wt)},set:function(t){Lt(this,Wt,t)}},{key:"name",get:function(){return Mt(this,Ut)},set:function(t){Lt(this,Ut,t)}},{key:"node",get:function(){return Mt(this,Bt)},set:function(t){Lt(this,Bt,t)}}]),t}();(Vt="lastSocketIdIndex")in(Ft=Xt)?Object.defineProperty(Ft,Vt,{value:0,enumerable:!0,configurable:!0,writable:!0}):Ft[Vt]=0;var Ht=new WeakMap,Gt=new WeakMap,Yt=function(t){kt(n,t);var e=Ct(n);function n(t,r){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i(gt.NUMBER,!1),u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return It(this,n),o=e.call(this,t,r),Ht.set(Dt(o),{writable:!0,value:Rt(gt.NUMBER,!1)}),Gt.set(Dt(o),{writable:!0,value:0}),o.type=i,o.value=u,o}return jt(n,[{key:"type",get:function(){return Mt(this,Ht)},set:function(t){Lt(this,Ht,t)}},{key:"value",get:function(){return Mt(this,Gt)},set:function(t){Lt(this,Gt,t)}}]),n}(Xt),Kt=new WeakMap,$t=function(t){kt(n,t);var e=Ct(n);function n(t,r){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i(gt.NUMBER,!1),u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return It(this,n),o=e.call(this,t,r,i,u),Kt.set(Dt(o),{writable:!0,value:null}),o}return jt(n,[{key:"evaluate",value:function(){null!==this.peer&&(this.peer.node&&this.peer.node.functional&&this.peer.node.process(),this.type=this.peer.type,this.value=this.peer.value)}},{key:"connect",value:function(t){var e=this;this.peer=t,void 0===t.peers.find((function(t){return t.peer===e}))&&t.peers.push(this)}},{key:"disconnect",value:function(t){var e=this;this.peer=null;var n=t.peers.findIndex((function(t){return t.peer===e}));-1!==n&&t.peers.splice(n,1)}},{key:"peer",get:function(){return Mt(this,Kt)},set:function(t){Lt(this,Kt,t)}}]),n}(Yt),qt=new WeakMap,Qt=function(t){kt(n,t);var e=Ct(n);function n(t,r){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i(gt.NUMBER,!1),u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return It(this,n),o=e.call(this,t,r,i,u),qt.set(Dt(o),{writable:!0,value:[]}),o}return jt(n,[{key:"connect",value:function(t){void 0===this.peers.find((function(e){return e.peer===t}))&&this.peers.push(t),t.peer=this}},{key:"disconnect",value:function(t){var e=this.peers.find((function(e){return e.peer===t}));void 0!==e&&(this.peers.splice(e,1),t.peer=null)}},{key:"peers",get:function(){return Mt(this,qt)},set:function(t){Lt(this,qt,t)}}]),n}(Yt),Zt=function(t){kt(n,t);var e=Ct(n);function n(t,r){return It(this,n),e.call(this,t,r)}return n}(Xt),zt=new WeakMap,Jt=function(t){kt(n,t);var e=Ct(n);function n(t,r){var o;return It(this,n),o=e.call(this,t,r),zt.set(Dt(o),{writable:!0,value:[]}),o}return jt(n,[{key:"connect",value:function(t){void 0===this.peers.find((function(e){return e.peer===t}))&&this.peers.push(t),t.peer=this}},{key:"disconnect",value:function(t){var e=this.peers.find((function(e){return e.peer===t}));void 0!==e&&(this.peers.splice(e,1),t.peer=null)}},{key:"peers",get:function(){return Mt(this,zt)},set:function(t){Lt(this,zt,t)}}]),n}(Zt),te=new WeakMap,ee=function(t){kt(n,t);var e=Ct(n);function n(t,r){var o;return It(this,n),o=e.call(this,t,r),te.set(Dt(o),{writable:!0,value:null}),o}return jt(n,[{key:"connect",value:function(t){var e=this;this.peer=t,void 0===t.peers.find((function(t){return t.peer===e}))&&t.peers.push(this)}},{key:"disconnect",value:function(t){var e=this;this.peer=null;var n=t.peers.findIndex((function(t){return t.peer===e}));-1!==n&&t.peers.splice(n,1)}},{key:"peer",get:function(){return Mt(this,te)},set:function(t){Lt(this,te,t)}}]),n}(Zt);function ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var re=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"NODE_WIDTH",get:function(){return 200}},{key:"NODE_BORDER_RADIUS",get:function(){return 15}},{key:"NODE_FILL_COLOR",get:function(){return"#FAD7A0"}},{key:"NODE_FUNCTIONAL_FILL_COLOR",get:function(){return"#C5F0FF"}},{key:"NODE_STROKE_COLOR",get:function(){return"#FAD7A0"}},{key:"NODE_FUNCTIONAL_STROKE_COLOR",get:function(){return"#C5F0FF"}},{key:"NODE_STROKE_WIDTH",get:function(){return 3}},{key:"NODE_TITLE_COLOR",get:function(){return"brown"}},{key:"NODE_FUNCTIONAL_TITLE_COLOR",get:function(){return"069DD1"}},{key:"NODE_TITLE_FONT",get:function(){return"bold 18px verdana"}},{key:"NODE_SYMBOL_STROKE_WIDTH",get:function(){return 3}},{key:"NODE_SYMBOL_STROKE_COLOR",get:function(){return"#FEF9E7"}},{key:"NODE_SYMBOL_FILL_COLOR",get:function(){return"#FEF9E7"}},{key:"NODE_PREV_NEXT_STROKE_WIDTH",get:function(){return 2}},{key:"NODE_PREV_NEXT_STROKE_COLOR",get:function(){return"#31A200"}},{key:"NODE_PREV_NEXT_FILL_COLOR",get:function(){return"#31A200"}},{key:"NODE_PREV_NEXT_NAME_FONT",get:function(){return"bold 11px verdana"}},{key:"NODE_PREV_NEXT_NAME_COLOR",get:function(){return"bold 11px black"}},{key:"NODE_PREV_NEXT_POINT_RADIUS",get:function(){return 8}},{key:"NODE_IO_STROKE_WIDTH",get:function(){return 2}},{key:"NODE_IO_STROKE_COLOR",get:function(){return"#008EBF"}},{key:"NODE_IO_FILL_COLOR",get:function(){return"#008EBF"}},{key:"NODE_IO_NAME_FONT",get:function(){return"bold 11px verdana"}},{key:"NODE_IO_NAME_COLOR",get:function(){return"bold 11px black"}},{key:"NODE_IO_POINT_RADIUS",get:function(){return 10}},{key:"CONNECTION_IO_WIDTH",get:function(){return 4}},{key:"CONNECTION_IO_INVALID_COLOR",get:function(){return"red"}},{key:"CONNECTION_IO_VALID_COLOR",get:function(){return"lightblue"}},{key:"CONNECTION_IO_COLOR",get:function(){return"#008EBF"}},{key:"CONNECTION_PREV_NEXT_WIDTH",get:function(){return 4}},{key:"CONNECTION_PREV_NEXT_INVALID_COLOR",get:function(){return"red"}},{key:"CONNECTION_PREV_NEXT_VALID_COLOR",get:function(){return"lightgreen"}},{key:"CONNECTION_PREV_NEXT_COLOR",get:function(){return"#31A200"}}])&&ne(e.prototype,n),t}();function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ie(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function ue(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(re,"current",new re);var ce=new WeakMap,ae=new WeakMap,se=new WeakMap,fe=new WeakMap,le=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ce.set(this,{writable:!0,value:null}),ae.set(this,{writable:!0,value:null}),se.set(this,{writable:!0,value:null}),fe.set(this,{writable:!0,value:null}),ue(this,se,e),ue(this,fe,n)}var e,n;return e=t,(n=[{key:"setup",value:function(){ue(this,ae,this.createElement())}},{key:"createElement",value:function(){throw new Error("Element must be defined in a subclass!")}},{key:"updateSVGElement",value:function(){throw new Error("Element must be defined in a subclass!")}},{key:"destroy",value:function(){}},{key:"canvas",get:function(){return ie(this,ce)},set:function(t){ue(this,ce,t)}},{key:"source",get:function(){return ie(this,se)},set:function(t){ue(this,se,t)}},{key:"target",get:function(){return ie(this,fe)},set:function(t){ue(this,fe,t)}},{key:"connectionEl",get:function(){return ie(this,ae)}},{key:"svgEl",get:function(){return ie(this,ce).svgEl}}])&&oe(e.prototype,n),t}();function pe(t){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function he(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ve(t,e){return(ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function be(t,e){return!e||"object"!==pe(e)&&"function"!=typeof e?de(t):e}function de(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function we(t,e,n){return(we="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=me(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function me(t){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=me(r);if(o){var n=me(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return be(this,t)});function u(t,e,n){var r,o,c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return ye(this,u),we((r=de(o=i.call(this,t,e)),me(u.prototype)),"setup",r).call(r),n.addConnection(de(o)),o.updateSVGElement(),c&&o.source.socket.connect(o.target.socket),o}return e=u,(n=[{key:"createElement",value:function(){return document.createElementNS("http://www.w3.org/2000/svg","path")}},{key:"updateSVGElement",value:function(){var t=new s(this.source.absPos.x,this.source.absPos.y),e=new s(this.target.absPos.x-re.current.NODE_PREV_NEXT_POINT_RADIUS,this.target.absPos.y),n=Math.max(.8*Math.abs(t.x-e.x),100),r=t.add(new s(n,-.1*(t.y-e.y))),o=e.add(new s(-n,.1*(t.y-e.y)));this.connectionEl.setAttribute("d","\n      M ".concat(t.x," ").concat(t.y,"\n      C ").concat(r.x," ").concat(r.y," ").concat(o.x," ").concat(o.y," ").concat(e.x," ").concat(e.y,"\n    ")),this.connectionEl.setAttribute("stroke-width",re.current.CONNECTION_PREV_NEXT_WIDTH),this.connectionEl.setAttribute("stroke",re.current.CONNECTION_PREV_NEXT_COLOR),this.connectionEl.setAttribute("marker-end","url(#prevnext-arrow)"),this.connectionEl.setAttribute("fill","transparent")}},{key:"destroy",value:function(){this.source.socket.disconnect(this.target.socket),we(me(u.prototype),"destroy",this).call(this)}}])&&he(e.prototype,n),u}(le);function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Se(t,e){return!e||"object"!==ge(e)&&"function"!=typeof e?Re(t):e}function Re(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ne(t){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ke=new WeakMap,Pe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ne(r);if(o){var n=Ne(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Se(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),e=i.call(this),ke.set(Re(e),{writable:!0,value:null}),function(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(Re(e),ke,t),e}return e=u,(n=[{key:"socket",get:function(){return function(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}(this,ke)}}])&&Ee(e.prototype,n),u}(X);function Ce(t){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function De(t,e){return(De=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ae(t,e){return!e||"object"!==Ce(e)&&"function"!=typeof e?Ie(t):e}function Ie(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xe(t,e,n){return(xe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=je(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function je(t){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Me=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&De(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=je(r);if(o){var n=je(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ae(this,t)});function u(t){var e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),xe((e=Ie(n=i.call(this,t)),je(u.prototype)),"setup",e).call(e),n}return e=u,(n=[{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","\n      M ".concat(-re.current.NODE_PREV_NEXT_POINT_RADIUS," ").concat(-re.current.NODE_PREV_NEXT_POINT_RADIUS,"\n      L ").concat(re.current.NODE_PREV_NEXT_POINT_RADIUS," ").concat(-re.current.NODE_PREV_NEXT_POINT_RADIUS,"\n      L ").concat(re.current.NODE_PREV_NEXT_POINT_RADIUS," ").concat(re.current.NODE_PREV_NEXT_POINT_RADIUS,"\n      L ").concat(-re.current.NODE_PREV_NEXT_POINT_RADIUS," ").concat(re.current.NODE_PREV_NEXT_POINT_RADIUS,"\n      Z\n      ")),t.setAttribute("stroke",re.current.NODE_PREV_NEXT_STROKE_COLOR),t.setAttribute("stroke-width",re.current.NODE_PREV_NEXT_STROKE_WIDTH),t.setAttribute("fill",re.current.NODE_PREV_NEXT_FILL_COLOR);var e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");e.style="\n      font: ".concat(re.current.NODE_PREV_NEXT_NAME_FONT,"; \n      color: ").concat(re.current.NODE_PREV_NEXT_NAME_COLOR,"; \n      text-align: left;\n      width: ").concat(re.current.NODE_WIDTH/2-15,"px;\n      height: 30px;\n      line-height: 30px;\n      user-select: none;\n      "),e.innerHTML="".concat(this.socket.name),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("transform","translate(".concat(15,", ",-15,")")),e.setAttribute("width",re.current.NODE_WIDTH/2-15),e.setAttribute("height",30);var n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.setAttribute("x",0),n.setAttribute("y",0),n.appendChild(t),n.appendChild(e),n}},{key:"connectionMoving",value:function(t,e,n){var r=new s(this.absPos.x,this.absPos.y),o=new s(this.currentPeerSocketComponent?this.currentPeerSocketComponent.absPos.x:t,this.currentPeerSocketComponent?this.currentPeerSocketComponent.absPos.y:e),i=Math.max(.8*Math.abs(r.x-o.x),100),u=r.add(new s(-i,-.1*(r.y-o.y))),c=o.add(new s(i,.1*(r.y-o.y)));this.tempConnectionEl.setAttribute("d","\n      M ".concat(this.absPos.x," ").concat(this.absPos.y,"\n      C ").concat(u.x," ").concat(u.y," ").concat(c.x," ").concat(c.y," ").concat(o.x," ").concat(o.y,"\n    ")),this.tempConnectionEl.setAttribute("stroke-width",re.current.CONNECTION_PREV_NEXT_WIDTH),this.tempConnectionEl.setAttribute("stroke",n?re.current.CONNECTION_PREV_NEXT_INVALID_COLOR:this.currentPeerSocketComponent?re.current.CONNECTION_PREV_NEXT_VALID_COLOR:re.current.CONNECTION_PREV_NEXT_COLOR),this.tempConnectionEl.setAttribute("fill","transparent")}},{key:"connectionDone",value:function(t){xe(je(u.prototype),"connectionDone",this).call(this,t),t.isConnected&&this.canvas.removeConnection(this.canvas.getConnectionsFor(t)[0]),new Oe(t,this,this.canvas)}},{key:"canAcceptPeerSocket",value:function(t){return t.socket instanceof ee}},{key:"hasSingleConnection",get:function(){return!1}}])&&Te(e.prototype,n),u}(Pe);function Le(t){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ve(t,e){return(Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function We(t,e){return!e||"object"!==Le(e)&&"function"!=typeof e?Ue(t):e}function Ue(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Be(t,e,n){return(Be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xe(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Xe(t){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var He=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ve(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xe(r);if(o){var n=Xe(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return We(this,t)});function u(t){var e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Be((e=Ue(n=i.call(this,t)),Xe(u.prototype)),"setup",e).call(e),n}return e=u,(n=[{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","\n      M -7 -8\n      L 7 -8\n      L 12 0\n      L 7 8\n      L -7 8\n      Z\n      "),t.setAttribute("stroke",re.current.NODE_PREV_NEXT_STROKE_COLOR),t.setAttribute("stroke-width",re.current.NODE_PREV_NEXT_STROKE_WIDTH),t.setAttribute("fill",re.current.NODE_PREV_NEXT_FILL_COLOR);var e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");e.style="\n      font: ".concat(re.current.NODE_PREV_NEXT_NAME_FONT,"; \n      color: ").concat(re.current.NODE_PREV_NEXT_NAME_COLOR,"; \n      text-align: right;\n      width: ").concat(re.current.NODE_WIDTH/2-15,"px;\n      height: 30px;\n      line-height: 30px;\n      user-select: none;\n      "),e.innerHTML="".concat(this.socket.name),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("transform","translate(".concat(-re.current.NODE_WIDTH/2,", ").concat(-15,")")),e.setAttribute("width",re.current.NODE_WIDTH/2-15),e.setAttribute("height",30);var n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.setAttribute("x",0),n.setAttribute("y",0),n.appendChild(t),n.appendChild(e),n}},{key:"canAcceptPeerSocket",value:function(t){return t.socket instanceof Jt}},{key:"connectionMoving",value:function(t,e,n){var r=new s(this.absPos.x,this.absPos.y),o=new s(this.currentPeerSocketComponent?this.currentPeerSocketComponent.absPos.x:t,this.currentPeerSocketComponent?this.currentPeerSocketComponent.absPos.y:e),i=Math.max(.8*Math.abs(r.x-o.x),100),u=r.add(new s(i,-.1*(r.y-o.y))),c=o.add(new s(-i,.1*(r.y-o.y)));this.tempConnectionEl.setAttribute("d","\n      M ".concat(this.absPos.x," ").concat(this.absPos.y,"\n      C ").concat(u.x," ").concat(u.y," ").concat(c.x," ").concat(c.y," ").concat(o.x," ").concat(o.y,"\n    ")),this.tempConnectionEl.setAttribute("stroke-width",re.current.CONNECTION_PREV_NEXT_WIDTH),this.tempConnectionEl.setAttribute("stroke",n?re.current.CONNECTION_PREV_NEXT_INVALID_COLOR:this.currentPeerSocketComponent?re.current.CONNECTION_PREV_NEXT_VALID_COLOR:re.current.CONNECTION_PREV_NEXT_COLOR),this.tempConnectionEl.setAttribute("fill","transparent")}},{key:"connectionDone",value:function(t){Be(Xe(u.prototype),"connectionDone",this).call(this,t),new Oe(this,t,this.canvas)}},{key:"canAcceptPeerSocket",value:function(t){return t.socket instanceof Jt}},{key:"hasSingleConnection",get:function(){return!0}}])&&Fe(e.prototype,n),u}(Pe);function Ge(t){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $e(t,e){return($e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qe(t,e){return!e||"object"!==Ge(e)&&"function"!=typeof e?Qe(t):e}function Qe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ze(t,e,n){return(Ze="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ze(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ze(t){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Je=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$e(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ze(r);if(o){var n=ze(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return qe(this,t)});function u(t,e,n){var r,o,c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Ye(this,u),Ze((r=Qe(o=i.call(this,t,e)),ze(u.prototype)),"setup",r).call(r),n.addConnection(Qe(o)),o.updateSVGElement(),c&&o.source.socket.connect(o.target.socket),o}return e=u,(n=[{key:"createElement",value:function(){return document.createElementNS("http://www.w3.org/2000/svg","path")}},{key:"updateSVGElement",value:function(){var t=new s(this.source.absPos.x,this.source.absPos.y),e=new s(this.target.absPos.x-re.current.NODE_IO_POINT_RADIUS,this.target.absPos.y),n=Math.max(.8*Math.abs(t.x-e.x),100),r=t.add(new s(n,-.1*(t.y-e.y))),o=e.add(new s(-n,.1*(t.y-e.y)));this.connectionEl.setAttribute("d","\n      M ".concat(t.x," ").concat(t.y,"\n      C ").concat(r.x," ").concat(r.y," ").concat(o.x," ").concat(o.y," ").concat(e.x," ").concat(e.y,"\n    ")),this.connectionEl.setAttribute("stroke-width",re.current.CONNECTION_IO_WIDTH),this.connectionEl.setAttribute("stroke",re.current.CONNECTION_IO_COLOR),this.connectionEl.setAttribute("marker-end","url(#io-arrow)"),this.connectionEl.setAttribute("fill","transparent")}},{key:"destroy",value:function(){this.source.socket.disconnect(this.target.socket),Ze(ze(u.prototype),"destroy",this).call(this)}}])&&Ke(e.prototype,n),u}(le);function tn(t){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function en(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nn(t,e){return(nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rn(t,e){return!e||"object"!==tn(e)&&"function"!=typeof e?on(t):e}function on(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function un(t,e,n){return(un="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function cn(t){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var an=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nn(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=cn(r);if(o){var n=cn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return rn(this,t)});function u(t){var e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),un((e=on(n=i.call(this,t)),cn(u.prototype)),"setup",e).call(e),n}return e=u,(n=[{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","circle");t.setAttribute("cx",0),t.setAttribute("cy",0),t.setAttribute("r",re.current.NODE_IO_POINT_RADIUS),t.setAttribute("stroke-width",re.current.NODE_IO_STROKE_WIDTH),t.setAttribute("stroke",re.current.NODE_IO_STROKE_COLOR),t.setAttribute("fill",re.current.NODE_IO_FILL_COLOR);var e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");e.style="\n      font: ".concat(re.current.NODE_IO_NAME_FONT,"; \n      color: ").concat(re.current.NODE_IO_NAME_COLOR,"; \n      text-align: right;\n      width: ").concat(re.current.NODE_WIDTH-30,"px;\n      height: 30px;\n      line-height: 30px;\n      user-select: none;\n      "),e.innerHTML="".concat(this.socket.name),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("transform","translate(".concat(15-re.current.NODE_WIDTH,", ").concat(-15,")")),e.setAttribute("width",re.current.NODE_WIDTH-30),e.setAttribute("height",30);var n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.setAttribute("x",0),n.setAttribute("y",0),n.appendChild(t),n.appendChild(e),n}},{key:"connectionMoving",value:function(t,e,n){var r=new s(this.absPos.x,this.absPos.y),o=new s(this.currentPeerSocketComponent?this.currentPeerSocketComponent.absPos.x:t,this.currentPeerSocketComponent?this.currentPeerSocketComponent.absPos.y:e),i=Math.max(.8*Math.abs(r.x-o.x),100),u=r.add(new s(i,-.1*(r.y-o.y))),c=o.add(new s(-i,.1*(r.y-o.y)));this.tempConnectionEl.setAttribute("d","\n      M ".concat(this.absPos.x," ").concat(this.absPos.y,"\n      C ").concat(u.x," ").concat(u.y," ").concat(c.x," ").concat(c.y," ").concat(o.x," ").concat(o.y,"\n    ")),this.tempConnectionEl.setAttribute("stroke-width",re.current.CONNECTION_IO_WIDTH),this.tempConnectionEl.setAttribute("stroke",n?re.current.CONNECTION_IO_INVALID_COLOR:this.currentPeerSocketComponent?re.current.CONNECTION_IO_VALID_COLOR:re.current.CONNECTION_IO_COLOR),this.tempConnectionEl.setAttribute("fill","transparent")}},{key:"connectionDone",value:function(t){un(cn(u.prototype),"connectionDone",this).call(this,t),t.isConnected&&this.canvas.removeConnection(this.canvas.getConnectionsFor(t)[0]),new Je(this,t,this.canvas)}},{key:"canAcceptPeerSocket",value:function(t){return t.socket instanceof $t}},{key:"hasSingleConnection",get:function(){return!1}}])&&en(e.prototype,n),u}(Pe);function sn(t){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ln(t,e){return(ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pn(t,e){return!e||"object"!==sn(e)&&"function"!=typeof e?yn(t):e}function yn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hn(t,e,n){return(hn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function vn(t){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ln(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=vn(r);if(o){var n=vn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return pn(this,t)});function u(t){var e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),hn((e=yn(n=i.call(this,t)),vn(u.prototype)),"setup",e).call(e),n}return e=u,(n=[{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","circle");t.setAttribute("cx",0),t.setAttribute("cy",0),t.setAttribute("r",re.current.NODE_IO_POINT_RADIUS),t.setAttribute("stroke-width",re.current.NODE_IO_STROKE_WIDTH),t.setAttribute("stroke",re.current.NODE_IO_STROKE_COLOR),t.setAttribute("fill",re.current.NODE_IO_FILL_COLOR);var e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");e.style="\n      font: ".concat(re.current.NODE_IO_NAME_FONT,"; \n      color: ").concat(re.current.NODE_IO_NAME_COLOR,"; \n      text-align: left;\n      width: ").concat(re.current.NODE_WIDTH/2-15,"px;\n      height: 30px;\n      line-height: 30px;\n      user-select: none;\n    "),e.innerHTML="".concat(this.socket.name),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("transform","translate(".concat(15,", ",-15,")")),e.setAttribute("width",re.current.NODE_WIDTH/2-15),e.setAttribute("height",30);var n=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");n.style="\n      font: ".concat(re.current.NODE_IO_NAME_FONT,"; \n      color: ").concat(re.current.NODE_IO_NAME_COLOR,"; \n      text-align: left;\n      line-height: 30px;\n      user-select: none;\n    "),n.setAttribute("x",0),n.setAttribute("y",0),n.setAttribute("transform","translate(".concat(re.current.NODE_WIDTH/2,", ").concat(-15,")")),n.setAttribute("width",re.current.NODE_WIDTH/2-15),n.setAttribute("height",30);var r=document.createElement("input");r.style="\n      font: ".concat(re.current.NODE_IO_NAME_FONT,"; \n      color: ").concat(re.current.NODE_IO_NAME_COLOR,"; \n      width: ").concat(re.current.NODE_WIDTH/2-25,"px; // 5px less than foreignObject\n      height: ",20,"px;\n      border: 0;\n      padding: 2px;\n      margin: 2px;\n    "),r.setAttribute("value",this.socket.value),r.setAttribute("type","text"),n.appendChild(r);var o=document.createElementNS("http://www.w3.org/2000/svg","g");return o.setAttribute("x",0),o.setAttribute("y",0),o.appendChild(t),o.appendChild(e),o.appendChild(n),o}},{key:"connectionMoving",value:function(t,e,n){var r=new s(this.absPos.x,this.absPos.y),o=new s(this.currentPeerSocketComponent?this.currentPeerSocketComponent.absPos.x:t,this.currentPeerSocketComponent?this.currentPeerSocketComponent.absPos.y:e),i=Math.max(.8*Math.abs(r.x-o.x),100),u=r.add(new s(-i,-.1*(r.y-o.y))),c=o.add(new s(i,.1*(r.y-o.y)));this.tempConnectionEl.setAttribute("d","\n      M ".concat(this.absPos.x," ").concat(this.absPos.y,"\n      C ").concat(u.x," ").concat(u.y," ").concat(c.x," ").concat(c.y," ").concat(o.x," ").concat(o.y,"\n    ")),this.tempConnectionEl.setAttribute("stroke-width",re.current.CONNECTION_IO_WIDTH),this.tempConnectionEl.setAttribute("stroke",n?re.current.CONNECTION_IO_INVALID_COLOR:this.currentPeerSocketComponent?re.current.CONNECTION_IO_VALID_COLOR:re.current.CONNECTION_IO_COLOR),this.tempConnectionEl.setAttribute("fill","transparent")}},{key:"connectionDone",value:function(t){hn(vn(u.prototype),"connectionDone",this).call(this,t),new Je(t,this,this.canvas)}},{key:"canAcceptPeerSocket",value:function(t){return t.socket instanceof Qt}},{key:"hasSingleConnection",get:function(){return!0}}])&&fn(e.prototype,n),u}(Pe);function dn(t){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wn(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return mn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}function mn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function On(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gn(t,e){return(gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function En(t,e){return!e||"object"!==dn(e)&&"function"!=typeof e?_n(t):e}function _n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sn(t,e,n){return(Sn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Rn(t){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nn(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function kn(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var Pn=new WeakMap,Cn=new WeakMap,Tn=new WeakMap,Dn=new WeakMap,An=new WeakSet,In=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gn(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Rn(r);if(o){var n=Rn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return En(this,t)});function u(t,e){var n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),r=i.call(this),An.add(_n(r)),Pn.set(_n(r),{writable:!0,value:void 0}),Cn.set(_n(r),{writable:!0,value:void 0}),Tn.set(_n(r),{writable:!0,value:void 0}),Dn.set(_n(r),{writable:!0,value:void 0}),kn(_n(r),Pn,t),Sn((n=_n(r),Rn(u.prototype)),"setup",n).call(n),e.addComponent(_n(r)),function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(_n(r),An,xn).call(_n(r)),r}return e=u,(n=[{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return kn(this,Cn,document.createElementNS("http://www.w3.org/2000/svg","path")),kn(this,Tn,document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),kn(this,Dn,document.createElementNS("http://www.w3.org/2000/svg","circle")),t.appendChild(Nn(this,Cn)),t.appendChild(Nn(this,Tn)),t.appendChild(Nn(this,Dn)),Nn(this,Cn).setAttribute("d","\n      M 0 ".concat(1.3*re.current.NODE_BORDER_RADIUS," \n      A ").concat(1.3*re.current.NODE_BORDER_RADIUS," ").concat(1.3*re.current.NODE_BORDER_RADIUS," 0 0 0 ").concat(1.3*re.current.NODE_BORDER_RADIUS," 0 \n      L ").concat(re.current.NODE_WIDTH-re.current.NODE_BORDER_RADIUS," 0 \n      A ").concat(re.current.NODE_BORDER_RADIUS," ").concat(re.current.NODE_BORDER_RADIUS," 0 0 1 ").concat(re.current.NODE_WIDTH," ").concat(re.current.NODE_BORDER_RADIUS," \n      L ").concat(re.current.NODE_WIDTH," ").concat(this.height-re.current.NODE_BORDER_RADIUS," \n      A ").concat(re.current.NODE_BORDER_RADIUS," ").concat(re.current.NODE_BORDER_RADIUS," 0 0 1 ").concat(re.current.NODE_WIDTH-re.current.NODE_BORDER_RADIUS," ").concat(this.height," \n      L ").concat(re.current.NODE_BORDER_RADIUS," ").concat(this.height," \n      A ").concat(re.current.NODE_BORDER_RADIUS," ").concat(re.current.NODE_BORDER_RADIUS," 0 0 1 0 ").concat(this.height-re.current.NODE_BORDER_RADIUS," \n      Z\n      ")),Nn(this,Tn).innerHTML=this.node.name,Nn(this,Tn).style="\n      font: ".concat(re.current.NODE_TITLE_FONT,"; \n      color: ").concat(this.node.functional?re.current.NODE_FUNCTIONAL_TITLE_COLOR:re.current.NODE_TITLE_COLOR,"; \n      text-align: center; \n      user-select: none"),Nn(this,Tn).setAttribute("x",.5*re.current.NODE_BORDER_RADIUS),Nn(this,Tn).setAttribute("y",.5*re.current.NODE_BORDER_RADIUS),Nn(this,Tn).setAttribute("width",re.current.NODE_WIDTH-.5*re.current.NODE_BORDER_RADIUS*2),Nn(this,Tn).setAttribute("height",20),Nn(this,Cn).setAttribute("stroke",this.node.functional?re.current.NODE_FUNCTIONAL_STROKE_COLOR:re.current.NODE_STROKE_COLOR),Nn(this,Cn).setAttribute("stroke-width",re.current.NODE_STROKE_WIDTH),Nn(this,Cn).setAttribute("fill",this.node.functional?re.current.NODE_FUNCTIONAL_FILL_COLOR:re.current.NODE_FILL_COLOR),Nn(this,Cn).setAttribute("x","0"),Nn(this,Cn).setAttribute("y","0"),Nn(this,Dn).setAttribute("cx",0),Nn(this,Dn).setAttribute("cy",0),Nn(this,Dn).setAttribute("r",.9*re.current.NODE_BORDER_RADIUS),Nn(this,Dn).setAttribute("stroke",re.current.NODE_SYMBOL_STROKE_COLOR),Nn(this,Dn).setAttribute("stroke-width",re.current.NODE_SYMBOL_STROKE_WIDTH),Nn(this,Dn).setAttribute("fill",re.current.NODE_SYMBOL_FILL_COLOR),t.setAttribute("x","0"),t.setAttribute("y","0"),t}},{key:"getCnodesSocketComponentFromSocket",value:function(t){return this.components.find((function(e){return e instanceof Pe&&e.socket===t}))}},{key:"node",get:function(){return Nn(this,Pn)}},{key:"height",get:function(){return.5*re.current.NODE_BORDER_RADIUS+40+30*Math.max(this.node.functional?0:1,this.node.nexts.length)+30*Math.max(0,this.node.outputs.length)+30*Math.max(0,this.node.inputs.length)+15}}])&&On(e.prototype,n),u}(k),xn=function(){var t=40+.5*re.current.NODE_BORDER_RADIUS;if(this.node.prev){var e=new Me(this.node.prev);e.pos=new s(0,t),this.addComponent(e)}var n,r=wn(this.node.nexts);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=new He(o);i.pos=new s(re.current.NODE_WIDTH,t),this.addComponent(i),t+=30}}catch(t){r.e(t)}finally{r.f()}var u,c=wn(this.node.outputs);try{for(c.s();!(u=c.n()).done;){var a=u.value,f=new an(a);f.pos=new s(re.current.NODE_WIDTH,t),this.addComponent(f),t+=30}}catch(t){c.e(t)}finally{c.f()}var l,p=wn(this.node.inputs);try{for(p.s();!(l=p.n()).done;){var y=l.value,h=new bn(y);h.pos=new s(0,t),this.addComponent(h),t+=30}}catch(t){p.e(t)}finally{p.f()}};function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mn(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ln(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}function Ln(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vn(t,e,n){return(Vn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Wn(t,e){return(Wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Un(t,e){return!e||"object"!==jn(e)&&"function"!=typeof e?Bn(t):e}function Bn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xn(t){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hn(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}function Gn(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}var Yn=new WeakMap,Kn=new WeakSet,$n=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wn(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xn(r);if(o){var n=Xn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Un(this,t)});function u(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),e=i.call(this,t),Kn.add(Bn(e)),Yn.set(Bn(e),{writable:!0,value:null});var n=document.createElementNS("http://www.w3.org/2000/svg","marker");n.setAttribute("id","io-arrow"),n.setAttribute("viewBox","0 0 10 10"),n.setAttribute("refX","7"),n.setAttribute("refY","5"),n.setAttribute("markerWidth","5"),n.setAttribute("markerHeight","5"),n.setAttribute("fill",re.current.CONNECTION_IO_COLOR),n.setAttribute("orient","auto-start-reverse");var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d","M 0 0 L 10 5 L 0 10 Z"),n.appendChild(r);var o=document.createElementNS("http://www.w3.org/2000/svg","marker");o.setAttribute("id","prevnext-arrow"),o.setAttribute("viewBox","0 0 10 10"),o.setAttribute("refX","7"),o.setAttribute("refY","5"),o.setAttribute("markerWidth","5"),o.setAttribute("markerHeight","5"),o.setAttribute("fill",re.current.CONNECTION_PREV_NEXT_COLOR),o.setAttribute("orient","auto-start-reverse");var c=document.createElementNS("http://www.w3.org/2000/svg","path");return c.setAttribute("d","M 0 0 L 10 5 L 0 10 Z"),o.appendChild(c),e.svgEl.appendChild(n),e.svgEl.appendChild(o),e}return e=u,(n=[{key:"run",value:function(){Gn(this,Yn).process()}},{key:"addComponent",value:function(t){Vn(Xn(u.prototype),"addComponent",this).call(this,t),t instanceof In&&this.program&&this.program.addNode(t.node)}},{key:"removeComponent",value:function(t){Vn(Xn(u.prototype),"removeComponent",this).call(this,t),t instanceof In&&this.program&&this.program.removeNode(t.node)}},{key:"getCnodeComponentFromCnode",value:function(t){return this.components.find((function(e){return e instanceof In&&e.node===t}))}},{key:"alreadyConnected",value:function(t,e){return-1!==this.connections.findIndex((function(n){return n.source===t&&n.target===e||n.source===e&&n.target===t}))}},{key:"program",get:function(){return Gn(this,Yn)},set:function(t){(function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n})(this,Kn,qn).call(this,t),Hn(this,Yn,t)}}])&&Fn(e.prototype,n),u}(lt),qn=function(t){Hn(this,Yn,null),this.removeAll();var e,n=Mn(t.nodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,o=new In(r,this);o.moveable=!0,o.pos=new s(100,100)}}catch(t){n.e(t)}finally{n.f()}var i,u=Mn(t.nodes);try{for(u.s();!(i=u.n()).done;){var c=i.value,a=this.getCnodeComponentFromCnode(c);if(c.prev&&c.prev.peers.length>0){var f,l=Mn(c.prev.peers);try{for(l.s();!(f=l.n()).done;){var p=f.value,y=a.getCnodesSocketComponentFromSocket(c.prev),h=this.getCnodeComponentFromCnode(p.node).getCnodesSocketComponentFromSocket(p);this.alreadyConnected(h,y)||new Oe(h,y,this,!1)}}catch(t){l.e(t)}finally{l.f()}}var v,b=Mn(c.nexts);try{for(b.s();!(v=b.n()).done;){var d=v.value;if(d.peer){var w=a.getCnodesSocketComponentFromSocket(d),m=this.getCnodeComponentFromCnode(d.peer.node).getCnodesSocketComponentFromSocket(d.peer);this.alreadyConnected(m,w)||new Oe(w,m,this,!1)}}}catch(t){b.e(t)}finally{b.f()}var O,g=Mn(c.inputs);try{for(g.s();!(O=g.n()).done;){var E=O.value;if(E.peer){var _=a.getCnodesSocketComponentFromSocket(E),S=this.getCnodeComponentFromCnode(E.peer.node).getCnodesSocketComponentFromSocket(E.peer);this.alreadyConnected(S,_)||new Je(S,_,this,!1)}}}catch(t){g.e(t)}finally{g.f()}var R,N=Mn(c.outputs);try{for(N.s();!(R=N.n()).done;){var k=R.value;if(k.peers.length>0){var P,C=Mn(k.peers);try{for(C.s();!(P=C.n()).done;){var T=P.value,D=a.getCnodesSocketComponentFromSocket(k),A=this.getCnodeComponentFromCnode(T.node).getCnodesSocketComponentFromSocket(T);this.alreadyConnected(A,D)||new Je(D,A,this,!1)}}catch(t){C.e(t)}finally{C.f()}}}}catch(t){N.e(t)}finally{N.f()}}}catch(t){u.e(t)}finally{u.f()}};function Qn(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Zn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}function Zn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tr(t,e,n){return e&&Jn(t.prototype,e),n&&Jn(t,n),t}function er(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function nr(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var rr=new WeakMap,or=new WeakMap,ir=new WeakMap,ur=new WeakMap,cr=new WeakMap,ar=new WeakMap,sr=new WeakMap,fr=new WeakMap,lr=function(){function t(e){zn(this,t),rr.set(this,{writable:!0,value:null}),or.set(this,{writable:!0,value:""}),ir.set(this,{writable:!0,value:!1}),ur.set(this,{writable:!0,value:[]}),cr.set(this,{writable:!0,value:[]}),ar.set(this,{writable:!0,value:[]}),sr.set(this,{writable:!0,value:null}),fr.set(this,{writable:!0,value:null}),nr(this,or,e),nr(this,rr,"NID_"+t.lastNodeIdIndex++)}return tr(t,[{key:"input",value:function(t){return this.inputs.find((function(e){return e.name===t}))}},{key:"output",value:function(t){return this.outputs.find((function(e){return e.name===t}))}},{key:"next",value:function(t){return t?this.nexts.find((function(e){return e.name===t})):this.nexts[0]}},{key:"evaluateInputs",value:function(){var t,e=Qn(this.inputs);try{for(e.s();!(t=e.n()).done;)t.value.evaluate()}catch(t){e.e(t)}finally{e.f()}}},{key:"getFlowResult",value:function(t){return t.peer?new yr(t.peer.node):new yr}},{key:"disconnectAllSockets",value:function(){er(this,sr)&&er(this,sr).peer&&er(this,sr).disconnect();var t,e=Qn(er(this,ur));try{for(e.s();!(t=e.n()).done;){var n=t.value;n.peer&&n.disconnect()}}catch(t){e.e(t)}finally{e.f()}var r,o=Qn(er(this,cr));try{for(o.s();!(r=o.n()).done;)for(var i=r.value;i.peers.length>0;)i.peers[0].disconnect()}catch(t){o.e(t)}finally{o.f()}var u,c=Qn(er(this,ar));try{for(c.s();!(u=c.n()).done;){var a=u.value;a.peer&&a.disconnect()}}catch(t){c.e(t)}finally{c.f()}}},{key:"process",value:function(){return new yr}},{key:"id",get:function(){return er(this,rr)},set:function(t){nr(this,rr,t)}},{key:"name",get:function(){return er(this,or)},set:function(t){nr(this,or,t)}},{key:"functional",get:function(){return er(this,ir)},set:function(t){nr(this,ir,t)}},{key:"inputs",get:function(){return er(this,ur)},set:function(t){nr(this,ur,t)}},{key:"outputs",get:function(){return er(this,cr)},set:function(t){nr(this,cr,t)}},{key:"nexts",get:function(){return er(this,ar)},set:function(t){nr(this,ar,t)}},{key:"prev",get:function(){return er(this,sr)},set:function(t){nr(this,sr,t)}},{key:"program",get:function(){return er(this,fr)},set:function(t){nr(this,fr,t)}}]),t}();!function(t,e,n){e in t?Object.defineProperty(t,e,{value:0,enumerable:!0,configurable:!0,writable:!0}):t[e]=0}(lr,"lastNodeIdIndex");var pr=new WeakMap,yr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;zn(this,t),pr.set(this,{writable:!0,value:null}),nr(this,pr,e)}return tr(t,[{key:"next",get:function(){return er(this,pr)},set:function(t){nr(this,pr,t)}}]),t}();function hr(t){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function br(t,e){return(br=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dr(t,e){return!e||"object"!==hr(e)&&"function"!=typeof e?wr(t):e}function wr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mr(t){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Or=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&br(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=mr(r);if(o){var n=mr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return dr(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"Enter")).inputs=[new $t("Val",wr(t),Rt(gt.ANY,!1),0)],t.outputs=[new Qt("Val",wr(t),Rt(gt.ANY,!1),0)],t.nexts=[new ee("Begin",wr(t))],t.prev=null,t}return e=u,(n=[{key:"process",value:function(){return this.evaluateInputs(),this.output("Val").value=this.input("Val").value,this.output("Val").type=this.input("Val").type,this.getFlowResult(this.next("Begin"))}}])&&vr(e.prototype,n),u}(lr);function gr(){return new Or}function Er(t){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sr(t,e){return(Sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rr(t,e){return!e||"object"!==Er(e)&&"function"!=typeof e?Nr(t):e}function Nr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kr(t){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sr(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=kr(r);if(o){var n=kr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Rr(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"Exit")).inputs=[new $t("Val",Nr(t),Rt(gt.ANY,!1),0)],t.outputs=[new Qt("Val",Nr(t),Rt(gt.ANY,!1),0)],t.nexts=[],t.prev=new Jt("End",Nr(t)),t}return e=u,(n=[{key:"process",value:function(){return this.evaluateInputs(),this.output("Val").value=this.input("Val").value,this.output("Val").type=this.input("Val").type,new yr}}])&&_r(e.prototype,n),u}(lr);function Cr(){return new Pr}function Tr(t){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ar(t,e){return(Ar=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ir(t,e){return!e||"object"!==Tr(e)&&"function"!=typeof e?xr(t):e}function xr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jr(t){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Mr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ar(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=jr(r);if(o){var n=jr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ir(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"Call")).inputs=[],t.outputs=[],t.nexts=[new ee("Out",xr(t)),new ee("Call",xr(t))],t.prev=new Jt("In",xr(t)),t}return e=u,(n=[{key:"process",value:function(){var t=this.program.currentNode;return this.program.processFrom(this.next("Call").peer.node),this.program.currentNode=t,this.getFlowResult(this.next("Out"))}}])&&Dr(e.prototype,n),u}(lr);function Lr(){return new Mr}function Fr(t){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wr(t,e){return(Wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ur(t,e){return!e||"object"!==Fr(e)&&"function"!=typeof e?Br(t):e}function Br(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xr(t){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Hr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wr(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xr(r);if(o){var n=Xr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ur(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"Console")).inputs=[new $t("Val",Br(t),Rt(gt.ANY,!1),0)],t.outputs=[],t.nexts=[new ee("Out",Br(t))],t.prev=new Jt("In",Br(t)),t}return e=u,(n=[{key:"process",value:function(){return this.evaluateInputs(),console.log(this.input("Val").value),this.getFlowResult(this.next("Out"))}}])&&Vr(e.prototype,n),u}(lr);function Gr(){return new Hr}function Yr(t){return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $r(t,e){return($r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qr(t,e){return!e||"object"!==Yr(e)&&"function"!=typeof e?Qr(t):e}function Qr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zr(t){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$r(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Zr(r);if(o){var n=Zr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return qr(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"FGetvar")).functional=!0,t.inputs=[new $t("Name",Qr(t),Yr(""),"")],t.outputs=[new Qt("Val",Qr(t),Yr(""),"")],t.nexts=[],t.prev=null,t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs();var t=this.input("Name").value;this.output("Val").value=this.program.vars.get(t)}}])&&Kr(e.prototype,n),u}(lr);function Jr(){return new zr}function to(t){return(to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function no(t,e){return(no=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ro(t,e){return!e||"object"!==to(e)&&"function"!=typeof e?oo(t):e}function oo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function io(t){return(io=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&no(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=io(r);if(o){var n=io(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ro(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"For")).inputs=[new $t("From",oo(t),new St(gt.NUMBER,!1),!1),new $t("To",oo(t),new St(gt.NUMBER,!1),!1)],t.outputs=[new Qt("Index",oo(t),new St(gt.NUMBER,!1),!1)],t.nexts=[new ee("Out",oo(t)),new ee("Do",oo(t))],t.prev=new Jt("In",oo(t)),t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs();for(var t=this.program.currentNode,e=this.input("From").value;e<this.input("To").value;e++)null!==this.next("Do").peer&&null!==this.next("Do").peer.node&&(this.output("Index").value=e,this.program.processFrom(this.next("Do").peer.node));return this.program.currentNode=t,this.getFlowResult(this.next("Out"))}}])&&eo(e.prototype,n),u}(lr);function co(){return new uo}function ao(t){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function so(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fo(t,e){return(fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lo(t,e){return!e||"object"!==ao(e)&&"function"!=typeof e?po(t):e}function po(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yo(t){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ho=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fo(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=yo(r);if(o){var n=yo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return lo(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"Getvar")).inputs=[new $t("Name",po(t),ao(""),"")],t.outputs=[new Qt("Val",po(t),ao(""),"")],t.nexts=[new ee("Out",po(t))],t.prev=new Jt("In",po(t)),t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs();var t=this.input("Name").value;return this.output("Val").value=this.program.vars.get(t),this.getFlowResult(this.next("Out"))}}])&&so(e.prototype,n),u}(lr);function vo(){return new ho}function bo(t){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mo(t,e){return(mo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oo(t,e){return!e||"object"!==bo(e)&&"function"!=typeof e?go(t):e}function go(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Eo(t){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _o=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mo(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Eo(r);if(o){var n=Eo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Oo(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"Setvar")).inputs=[new $t("Name",go(t),bo(""),""),new $t("Val",go(t),bo(""),"")],t.outputs=[new Qt("Val",go(t),bo(""),"")],t.nexts=[new ee("Out",go(t))],t.prev=new Jt("In",go(t)),t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs();var t=this.input("Name").value,e=this.input("Val").value;return this.program.vars.set(t,e),this.output("Val").value=e,this.getFlowResult(this.next("Out"))}}])&&wo(e.prototype,n),u}(lr);function So(){return new _o}function Ro(t){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function No(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ko(t,e){return(ko=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Po(t,e){return!e||"object"!==Ro(e)&&"function"!=typeof e?Co(t):e}function Co(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function To(t){return(To=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Do=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ko(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=To(r);if(o){var n=To(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Po(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"While")).inputs=[new $t("Condition",Co(t),new St(gt.BOOLEAN,!1),!1)],t.outputs=[new Qt("Index",Co(t),new St(gt.NUMBER,!1),!1)],t.nexts=[new ee("Out",Co(t)),new ee("Do",Co(t))],t.prev=new Jt("In",Co(t)),t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs();for(var t=this.program.currentNode;this.input("Condition").value;)null!==this.nexts("Do").peer&&null!==this.nexts("Do").peer.node&&(this.output("Index").value=0,this.program.processFrom(this.next("Do").peer.node),this.evaluateInputs());return this.program.currentNode=t,this.getFlowResult(this.next("Out"))}}])&&No(e.prototype,n),u}(lr);function Ao(){return new Do}function Io(t){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jo(t,e){return(jo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mo(t,e){return!e||"object"!==Io(e)&&"function"!=typeof e?Lo(t):e}function Lo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fo(t){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jo(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Fo(r);if(o){var n=Fo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Mo(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"If")).inputs=[new $t("Condition",Lo(t),new St(gt.BOOLEAN,!1),!1)],t.outputs=[],t.nexts=[new ee("Then",Lo(t)),new ee("Else",Lo(t))],t.prev=new Jt("In",Lo(t)),t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs();var t;return t=this.input("Condition").value?this.next("Then"):this.next("Else"),this.getFlowResult(t)}}])&&xo(e.prototype,n),u}(lr);function Wo(){return new Vo}function Uo(t){return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ho(t,e){return(Ho=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Go(t,e){return!e||"object"!==Uo(e)&&"function"!=typeof e?Yo(t):e}function Yo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ko(t){return(Ko=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $o=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ho(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ko(r);if(o){var n=Ko(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Go(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"FAdd")).functional=!0,t.inputs=[new $t("Val1",Yo(t),Rt(gt.NUMBER,!1),0),new $t("Val2",Yo(t),Rt(gt.NUMBER,!1),0)],t.outputs=[new Qt("Val",Yo(t),Rt(gt.NUMBER,!1),0)],t.prev=null,t.nexts=[],t}return e=u,(n=[{key:"process",value:function(){var t=0;this.evaluateInputs();var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Bo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bo(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}(this.inputs);try{for(n.s();!(e=n.n()).done;)t+=e.value.value}catch(t){n.e(t)}finally{n.f()}this.output("Val").value=t}}])&&Xo(e.prototype,n),u}(lr);function qo(){return new $o}function Qo(t){return(Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zo(t,e){return(zo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jo(t,e){return!e||"object"!==Qo(e)&&"function"!=typeof e?ti(t):e}function ti(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ei(t){return(ei=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ni=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zo(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ei(r);if(o){var n=ei(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Jo(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"FDiv")).functional=!0,t.inputs=[new $t("Val1",ti(t),Rt(gt.NUMBER,!1),0),new $t("Val2",ti(t),Rt(gt.NUMBER,!1),0)],t.outputs=[new Qt("Val",ti(t),Rt(gt.NUMBER,!1),0)],t.prev=null,t.nexts=[],t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs(),this.output("Val").value=this.input("Val1").value/this.input("Val2").value}}])&&Zo(e.prototype,n),u}(lr);function ri(){return new ni}function oi(t){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ii(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ui(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ci(t,e){return(ci=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ai(t,e){return!e||"object"!==oi(e)&&"function"!=typeof e?si(t):e}function si(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fi(t){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var li=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ci(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fi(r);if(o){var n=fi(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ai(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"FMul")).functional=!0,t.inputs=[new $t("Val1",si(t),Rt(gt.NUMBER,!1),0),new $t("Val2",si(t),Rt(gt.NUMBER,!1),0)],t.outputs=[new Qt("Val",si(t),Rt(gt.NUMBER,!1),0)],t.prev=null,t.nexts=[],t}return e=u,(n=[{key:"process",value:function(){var t=0;this.evaluateInputs();var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ii(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ii(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}(this.inputs);try{for(n.s();!(e=n.n()).done;)t*=e.value.value}catch(t){n.e(t)}finally{n.f()}this.output("Val").value=t}}])&&ui(e.prototype,n),u}(lr);function pi(){return new li}function yi(t){return(yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bi(t,e){return(bi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function di(t,e){return!e||"object"!==yi(e)&&"function"!=typeof e?wi(t):e}function wi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mi(t){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Oi={EQUAL:"equal",GT:"gt",GTE:"gte",LT:"lt",LTE:"lte",NOT_EQUAL:"not_equal"},gi=new WeakMap,Ei=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bi(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=mi(r);if(o){var n=mi(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return di(this,t)});function u(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oi.EQUAL;return hi(this,u),t=i.call(this,"FCompare"),gi.set(wi(t),{writable:!0,value:Oi.EQUAL}),t.comparision=e,t.functional=!0,t.inputs=[new $t("Val1",wi(t),Rt(gt.NUMBER,!1),0),new $t("Val2",wi(t),Rt(gt.NUMBER,!1),0)],t.outputs=[new Qt("Val",wi(t),Rt(gt.BOOLEAN,!1),0)],t.prev=null,t.nexts=[],t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs();var t,e=this.input("Val1").value,n=this.input("Val2").value;switch(this.comparision){case Oi.EQUAL:t=e===n,bresk;case Oi.NOT_EQUAL:t=e!==n;break;case Oi.GT:t=e>n;break;case Oi.GTE:t=e>=n;break;case Oi.LT:t=e<n;break;case Oi.LTE:t=e<=n;break;default:throw"Comparision type not valid"}this.output("Val").value=t}},{key:"comparision",get:function(){return function(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}(this,gi)},set:function(t){!function(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(this,gi,t)}}])&&vi(e.prototype,n),u}(lr);function _i(){return new Ei}function Si(t){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ri(t,e){return(Ri=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ni(t,e){return!e||"object"!==Si(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ki(t){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ri(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ki(e);if(n){var o=ki(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Ni(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,Oi.EQUAL)).name="FEqual",t}return o}(Ei);function Ci(){return new Pi}function Ti(t){return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Di(t,e){return(Di=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ai(t,e){return!e||"object"!==Ti(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ii(t){return(Ii=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Di(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Ii(e);if(n){var o=Ii(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Ai(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,Oi.FGT)).name="FGT",t}return o}(Ei);function ji(){return new xi}function Mi(t){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Li(t,e){return(Li=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fi(t,e){return!e||"object"!==Mi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vi(t){return(Vi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Li(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Vi(e);if(n){var o=Vi(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Fi(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,Oi.FGTE)).name="FGTE",t}return o}(Ei);function Ui(){return new Wi}function Bi(t){return(Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xi(t,e){return(Xi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hi(t,e){return!e||"object"!==Bi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gi(t){return(Gi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xi(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Gi(e);if(n){var o=Gi(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Hi(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,Oi.FLT)).name="FLT",t}return o}(Ei);function Ki(){return new Yi}function $i(t){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qi(t,e){return(qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qi(t,e){return!e||"object"!==$i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zi(t){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qi(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Zi(e);if(n){var o=Zi(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Qi(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,Oi.FLTE)).name="FLTE",t}return o}(Ei);function Ji(){return new zi}function tu(t){return(tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eu(t,e){return(eu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nu(t,e){return!e||"object"!==tu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ru(t){return(ru=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ou=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eu(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ru(e);if(n){var o=ru(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return nu(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,Oi.FNotEqual)).name="FNotEqual",t}return o}(Ei);function iu(){return new ou}function uu(t){return(uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function au(t,e){return(au=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function su(t,e){return!e||"object"!==uu(e)&&"function"!=typeof e?fu(t):e}function fu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lu(t){return(lu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pu(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function yu(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var hu=new WeakMap,vu=new WeakMap,bu=new WeakMap,du=new WeakMap,wu=new WeakMap,mu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&au(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=lu(r);if(o){var n=lu(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return su(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),t=i.call(this,"Program"),hu.set(fu(t),{writable:!0,value:[]}),vu.set(fu(t),{writable:!0,value:null}),bu.set(fu(t),{writable:!0,value:null}),du.set(fu(t),{writable:!0,value:null}),wu.set(fu(t),{writable:!0,value:new Map}),t.inputs=[new $t("Val",fu(t),Rt(gt.ANY,!1),0)],t.outputs=[new Qt("Val",fu(t),Rt(gt.ANY,!1),0)],t.nexts=[new ee("Out",fu(t))],t.prev=new Jt("In",fu(t)),t.addNode(yu(fu(t),vu,new Or)).addNode(yu(fu(t),bu,new Pr)),t}return e=u,(n=[{key:"addNode",value:function(t){return pu(this,hu).push(t),t.program=this,this}},{key:"removeNode",value:function(t){return t.disconnectAllSockets(),yu(this,hu,pu(this,hu).filter((function(e){return e.id!==t.id}))),t.program=null,this}},{key:"process",value:function(){return this.evaluateInputs(),pu(this,vu).input("Val").value=this.input("Val").value,pu(this,vu).input("Val").type=this.input("Val").type,this.processFrom(pu(this,vu)),this.output("Val").value=pu(this,bu).output("Val").value,this.output("Val").type=pu(this,bu).output("Val").type,this.getFlowResult(this.next("Out"))}},{key:"processFrom",value:function(t){for(this.currentNode=t;null!==this.currentNode;){var e=this.currentNode.process();this.currentNode=e.next}}},{key:"vars",get:function(){return pu(this,wu)},set:function(t){yu(this,wu,t)}},{key:"enter",get:function(){return pu(this,vu)},set:function(t){yu(this,vu,t)}},{key:"exit",get:function(){return pu(this,bu)},set:function(t){yu(this,bu,t)}},{key:"currentNode",get:function(){return pu(this,du)},set:function(t){yu(this,du,t)}},{key:"nodes",get:function(){return pu(this,hu)},set:function(t){yu(this,hu,t)}}])&&cu(e.prototype,n),u}(lr);function Ou(){return new mu}function gu(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Eu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Eu(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}function Eu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Su(t,e,n){if(t!==e)throw new TypeError("Private static access of wrong provenance");return n.get?n.get.call(t):n.value}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:1,enumerable:!0,configurable:!0,writable:!0}):t[e]=1}(mu,"version");var Ru=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"init",value:function(){!function(t,e,n,r){if(t!==e)throw new TypeError("Private static access of wrong provenance");if(n.set)n.set.call(t,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}}(t,t,Nu,new Map),t.registerNode("Call","Core",Lr),t.registerNode("Console","Core",Gr),t.registerNode("FGetvar","Core",Jr),t.registerNode("For","Core",co),t.registerNode("Getvar","Core",vo),t.registerNode("If","Core",Wo),t.registerNode("Setvar","Core",So),t.registerNode("While","Core",Ao),t.registerNode("Enter","Core",gr),t.registerNode("Exit","Core",Cr),t.registerNode("FAdd","Math",qo),t.registerNode("FDiv","Math",ri),t.registerNode("FMul","Math",pi),t.registerNode("FEqual","Boolean",Ci),t.registerNode("FGT","Boolean",ji),t.registerNode("FGTE","Boolean",Ui),t.registerNode("FLT","Boolean",Ki),t.registerNode("FLTE","Boolean",Ji),t.registerNode("FNotEqual","Boolean",iu)}},{key:"registerNode",value:function(e,n,r){Su(t,t,Nu).set(e,{category:n,factory:r})}},{key:"getCategories",value:function(){var e=new Map;return Array.from(Su(this,t,Nu).values()).forEach((function(t){e.set(t.category,0)})),Array.from(e.keys())}},{key:"getCategoryNodes",value:function(e){var n=[];return Array.from(Su(this,t,Nu).entries()).forEach((function(t){t[1].category===e&&n.push({name:t[0],category:t[1].category,factory:t[1].factory})})),n}},{key:"getInstance",value:function(e){var n=Su(this,t,Nu).get(e);return n?n.factory():null}},{key:"export",value:function(t){var e,n={id:t.id,version:mu.version,lastNodeIndex:lr.lastNodeIdIndex,lastSocketIndex:Xt.lastSocketIdIndex,enter:t.enter.id,exit:t.exit.id,nodes:[],connections:[]},r=gu(t.nodes);try{for(r.s();!(e=r.n()).done;){var o=e.value,i={id:o.id,name:o.name,functional:o.functional,inputs:o.inputs.map((function(t){return{id:t.id,name:t.name,node:null,type:{type:t.type.type,isArray:t.type.isArray},value:t.value,peer:null}})),outputs:o.outputs.map((function(t){return{id:t.id,name:t.name,node:null,type:{type:t.type.type,isArray:t.type.isArray},value:t.value,peers:[]}})),prev:o.prev?{id:o.prev.id,name:o.prev.name,node:null,peers:[]}:null,nexts:o.nexts.map((function(t){return{id:t.id,name:t.name,node:null,peer:null}}))};n.nodes.push(i)}}catch(t){r.e(t)}finally{r.f()}function u(t){-1===n.connections.findIndex((function(e){return e.type===t.type&&e.sourceNode===t.sourceNode&&e.sourceSocket===t.sourceSocket&&e.targetNode===t.targetNode&&e.targetSocket===t.targetSocket}))&&n.connections.push(t)}var c,a=gu(t.nodes);try{for(a.s();!(c=a.n()).done;){var s=c.value;if(s.prev&&s.prev.peers&&s.prev.peers.length>0){var f,l=gu(s.prev.peers);try{for(l.s();!(f=l.n()).done;){var p=f.value;u({type:"pn",sourceNode:p.node.id,sourceSocket:p.id,targetNode:s.id,targetSocket:s.prev.id})}}catch(t){l.e(t)}finally{l.f()}}var y,h=gu(s.inputs);try{for(h.s();!(y=h.n()).done;){var v=y.value;v.peer&&u({type:"io",sourceNode:v.peer.node.id,sourceSocket:v.peer.id,targetNode:s.id,targetSocket:v.id})}}catch(t){h.e(t)}finally{h.f()}var b,d=gu(s.outputs);try{for(d.s();!(b=d.n()).done;){var w,m=b.value,O=gu(m.peers);try{for(O.s();!(w=O.n()).done;){var g=w.value;g&&u({type:"io",sourceNode:s.id,sourceSocket:m.id,targetNode:g.node.id,targetSocket:g.id})}}catch(t){O.e(t)}finally{O.f()}}}catch(t){d.e(t)}finally{d.f()}var E,_=gu(s.nexts);try{for(_.s();!(E=_.n()).done;){var S=E.value;S.peer&&u({type:"pn",sourceNode:s.id,sourceSocket:S.id,targetNode:S.peer.node.id,targetSocket:S.peer.id})}}catch(t){_.e(t)}finally{_.f()}}}catch(t){a.e(t)}finally{a.f()}return n}},{key:"import",value:function(e){if(1!==e.version)throw new Error("Imported data must have version 1");var n=new mu;n.removeNode(n.enter),n.removeNode(n.exit),mu.version=e.version;var r,o=gu(e.nodes);try{for(o.s();!(r=o.n()).done;){var i=r.value,u=t.getInstance(i.name);if(u.inputs=[],u.outputs=[],u.prev=null,u.nexts=[],!u)throw new Error("Node type '".concat(i.name,"' is not registered"));u.id=i.id,u.functional=i.functional;var c,a=gu(i.inputs);try{for(a.s();!(c=a.n()).done;){var s=c.value,f=new $t(s.name,u,new St(s.type.type,s.type.isArray),s.value);f.id=s.id,u.inputs.push(f)}}catch(t){a.e(t)}finally{a.f()}var l,p=gu(i.outputs);try{for(p.s();!(l=p.n()).done;){var y=l.value,h=new Qt(y.name,u,new St(y.type.type,y.type.isArray),y.value);h.id=y.id,u.outputs.push(h)}}catch(t){p.e(t)}finally{p.f()}if(i.prev){var v=new Jt(i.prev.name,u);v.id=i.prev.id,u.prev=v}var b,d=gu(i.nexts);try{for(d.s();!(b=d.n()).done;){var w=b.value,m=new ee(w.name,u);m.id=w.id,u.nexts.push(m)}}catch(t){d.e(t)}finally{d.f()}n.addNode(u)}}catch(t){o.e(t)}finally{o.f()}n.enter=n.nodes.find((function(t){return t.id===e.enter})),n.exit=n.nodes.find((function(t){return t.id===e.exit}));var O,g=gu(e.connections);try{var E=function(){var t=O.value,e=n.nodes.find((function(e){return e.id===t.sourceNode})),r=n.nodes.find((function(e){return e.id===t.targetNode})),o="pn"===t.type?e.nexts.find((function(e){return e.id===t.sourceSocket})):e.outputs.find((function(e){return e.id===t.sourceSocket})),i="pn"===t.type?r.prev:r.inputs.find((function(e){return e.id===t.targetSocket}));o.connect(i)};for(g.s();!(O=g.n()).done;)E()}catch(t){g.e(t)}finally{g.f()}return lr.lastNodeIdIndex=e.lastNodeIndex,Xt.lastSocketIdIndex=e.lastSocketIndex,n}}],null&&_u(e.prototype,null),n&&_u(e,n),t}(),Nu={writable:!0,value:new Map};function ku(t){var e=document.getElementById(t);return e?(Ru.init(),new $n(e)):(console.log("No element with id '".concat(t,"'")),null)}}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}return n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(277)})();
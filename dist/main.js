var cnui;cnui=(()=>{"use strict";var t=[,(t,e,n)=>{function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function i(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function u(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}n.r(e),n.d(e,{Call:()=>jn,Canvas:()=>O,CnodeComponent:()=>le,Comparision:()=>ao,Component:()=>z,Console:()=>Cn,Env:()=>ho,FAdd:()=>Dr,FCompare:()=>lo,FDiv:()=>Yr,FGetvar:()=>Un,FMul:()=>Kr,FlowSocket:()=>hn,For:()=>Zn,Getvar:()=>rr,If:()=>Pr,InputSocket:()=>sn,NextSocket:()=>dn,Node:()=>Ce,OutputSocket:()=>yn,Position:()=>C,PrevSocket:()=>bn,Program:()=>xo,Result:()=>We,Setvar:()=>sr,Socket:()=>un,Type:()=>Be,Types:()=>Le,ValueSocket:()=>fn,While:()=>mr,callNode:()=>Rn,canvas:()=>To,consoleNode:()=>Nn,faddNode:()=>Ir,fcompareNode:()=>so,fdivNode:()=>Hr,fgetvarNode:()=>Bn,fmulNode:()=>to,forNode:()=>qn,getvarNode:()=>or,ifNode:()=>_r,program:()=>Ao,setvarNode:()=>pr,type:()=>Ge,whileNode:()=>gr});var c=new WeakMap,a=new WeakMap,f=new WeakMap,l=new WeakMap,s=new WeakMap,p=new WeakMap,y=new WeakMap,h=new WeakMap,v=new WeakSet,b=new WeakSet,w=new WeakSet,d=new WeakSet,m=new WeakSet,g=new WeakSet,O=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g.add(this),m.add(this),d.add(this),w.add(this),b.add(this),v.add(this),c.set(this,{writable:!0,value:null}),a.set(this,{writable:!0,value:0}),f.set(this,{writable:!0,value:0}),l.set(this,{writable:!0,value:100}),s.set(this,{writable:!0,value:100}),p.set(this,{writable:!0,value:!1}),y.set(this,{writable:!0,value:void 0}),h.set(this,{writable:!0,value:[]}),u(this,c,document.createElementNS("http://www.w3.org/2000/svg","svg")),i(this,c).style.width="100%",i(this,c).style.height="100%",e.appendChild(i(this,c)),o(this,b,k).call(this);var n=this;window.addEventListener("resize",(function(){o(n,b,k).call(n)})),i(this,c).addEventListener("wheel",(function(t){o(n,w,E).call(n,t)})),i(this,c).addEventListener("pointerdown",(function(t){o(n,d,j).call(n,t)})),i(this,c).addEventListener("pointerup",(function(t){o(n,m,R).call(n,t)})),i(this,c).addEventListener("pointermove",(function(t){o(n,g,P).call(n,t)}))}var e,n;return e=t,(n=[{key:"clientToSvgPoint",value:function(t,e){var n=i(this,c).createSVGPoint();return n.x=t,n.y=e,n.matrixTransform(i(this,c).getCTM().inverse())}},{key:"addComponent",value:function(t){i(this,h).push(t),t.canvas=this,i(this,c).appendChild(t.componentEl)}},{key:"removeComponent",value:function(t){this.components=i(this,h).filter((function(e){return e!==t})),i(this,c).removeChild(t.componentEl)}},{key:"clear",value:function(){i(this,c).innerHTML=""}},{key:"svgEl",get:function(){return i(this,c)}}])&&r(e.prototype,n),t}(),S=function(){i(this,c).setAttribute("viewBox","".concat(i(this,a)," ").concat(i(this,f)," ").concat(i(this,l)," ").concat(i(this,s)))},k=function(){u(this,l,i(this,c).parentElement.clientWidth),u(this,s,i(this,c).parentElement.clientHeight),o(this,v,S).call(this)},E=function(t){var e=this.clientToSvgPoint(t.clientX-i(this,c).getBoundingClientRect().left,t.clientY-i(this,c).getBoundingClientRect().top),n=1+.003*t.deltaY,r=i(this,l)*n,p=i(this,s)*n;if(!(p<10||r<10||p>5e4||r>5e4)){var y=i(this,a)-(r-i(this,l))*((e.x-i(this,a))/i(this,l)),h=i(this,f)-(p-i(this,s))*((e.y-i(this,f))/i(this,s));u(this,s,p),u(this,l,r),u(this,a,y),u(this,f,h),o(this,v,S).call(this),t.stopPropagation()}},j=function(t){u(this,p,!0),u(this,y,this.clientToSvgPoint(t.clientX,t.clientY)),i(this,c).setPointerCapture(t.pointerId)},R=function(t){u(this,p,!1),i(this,c).releasePointerCapture(t.pointerId)},P=function(t){if(i(this,p)){var e=this.clientToSvgPoint(t.clientX,t.clientY),n=e.x-i(this,y).x,r=e.y-i(this,y).y;u(this,a,i(this,a)-n),u(this,f,i(this,f)-r),o(this,v,S).call(this)}};function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function A(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var T=new WeakMap,M=new WeakMap,C=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),T.set(this,{writable:!0,value:0}),M.set(this,{writable:!0,value:0}),A(this,T,e),A(this,M,n)}var e,n;return e=t,(n=[{key:"add",value:function(e){return new t(x(this,T)+e.x,x(this,M)+e.y)}},{key:"sub",value:function(e){return new t(x(this,T)-e.x,x(this,M)-e.y)}},{key:"x",get:function(){return x(this,T)},set:function(t){A(this,T,t)}},{key:"y",get:function(){return x(this,M)},set:function(t){A(this,M,t)}}])&&_(e.prototype,n),t}();function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function I(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function V(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var L=new WeakMap,F=new WeakMap,U=new WeakMap,B=new WeakMap,G=new WeakMap,Y=new WeakMap,H=new WeakMap,Q=new WeakMap,$=new WeakMap,X=new WeakSet,Z=new WeakSet,q=new WeakSet,z=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),q.add(this),Z.add(this),X.add(this),L.set(this,{writable:!0,value:null}),F.set(this,{writable:!0,value:null}),U.set(this,{writable:!0,value:null}),B.set(this,{writable:!0,value:!0}),G.set(this,{writable:!0,value:new C(0,0)}),Y.set(this,{writable:!0,value:!1}),H.set(this,{writable:!0,value:null}),Q.set(this,{writable:!0,value:null}),$.set(this,{writable:!0,value:[]})}var e,n;return e=t,(n=[{key:"setup",value:function(){var t=this;V(this,F,this.createElement()),this.moveable&&(I(this,F).addEventListener("pointerdown",(function(e){D(t,X,J).call(t,e)})),I(this,F).addEventListener("pointerup",(function(e){D(t,Z,K).call(t,e)})),I(this,F).addEventListener("pointermove",(function(e){D(t,q,tt).call(t,e)})))}},{key:"createElement",value:function(){throw new Error("Element must be defined in a subclass!")}},{key:"updateSVGElement",value:function(){var t=this.absPos;I(this,F).setAttribute("transform","translate(".concat(t.x,",").concat(t.y,")"));var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}(I(this,$));try{for(n.s();!(e=n.n()).done;)e.value.updateSVGElement()}catch(t){n.e(t)}finally{n.f()}}},{key:"addComponent",value:function(t){I(this,$).push(t),t.parent=this,t.canvas=this.canvas,this.svgEl.appendChild(t.componentEl),t.updateSVGElement()}},{key:"removeComponent",value:function(t){this.components=I(this,$).filter((function(e){return e!==t})),this.svgEl.removeChild(t.componentEl)}},{key:"pos",get:function(){return I(this,G)},set:function(t){V(this,G,t),this.updateSVGElement()}},{key:"canvas",get:function(){return I(this,L)},set:function(t){V(this,L,t)}},{key:"componentEl",get:function(){return I(this,F)}},{key:"svgEl",get:function(){return I(this,L).svgEl}},{key:"moveable",get:function(){return I(this,B)},set:function(t){V(this,B,t)}},{key:"parent",get:function(){return I(this,U)},set:function(t){V(this,U,t)}},{key:"absPos",get:function(){var t=new C(I(this,G).x,I(this,G).y);if(I(this,U)){var e=I(this,U).absPos;t=t.add(e)}return t}}])&&W(e.prototype,n),t}(),J=function(t){I(this,B)&&(V(this,Y,!0),V(this,H,I(this,L).clientToSvgPoint(t.clientX,t.clientY)),V(this,Q,I(this,L).svgEl.createSVGPoint()),I(this,Q).x=I(this,G).x,I(this,Q).y=I(this,G).y,I(this,F).setPointerCapture(t.pointerId),t.stopPropagation())},K=function(t){I(this,B)&&(V(this,Y,!1),I(this,F).releasePointerCapture(t.pointerId),t.stopPropagation())},tt=function(t){if(I(this,B)){if(!I(this,Y))return;var e=I(this,L).clientToSvgPoint(t.clientX,t.clientY),n=e.x-I(this,H).x,r=e.y-I(this,H).y;I(this,G).x=n+I(this,Q).x,I(this,G).y=r+I(this,Q).y,this.updateSVGElement(),t.stopPropagation()}},et=200,nt=15,rt="#31A200",ot="#31A200",it="bold 11px verdana",ut="bold 11px black",ct="#008EBF",at="#008EBF",ft="bold 11px verdana",lt="bold 11px black";function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ht(t,e){return!e||"object"!==st(e)&&"function"!=typeof e?vt(t):e}function vt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bt(t,e,n){return(bt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dt=new WeakMap,mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wt(r);if(o){var n=wt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ht(this,t)});function u(t){var e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),n=i.call(this),dt.set(vt(n),{writable:!0,value:null}),function(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(vt(n),dt,t),n.moveable=!1,bt((e=vt(n),wt(u.prototype)),"setup",e).call(e),n}return e=u,(n=[{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","\n      M -7 -8\n      L 7 -8\n      L 7 8\n      L -7 8\n      Z\n      "),t.setAttribute("stroke",rt),t.setAttribute("stroke-width",2),t.setAttribute("fill",ot);var e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");e.style="\n      font: ".concat(it,"; \n      color: ").concat(ut,"; \n      text-align: left;\n      width: ").concat(85,"px;\n      height: 30px;\n      line-height: 30px;\n      user-select: none;\n      "),e.innerHTML="".concat(this.socket.name),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("transform","translate(".concat(15,", ",-15,")")),e.setAttribute("width",85),e.setAttribute("height",30);var n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.setAttribute("x",0),n.setAttribute("y",0),n.appendChild(t),n.appendChild(e),n}},{key:"socket",get:function(){return function(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}(this,dt)}}])&&pt(e.prototype,n),u}(z);function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kt(t,e){return!e||"object"!==gt(e)&&"function"!=typeof e?Et(t):e}function Et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jt(t,e,n){return(jt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pt=new WeakMap,_t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Rt(r);if(o){var n=Rt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return kt(this,t)});function u(t){var e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),n=i.call(this),Pt.set(Et(n),{writable:!0,value:null}),function(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(Et(n),Pt,t),n.moveable=!1,jt((e=Et(n),Rt(u.prototype)),"setup",e).call(e),n}return e=u,(n=[{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","\n      M -7 -8\n      L 7 -8\n      L 12 0\n      L 7 8\n      L -7 8\n      Z\n      "),t.setAttribute("stroke",rt),t.setAttribute("stroke-width",2),t.setAttribute("fill",ot);var e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");e.style="\n      font: ".concat(it,"; \n      color: ").concat(ut,"; \n      text-align: right;\n      width: ").concat(85,"px;\n      height: 30px;\n      line-height: 30px;\n      user-select: none;\n      "),e.innerHTML="".concat(this.socket.name),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("transform","translate(".concat(-100,", ").concat(-15,")")),e.setAttribute("width",85),e.setAttribute("height",30);var n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.setAttribute("x",0),n.setAttribute("y",0),n.appendChild(t),n.appendChild(e),n}},{key:"socket",get:function(){return function(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}(this,Pt)}}])&&Ot(e.prototype,n),u}(z);function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tt(t,e){return(Tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mt(t,e){return!e||"object"!==xt(e)&&"function"!=typeof e?Ct(t):e}function Ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nt(t,e,n){return(Nt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dt=new WeakMap,It=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tt(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Wt(r);if(o){var n=Wt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Mt(this,t)});function u(t){var e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),n=i.call(this),Dt.set(Ct(n),{writable:!0,value:null}),function(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(Ct(n),Dt,t),n.moveable=!1,Nt((e=Ct(n),Wt(u.prototype)),"setup",e).call(e),n}return e=u,(n=[{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","circle");t.setAttribute("cx",0),t.setAttribute("cy",0),t.setAttribute("r",10),t.setAttribute("stroke-width",2),t.setAttribute("stroke",ct),t.setAttribute("fill",at);var e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");e.style="\n      font: ".concat(ft,"; \n      color: ").concat(lt,"; \n      text-align: right;\n      width: ").concat(170,"px;\n      height: 30px;\n      line-height: 30px;\n      user-select: none;\n      "),e.innerHTML="".concat(this.socket.name),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("transform","translate(".concat(-185,", ").concat(-15,")")),e.setAttribute("width",170),e.setAttribute("height",30);var n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.setAttribute("x",0),n.setAttribute("y",0),n.appendChild(t),n.appendChild(e),n}},{key:"socket",get:function(){return function(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}(this,Dt)}}])&&At(e.prototype,n),u}(z);function Vt(t){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ft(t,e){return(Ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ut(t,e){return!e||"object"!==Vt(e)&&"function"!=typeof e?Bt(t):e}function Bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gt(t,e,n){return(Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ht=new WeakMap,Qt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ft(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Yt(r);if(o){var n=Yt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ut(this,t)});function u(t){var e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),n=i.call(this),Ht.set(Bt(n),{writable:!0,value:null}),function(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(Bt(n),Ht,t),n.moveable=!1,Gt((e=Bt(n),Yt(u.prototype)),"setup",e).call(e),n}return e=u,(n=[{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","circle");t.setAttribute("cx",0),t.setAttribute("cy",0),t.setAttribute("r",10),t.setAttribute("stroke-width",2),t.setAttribute("stroke",ct),t.setAttribute("fill",at);var e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");e.style="\n    font: ".concat(ft,"; \n    color: ").concat(lt,"; \n    text-align: left;\n    width: ").concat(85,"px;\n    height: 30px;\n    line-height: 30px;\n    user-select: none;\n    "),e.innerHTML="".concat(this.socket.name),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("transform","translate(".concat(15,", ",-15,")")),e.setAttribute("width",85),e.setAttribute("height",30);var n=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");n.style="\n    font: ".concat(ft,"; \n    color: ").concat(lt,"; \n    text-align: left;\n    line-height: 30px;\n    user-select: none;\n    "),n.setAttribute("x",0),n.setAttribute("y",0),n.setAttribute("transform","translate(".concat(100,", ").concat(-15,")")),n.setAttribute("width",85),n.setAttribute("height",30);var r=document.createElement("input");r.style="\n    font: ".concat(ft,"; \n    color: ").concat(lt,"; \n    width: ").concat(75,"px; // 5px less than foreignObject\n    height: ",20,"px;\n    border: 0;\n    padding: 2px;\n    margin: 2px;\n    "),r.setAttribute("value",this.socket.value),r.setAttribute("type","text"),n.appendChild(r);var o=document.createElementNS("http://www.w3.org/2000/svg","g");return o.setAttribute("x",0),o.setAttribute("y",0),o.appendChild(t),o.appendChild(e),o.appendChild(n),o}},{key:"socket",get:function(){return function(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}(this,Ht)}}])&&Lt(e.prototype,n),u}(z);function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Zt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}function Zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jt(t,e){return!e||"object"!==$t(e)&&"function"!=typeof e?Kt(t):e}function Kt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function te(t,e,n){return(te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ee(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ee(t){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ne(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function re(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var oe,ie=new WeakMap,ue=new WeakMap,ce=new WeakMap,ae=new WeakMap,fe=new WeakSet,le=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ee(r);if(o){var n=ee(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Jt(this,t)});function u(t,e){var n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),r=i.call(this),fe.add(Kt(r)),ie.set(Kt(r),{writable:!0,value:void 0}),ue.set(Kt(r),{writable:!0,value:void 0}),ce.set(Kt(r),{writable:!0,value:void 0}),ae.set(Kt(r),{writable:!0,value:void 0}),re(Kt(r),ie,t),te((n=Kt(r),ee(u.prototype)),"setup",n).call(n),e.addComponent(Kt(r)),function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(Kt(r),fe,se).call(Kt(r)),r}return e=u,(n=[{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return re(this,ue,document.createElementNS("http://www.w3.org/2000/svg","path")),re(this,ce,document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),re(this,ae,document.createElementNS("http://www.w3.org/2000/svg","circle")),t.appendChild(ne(this,ue)),t.appendChild(ne(this,ce)),t.appendChild(ne(this,ae)),ne(this,ue).setAttribute("d","\n      M 0 ".concat(19.5," \n      A ").concat(19.5," ").concat(19.5," 0 0 0 ").concat(19.5," 0 \n      L ").concat(185," 0 \n      A ").concat(nt," ").concat(nt," 0 0 1 ").concat(et," ").concat(nt," \n      L ").concat(et," ").concat(this.height-nt," \n      A ").concat(nt," ").concat(nt," 0 0 1 ").concat(185," ").concat(this.height," \n      L ").concat(nt," ").concat(this.height," \n      A ").concat(nt," ").concat(nt," 0 0 1 0 ").concat(this.height-nt," \n      Z\n      ")),ne(this,ce).innerHTML=this.node.name,ne(this,ce).style="font: ".concat("bold 18px verdana","; color: ").concat("black","; text-align: center; user-select: none"),ne(this,ce).setAttribute("x",7.5),ne(this,ce).setAttribute("y",7.5),ne(this,ce).setAttribute("width",185),ne(this,ce).setAttribute("height",20),ne(this,ue).setAttribute("stroke","#FAD7A0"),ne(this,ue).setAttribute("stroke-width",3),ne(this,ue).setAttribute("fill","#FAD7A0"),ne(this,ue).setAttribute("x","0"),ne(this,ue).setAttribute("y","0"),ne(this,ae).setAttribute("cx",0),ne(this,ae).setAttribute("cy",0),ne(this,ae).setAttribute("r",13.5),ne(this,ae).setAttribute("stroke","#FEF9E7"),ne(this,ae).setAttribute("stroke-width",3),ne(this,ae).setAttribute("fill","#FEF9E7"),t.setAttribute("x","0"),t.setAttribute("y","0"),t}},{key:"node",get:function(){return ne(this,ie)}},{key:"height",get:function(){return 47.5+30*Math.max(1,this.node.nexts.length)+30*Math.max(0,this.node.outputs.length)+30*Math.max(0,this.node.inputs.length)+15}}])&&qt(e.prototype,n),u}(z),se=function(){var t=47.5;if(this.node.prev){var e=new mt(this.node.prev);e.pos=new C(0,t),this.addComponent(e)}var n,r=Xt(this.node.nexts);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=new _t(o);i.pos=new C(et,t),this.addComponent(i),t+=30}}catch(t){r.e(t)}finally{r.f()}var u,c=Xt(this.node.outputs);try{for(c.s();!(u=c.n()).done;){var a=u.value,f=new It(a);f.pos=new C(et,t),this.addComponent(f),t+=30}}catch(t){c.e(t)}finally{c.f()}var l,s=Xt(this.node.inputs);try{for(s.s();!(l=s.n()).done;){var p=l.value,y=new Qt(p);y.pos=new C(0,t),this.addComponent(y),t+=30}}catch(t){s.e(t)}finally{s.f()}},pe=new Uint8Array(16);function ye(){if(!oe&&!(oe="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return oe(pe)}const he=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ve=function(t){return"string"==typeof t&&he.test(t)};for(var be=[],we=0;we<256;++we)be.push((we+256).toString(16).substr(1));const de=function(t,e,n){var r=(t=t||{}).random||(t.rng||ye)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=r[o];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(be[t[e+0]]+be[t[e+1]]+be[t[e+2]]+be[t[e+3]]+"-"+be[t[e+4]]+be[t[e+5]]+"-"+be[t[e+6]]+be[t[e+7]]+"-"+be[t[e+8]]+be[t[e+9]]+"-"+be[t[e+10]]+be[t[e+11]]+be[t[e+12]]+be[t[e+13]]+be[t[e+14]]+be[t[e+15]]).toLowerCase();if(!ve(n))throw TypeError("Stringified UUID is invalid");return n}(r)};function me(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Se(t,e,n){return e&&Oe(t.prototype,e),n&&Oe(t,n),t}function ke(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function Ee(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var je=new WeakMap,Re=new WeakMap,Pe=new WeakMap,_e=new WeakMap,xe=new WeakMap,Ae=new WeakMap,Te=new WeakMap,Me=new WeakMap,Ce=function(){function t(e){ge(this,t),je.set(this,{writable:!0,value:de()}),Re.set(this,{writable:!0,value:""}),Pe.set(this,{writable:!0,value:!1}),_e.set(this,{writable:!0,value:[]}),xe.set(this,{writable:!0,value:[]}),Ae.set(this,{writable:!0,value:[]}),Te.set(this,{writable:!0,value:null}),Me.set(this,{writable:!0,value:null}),Ee(this,Re,e)}return Se(t,[{key:"input",value:function(t){return this.inputs.find((function(e){return e.name===t}))}},{key:"output",value:function(t){return this.outputs.find((function(e){return e.name===t}))}},{key:"next",value:function(t){return t?this.nexts.find((function(e){return e.name===t})):this.nexts[0]}},{key:"evaluateInputs",value:function(){var t,e=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return me(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}(this.inputs);try{for(e.s();!(t=e.n()).done;)t.value.evaluate()}catch(t){e.e(t)}finally{e.f()}}},{key:"getFlowResult",value:function(t){return t.peer?new We(t.peer.node):new We}},{key:"toString",value:function(){return"N('"+ke(this,Re)+"',"+ke(this,_e).length+"i,"+ke(this,xe).length+"o,"+ke(this,Ae).length+"n)"}},{key:"process",value:function(){return new We}},{key:"id",get:function(){return ke(this,je)}},{key:"name",get:function(){return ke(this,Re)},set:function(t){Ee(this,Re,t)}},{key:"functional",get:function(){return ke(this,Pe)},set:function(t){Ee(this,Pe,t)}},{key:"inputs",get:function(){return ke(this,_e)},set:function(t){Ee(this,_e,t)}},{key:"outputs",get:function(){return ke(this,xe)},set:function(t){Ee(this,xe,t)}},{key:"nexts",get:function(){return ke(this,Ae)},set:function(t){Ee(this,Ae,t)}},{key:"prev",get:function(){return ke(this,Te)},set:function(t){Ee(this,Te,t)}},{key:"program",get:function(){return ke(this,Me)},set:function(t){Ee(this,Me,t)}}]),t}(),Ne=new WeakMap,We=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;ge(this,t),Ne.set(this,{writable:!0,value:null}),Ee(this,Ne,e)}return Se(t,[{key:"next",get:function(){return ke(this,Ne)},set:function(t){Ee(this,Ne,t)}}]),t}();function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ie(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function Ve(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var Le={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",OBJECT:"object",ANY:"any"},Fe=new WeakMap,Ue=new WeakMap,Be=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Fe.set(this,{writable:!0,value:Le.NUMBER}),Ue.set(this,{writable:!0,value:!1}),Ve(this,Fe,e),Ve(this,Ue,n)}var e,n;return e=t,(n=[{key:"type",get:function(){return Ie(this,Fe)},set:function(t){Ve(this,Fe,t)}},{key:"isArray",get:function(){return Ie(this,Ue)},set:function(t){Ve(this,Ue,t)}}])&&De(e.prototype,n),t}();function Ge(t,e){return new Be(t,e)}function Ye(t){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function He(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qe(t,e)}function Qe(t,e){return(Qe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qe(t);if(e){var o=qe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xe(this,n)}}function Xe(t,e){return!e||"object"!==Ye(e)&&"function"!=typeof e?Ze(t):e}function Ze(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qe(t){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ke(t,e,n){return e&&Je(t.prototype,e),n&&Je(t,n),t}function tn(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function en(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var nn=new WeakMap,rn=new WeakMap,on=new WeakMap,un=function(){function t(e,n){ze(this,t),nn.set(this,{writable:!0,value:""}),rn.set(this,{writable:!0,value:""}),on.set(this,{writable:!0,value:null}),en(this,nn,de()),en(this,rn,e),en(this,on,n)}return Ke(t,[{key:"id",get:function(){return tn(this,nn)}},{key:"name",get:function(){return tn(this,rn)},set:function(t){en(this,rn,t)}},{key:"node",get:function(){return tn(this,on)},set:function(t){en(this,on,t)}}]),t}(),cn=new WeakMap,an=new WeakMap,fn=function(t){He(n,t);var e=$e(n);function n(t,r){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i(Le.NUMBER,!1);return ze(this,n),o=e.call(this,t,r),cn.set(Ze(o),{writable:!0,value:Ge(Le.NUMBER,!1)}),an.set(Ze(o),{writable:!0,value:0}),o}return Ke(n,[{key:"type",get:function(){return tn(this,cn)},set:function(t){en(this,cn,t)}},{key:"value",get:function(){return tn(this,an)},set:function(t){en(this,an,t)}}]),n}(un),ln=new WeakMap,sn=function(t){He(n,t);var e=$e(n);function n(t,r,o,i){var u;return ze(this,n),u=e.call(this,t,r,o,i),ln.set(Ze(u),{writable:!0,value:null}),u}return Ke(n,[{key:"evaluate",value:function(){null!==this.peer&&(this.peer.node&&this.peer.node.functional&&this.peer.node.process(),this.type=this.peer.type,this.value=this.peer.value)}},{key:"connect",value:function(t){var e=this;this.peer=t,void 0===t.peers.find((function(t){return t.peer===e}))&&t.peers.push(this)}},{key:"disconnect",value:function(t){var e=this;this.peer=null;var n=t.peers.findIndex((function(t){return t.peer===e}));-1!==n&&t.peers.splice(n,1)}},{key:"peer",get:function(){return tn(this,ln)},set:function(t){en(this,ln,t)}}]),n}(fn),pn=new WeakMap,yn=function(t){He(n,t);var e=$e(n);function n(t,r,o,i){var u;return ze(this,n),u=e.call(this,t,r,i,o),pn.set(Ze(u),{writable:!0,value:[]}),u}return Ke(n,[{key:"connect",value:function(t){void 0===this.peers.find((function(e){return e.peer===t}))&&this.peers.push(t),t.peer=this}},{key:"disconnect",value:function(t){var e=this.peers.find((function(e){return e.peer===t}));void 0!==e&&(this.peers.splice(e,1),t.peer=null)}},{key:"peers",get:function(){return tn(this,pn)},set:function(t){en(this,pn,t)}}]),n}(fn),hn=function(t){He(n,t);var e=$e(n);function n(t,r){return ze(this,n),e.call(this,t,r)}return n}(un),vn=new WeakMap,bn=function(t){He(n,t);var e=$e(n);function n(t,r){var o;return ze(this,n),o=e.call(this,t,r),vn.set(Ze(o),{writable:!0,value:[]}),o}return Ke(n,[{key:"connect",value:function(t){void 0===this.peers.find((function(e){return e.peer===t}))&&this.peers.push(t),t.peer=this}},{key:"disconnect",value:function(t){var e=this.peers.find((function(e){return e.peer===t}));void 0!==e&&(this.peers.splice(e,1),t.peer=null)}},{key:"peers",get:function(){return tn(this,vn)},set:function(t){en(this,vn,t)}}]),n}(hn),wn=new WeakMap,dn=function(t){He(n,t);var e=$e(n);function n(t,r){var o;return ze(this,n),o=e.call(this,t,r),wn.set(Ze(o),{writable:!0,value:null}),o}return Ke(n,[{key:"connect",value:function(t){var e=this;this.peer=t,void 0===t.peers.find((function(t){return t.peer===e}))&&t.peers.push(this)}},{key:"disconnect",value:function(t){var e=this;this.peer=null;var n=t.peers.findIndex((function(t){return t.peer===e}));-1!==n&&t.peers.splice(n,1)}},{key:"peer",get:function(){return tn(this,wn)},set:function(t){en(this,wn,t)}}]),n}(hn);function mn(t){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function On(t,e){return(On=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sn(t,e){return!e||"object"!==mn(e)&&"function"!=typeof e?kn(t):e}function kn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function En(t){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&On(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=En(r);if(o){var n=En(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Sn(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"Call")).inputs=[],t.outputs=[],t.nexts=[new dn("Out",kn(t)),new dn("Call",kn(t))],t.prev=new bn("In",kn(t)),t}return e=u,(n=[{key:"process",value:function(){var t=this.program.currentNode;return this.program.processFrom(this.next("Call").peer.node),this.program.currentNode=t,this.getFlowResult(this.next("Out"))}}])&&gn(e.prototype,n),u}(Ce);function Rn(){return new jn}function Pn(t){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xn(t,e){return(xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function An(t,e){return!e||"object"!==Pn(e)&&"function"!=typeof e?Tn(t):e}function Tn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mn(t){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xn(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mn(r);if(o){var n=Mn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return An(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"Console")).inputs=[new sn("Val",Tn(t),Ge(Le.ANY,!1),0)],t.outputs=[],t.nexts=[new dn("Out",Tn(t))],t.prev=new bn("In",Tn(t)),t}return e=u,(n=[{key:"process",value:function(){return this.evaluateInputs(),console.log(this.input("Val").value),new We,this.getFlowResult(this.next("Out"))}}])&&_n(e.prototype,n),u}(Ce);function Nn(){return new Cn}function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function In(t,e){return(In=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vn(t,e){return!e||"object"!==Wn(e)&&"function"!=typeof e?Ln(t):e}function Ln(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fn(t){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Un=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&In(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Fn(r);if(o){var n=Fn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Vn(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"FGetvar")).functional=!0,t.inputs=[new sn("Name",Ln(t),Wn(""),"")],t.outputs=[new yn("Val",Ln(t),Wn(""),"")],t.nexts=[],t.prev=null,t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs();var t=this.input("Name").value;this.output("Val").value=this.program.vars.get(t)}}])&&Dn(e.prototype,n),u}(Ce);function Bn(){return new Un}function Gn(t){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hn(t,e){return(Hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qn(t,e){return!e||"object"!==Gn(e)&&"function"!=typeof e?$n(t):e}function $n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xn(t){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hn(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xn(r);if(o){var n=Xn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Qn(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"For")).inputs=[new sn("From",$n(t),new Be(Le.NUMBER,!1),!1),new sn("To",$n(t),new Be(Le.NUMBER,!1),!1)],t.outputs=[new yn("Index",$n(t),new Be(Le.NUMBER,!1),!1)],t.nexts=[new dn("Out",$n(t)),new dn("Do",$n(t))],t.prev=new bn("In",$n(t)),t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs();for(var t=this.program.currentNode,e=this.input("From").value;e<this.input("To").value;e++)null!==this.next("Do").peer&&null!==this.next("Do").peer.node&&(this.output("Index").value=e,this.program.processFrom(this.next("Do").peer.node));return this.program.currentNode=t,this.getFlowResult(this.next("Out"))}}])&&Yn(e.prototype,n),u}(Ce);function qn(){return new Zn}function zn(t){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kn(t,e){return(Kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tr(t,e){return!e||"object"!==zn(e)&&"function"!=typeof e?er(t):e}function er(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nr(t){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kn(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=nr(r);if(o){var n=nr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return tr(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"Getvar")).inputs=[new sn("Name",er(t),zn(""),"")],t.outputs=[new yn("Val",er(t),zn(""),"")],t.nexts=[new dn("Out",er(t))],t.prev=new bn("In",er(t)),t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs();var t=this.input("Name").value;return this.output("Val").value=this.program.vars.get(t),this.getFlowResult(this.next("Out"))}}])&&Jn(e.prototype,n),u}(Ce);function or(){return new rr}function ir(t){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cr(t,e){return(cr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ar(t,e){return!e||"object"!==ir(e)&&"function"!=typeof e?fr(t):e}function fr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lr(t){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cr(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=lr(r);if(o){var n=lr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ar(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"Setvar")).inputs=[new sn("Name",fr(t),ir(""),""),new sn("Val",fr(t),ir(""),"")],t.outputs=[new yn("Val",fr(t),ir(""),"")],t.nexts=[new dn("Out",fr(t))],t.prev=new bn("In",fr(t)),t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs();var t=this.input("Name").value,e=this.input("Val").value;return this.program.vars.set(t,e),this.output("Val").value=e,this.getFlowResult(this.next("Out"))}}])&&ur(e.prototype,n),u}(Ce);function pr(){return new sr}function yr(t){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vr(t,e){return(vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function br(t,e){return!e||"object"!==yr(e)&&"function"!=typeof e?wr(t):e}function wr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dr(t){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vr(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=dr(r);if(o){var n=dr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return br(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"While")).inputs=[new sn("Condition",wr(t),new Be(Le.BOOLEAN,!1),!1)],t.outputs=[new yn("Index",wr(t),new Be(Le.NUMBER,!1),!1)],t.nexts=[new dn("Out",wr(t)),new dn("Do",wr(t))],t.prev=new bn("In",wr(t)),t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs();for(var t=this.program.currentNode;this.input("Condition").value;)null!==this.nexts("Do").peer&&null!==this.nexts("Do").peer.node&&(this.output("Index").value=0,this.program.processFrom(this.next("Do").peer.node),this.evaluateInputs());return this.program.currentNode=t,this.getFlowResult(this.next("Out"))}}])&&hr(e.prototype,n),u}(Ce);function gr(){return new mr}function Or(t){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kr(t,e){return(kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Er(t,e){return!e||"object"!==Or(e)&&"function"!=typeof e?jr(t):e}function jr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rr(t){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kr(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Rr(r);if(o){var n=Rr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Er(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"If")).inputs=[new sn("Condition",jr(t),new Be(Le.BOOLEAN,!1),!1)],t.outputs=[],t.nexts=[new dn("Then",jr(t)),new dn("Else",jr(t))],t.prev=new bn("In",jr(t)),t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs();var t;return t=this.input("Condition").value?this.next("Then"):this.next("Else"),this.getFlowResult(t)}}])&&Sr(e.prototype,n),u}(Ce);function _r(){return new Pr}function xr(t){return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mr(t,e){return(Mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cr(t,e){return!e||"object"!==xr(e)&&"function"!=typeof e?Nr(t):e}function Nr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wr(t){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mr(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Wr(r);if(o){var n=Wr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Cr(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"FAdd")).functional=!0,t.inputs=[new sn("Val1",Nr(t),Ge(Le.NUMBER,!1),0),new sn("Val2",Nr(t),Ge(Le.NUMBER,!1),0)],t.outputs=[new yn("Val",Nr(t),Ge(Le.NUMBER,!1),0)],t.prev=null,t.nexts=[],t}return e=u,(n=[{key:"process",value:function(){var t=0;this.evaluateInputs();var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ar(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ar(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}(this.inputs);try{for(n.s();!(e=n.n()).done;)t+=e.value.value}catch(t){n.e(t)}finally{n.f()}this.output("Val").value=t}}])&&Tr(e.prototype,n),u}(Ce);function Ir(){return new Dr}function Vr(t){return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fr(t,e){return(Fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ur(t,e){return!e||"object"!==Vr(e)&&"function"!=typeof e?Br(t):e}function Br(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gr(t){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fr(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gr(r);if(o){var n=Gr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ur(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"FDiv")).functional=!0,t.inputs=[new sn("Val1",Br(t),Ge(Le.NUMBER,!1),0),new sn("Val2",Br(t),Ge(Le.NUMBER,!1),0)],t.outputs=[new yn("Val",Br(t),Ge(Le.NUMBER,!1),0)],t.prev=null,t.nexts=[],t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs(),this.output("Val").value=this.input("Val1").value/this.input("Val2").value}}])&&Lr(e.prototype,n),u}(Ce);function Hr(){return new Yr}function Qr(t){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zr(t,e){return(Zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qr(t,e){return!e||"object"!==Qr(e)&&"function"!=typeof e?zr(t):e}function zr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jr(t){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zr(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Jr(r);if(o){var n=Jr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return qr(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"FMul")).functional=!0,t.inputs=[new sn("Val1",zr(t),Ge(Le.NUMBER,!1),0),new sn("Val2",zr(t),Ge(Le.NUMBER,!1),0)],t.outputs=[new yn("Val",zr(t),Ge(Le.NUMBER,!1),0)],t.prev=null,t.nexts=[],t}return e=u,(n=[{key:"process",value:function(){var t=0;this.evaluateInputs();var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return $r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}(this.inputs);try{for(n.s();!(e=n.n()).done;)t*=e.value.value}catch(t){n.e(t)}finally{n.f()}this.output("Val").value=t}}])&&Xr(e.prototype,n),u}(Ce);function to(){return new Kr}function eo(t){return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function no(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ro(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oo(t,e){return(oo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function io(t,e){return!e||"object"!==eo(e)&&"function"!=typeof e?uo(t):e}function uo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function co(t){return(co=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ao={EQUAL:"equal",GT:"gt",GTE:"gte",LT:"lt",LTE:"lte",NOT_EQUAL:"not_equal"},fo=new WeakMap,lo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oo(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=co(r);if(o){var n=co(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return io(this,t)});function u(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ao.EQUAL;return no(this,u),t=i.call(this,"FCompare"),fo.set(uo(t),{writable:!0,value:ao.EQUAL}),t.comparision=e,t.functional=!0,t.inputs=[new sn("Val1",uo(t),Ge(Le.NUMBER,!1),0),new sn("Val2",uo(t),Ge(Le.NUMBER,!1),0)],t.outputs=[new yn("Val",uo(t),Ge(Le.BOOLEAN,!1),0)],t.prev=null,t.nexts=[],t}return e=u,(n=[{key:"process",value:function(){this.evaluateInputs();var t,e=this.input("Val1").value,n=this.input("Val2").value;switch(this.comparision){case ao.EQUAL:t=e===n,bresk;case ao.NOT_EQUAL:t=e!==n;break;case ao.GT:t=e>n;break;case ao.GTE:t=e>=n;break;case ao.LT:t=e<n;break;case ao.LTE:t=e<=n;break;default:throw"Comparision type not valid"}this.output("Val").value=t}},{key:"comparision",get:function(){return function(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}(this,fo)},set:function(t){!function(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(this,fo,t)}}])&&ro(e.prototype,n),u}(Ce);function so(){return new lo}function po(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yo(t,e,n){if(t!==e)throw new TypeError("Private static access of wrong provenance");return n.get?n.get.call(t):n.value}var ho=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"init",value:function(){t.registerNode("call","Core",Rn),t.registerNode("console","Core",Nn),t.registerNode("fgetvar","Core",Bn),t.registerNode("for","Core",qn),t.registerNode("getvar","Core",or),t.registerNode("if","Core",_r),t.registerNode("setvar","Core",pr),t.registerNode("while","Core",gr),t.registerNode("fadd","Math",Ir),t.registerNode("fdiv","Math",Hr),t.registerNode("fmul","Math",to),t.registerNode("fcompare","Boolean",so)}},{key:"registerNode",value:function(e,n,r){yo(t,t,vo).set(e,{category:n,factory:r})}},{key:"getCategories",value:function(){var e=new Map;return Array.from(yo(this,t,vo).values()).forEach((function(t){e.set(t.category,0)})),Array.from(e.keys())}},{key:"getCategoryNodes",value:function(e){var n=[];return Array.from(yo(this,t,vo).entries()).forEach((function(t){t[1].category===e&&n.push({name:t[0],category:t[1].category,factory:t[1].factory})})),n}},{key:"getInstance",value:function(e){var n=yo(this,t,vo).get(e);return n?n.factory():null}}],null&&po(e.prototype,null),n&&po(e,n),t}(),vo={writable:!0,value:new Map};function bo(t){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mo(t,e){return(mo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function go(t,e){return!e||"object"!==bo(e)&&"function"!=typeof e?Oo(t):e}function Oo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function So(t){return(So=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ko(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}function Eo(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}var jo=new WeakMap,Ro=new WeakMap,Po=new WeakMap,_o=new WeakMap,xo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mo(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=So(r);if(o){var n=So(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return go(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),e=i.call(this,t),jo.set(Oo(e),{writable:!0,value:new Map}),Ro.set(Oo(e),{writable:!0,value:null}),Po.set(Oo(e),{writable:!0,value:null}),_o.set(Oo(e),{writable:!0,value:new Map}),e}return e=u,(n=[{key:"addNode",value:function(t,e){return Eo(this,jo).set(t.id,t),e&&ko(this,Ro,t),t.program=this,this}},{key:"removeNode",value:function(t){return this.start&&this.start.id===t.id&&(this.start=null),Eo(this,jo).delete(t.id),t.program=null,this}},{key:"clear",value:function(){return ko(this,jo,[]),this}},{key:"toString",value:function(){return"P{'"+this.name+"',{"+Array.from(Eo(this,jo).values()).reduce((function(t,e,n,r){return t+e.toString()+(n<r.length-1?",":"")}),"")+"}"}},{key:"process",value:function(){return Eo(this,Ro)&&this.processFrom(Eo(this,Ro)),new We}},{key:"processFrom",value:function(t){for(this.currentNode=t;null!==this.currentNode;){var e=this.currentNode.process();this.currentNode=e.next}}},{key:"vars",get:function(){return Eo(this,_o)},set:function(t){ko(this,_o,t)}},{key:"start",get:function(){return Eo(this,Ro)},set:function(t){ko(this,Ro,t)}},{key:"currentNode",get:function(){return Eo(this,Po)},set:function(t){ko(this,Po,t)}},{key:"nodes",get:function(){return Eo(this,jo)},set:function(t){ko(this,jo,t)}}])&&wo(e.prototype,n),u}(Ce);function Ao(t){return new xo(t)}function To(t){var e=document.getElementById(t);return e?(ho.init(),new O(e)):(console.log("No element with id '".concat(t,"'")),null)}}],e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}return n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(1)})();